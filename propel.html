

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>æ•°æ®åº“å’ŒPropel &mdash; Symfony Framework Documentation  æ–‡æ¡£</title>
  

  
  

  
  <link href="css-family=Lato-400,700,400italic,700italic-Roboto+Slab-400,700-Inconsolata-400,700&subset=latin,cyrillic.css" tppabs="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic" rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="theme.css" tppabs="http://symfony.cn/docs/_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="stylesheet" href="custom.css" tppabs="http://symfony.cn/docs/_static/custom.css" type="text/css" />
  
    <link rel="top" title="Symfony Framework Documentation  æ–‡æ¡£" href="../index.html"/>
        <link rel="up" title="æ•™ç¨‹" href="index.html"/>
        <link rel="next" title="æµ‹è¯•" href="testing.html"/>
        <link rel="prev" title="æ•°æ®åº“å’ŒDoctrine" href="doctrine.html"/> 

  
  <script src="modernizr.min.js" tppabs="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html" tppabs="http://symfony.cn/docs/index.html" class="fa fa-home"> Symfony Framework Documentation</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="http://symfony.cn/docs/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html" tppabs="http://symfony.cn/docs/changelog.html">The Documentation Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#february-2015" tppabs="http://symfony.cn/docs/changelog.html#february-2015">February, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#january-2015" tppabs="http://symfony.cn/docs/changelog.html#january-2015">January, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#december-2014" tppabs="http://symfony.cn/docs/changelog.html#december-2014">December, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#november-2014" tppabs="http://symfony.cn/docs/changelog.html#november-2014">November, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#october-2014" tppabs="http://symfony.cn/docs/changelog.html#october-2014">October, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#september-2014" tppabs="http://symfony.cn/docs/changelog.html#september-2014">September, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#august-2014" tppabs="http://symfony.cn/docs/changelog.html#august-2014">August, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#july-2014" tppabs="http://symfony.cn/docs/changelog.html#july-2014">July, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#june-2014" tppabs="http://symfony.cn/docs/changelog.html#june-2014">June, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#may-2014" tppabs="http://symfony.cn/docs/changelog.html#may-2014">May, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#april-2014" tppabs="http://symfony.cn/docs/changelog.html#april-2014">April, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#march-2014" tppabs="http://symfony.cn/docs/changelog.html#march-2014">March, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#february-2014" tppabs="http://symfony.cn/docs/changelog.html#february-2014">February, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#january-2014" tppabs="http://symfony.cn/docs/changelog.html#january-2014">January, 2014</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index-1.html" tppabs="http://symfony.cn/docs/quick_tour/index.html">å¿«é€Ÿå…¥é—¨</a><ul>
<li class="toctree-l2"><a class="reference internal" href="the_big_picture.html" tppabs="http://symfony.cn/docs/quick_tour/the_big_picture.html">æ€»è§ˆ</a></li>
<li class="toctree-l2"><a class="reference internal" href="the_view.html" tppabs="http://symfony.cn/docs/quick_tour/the_view.html">è§†å›¾</a></li>
<li class="toctree-l2"><a class="reference internal" href="the_controller.html" tppabs="http://symfony.cn/docs/quick_tour/the_controller.html">æ§åˆ¶å™¨ï¼ˆControllerï¼‰</a></li>
<li class="toctree-l2"><a class="reference internal" href="the_architecture.html" tppabs="http://symfony.cn/docs/quick_tour/the_architecture.html">ä»£ç ç»“æ„</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index-2.html" tppabs="http://symfony.cn/docs/book/index.html">æ•™ç¨‹</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="http_fundamentals.html" tppabs="http://symfony.cn/docs/book/http_fundamentals.html">Symfonyå’ŒHTTPåŸºç¡€å·¥å…·</a></li>
<li class="toctree-l2"><a class="reference internal" href="from_flat_php_to_symfony2.html" tppabs="http://symfony.cn/docs/book/from_flat_php_to_symfony2.html">Symfony vs çº¯PHP</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html" tppabs="http://symfony.cn/docs/book/installation.html">å®‰è£…å’Œé…ç½®Symfony</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_creation.html" tppabs="http://symfony.cn/docs/book/page_creation.html">åˆ›å»ºé¡µé¢</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller.html" tppabs="http://symfony.cn/docs/book/controller.html">æ§åˆ¶å™¨ï¼ˆControllerï¼‰</a></li>
<li class="toctree-l2"><a class="reference internal" href="routing.html" tppabs="http://symfony.cn/docs/book/routing.html">è·¯ç”±ï¼ˆRoutingï¼‰</a></li>
<li class="toctree-l2"><a class="reference internal" href="templating.html" tppabs="http://symfony.cn/docs/book/templating.html">åˆ›å»ºå’Œä½¿ç”¨æ¨¡æ¿</a></li>
<li class="toctree-l2"><a class="reference internal" href="doctrine.html" tppabs="http://symfony.cn/docs/book/doctrine.html">æ•°æ®åº“å’ŒDoctrine</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">æ•°æ®åº“å’ŒPropel</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html" tppabs="http://symfony.cn/docs/book/testing.html">æµ‹è¯•</a></li>
<li class="toctree-l2"><a class="reference internal" href="validation.html" tppabs="http://symfony.cn/docs/book/validation.html">æ ¡éªŒ</a></li>
<li class="toctree-l2"><a class="reference internal" href="forms.html" tppabs="http://symfony.cn/docs/book/forms.html">è¡¨å•</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html" tppabs="http://symfony.cn/docs/book/security.html">å®‰å…¨æ€§</a></li>
<li class="toctree-l2"><a class="reference internal" href="http_cache.html" tppabs="http://symfony.cn/docs/book/http_cache.html">HTTPç¼“å­˜</a></li>
<li class="toctree-l2"><a class="reference internal" href="translation.html" tppabs="http://symfony.cn/docs/book/translation.html">å¤šè¯­è¨€</a></li>
<li class="toctree-l2"><a class="reference internal" href="service_container.html" tppabs="http://symfony.cn/docs/book/service_container.html">æœåŠ¡å®¹å™¨ï¼ˆService Containerï¼‰</a></li>
<li class="toctree-l2"><a class="reference internal" href="performance.html" tppabs="http://symfony.cn/docs/book/performance.html">æ€§èƒ½</a></li>
<li class="toctree-l2"><a class="reference internal" href="internals.html" tppabs="http://symfony.cn/docs/book/internals.html">æ ¸å¿ƒåŠŸèƒ½</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index-3.html" tppabs="http://symfony.cn/docs/cookbook/index.html">æ‰‹å†Œ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index-4.html" tppabs="http://symfony.cn/docs/cookbook/assetic/index.html">é™æ€æ–‡ä»¶å¤„ç†ï¼ˆAsseticï¼‰</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-5.html" tppabs="http://symfony.cn/docs/cookbook/bundles/index.html">åŒ…ï¼ˆBundleï¼‰</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-6.html" tppabs="http://symfony.cn/docs/cookbook/cache/index.html">ç¼“å­˜</a></li>
<li class="toctree-l2"><a class="reference internal" href="composer.html" tppabs="http://symfony.cn/docs/cookbook/composer.html">Installing Composer</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-7.html" tppabs="http://symfony.cn/docs/cookbook/configuration/index.html">é…ç½®</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-8.html" tppabs="http://symfony.cn/docs/cookbook/console/index.html">å‘½ä»¤è¡Œ</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-9.html" tppabs="http://symfony.cn/docs/cookbook/controller/index.html">æ§åˆ¶å™¨ï¼ˆControllerï¼‰</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html" tppabs="http://symfony.cn/docs/cookbook/debugging.html">How to Optimize your Development Environment for Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-10.html" tppabs="http://symfony.cn/docs/cookbook/deployment/index.html">éƒ¨ç½²</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-11.html" tppabs="http://symfony.cn/docs/cookbook/doctrine/index.html">Doctrine</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-12.html" tppabs="http://symfony.cn/docs/cookbook/email/index.html">é‚®ä»¶</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-13.html" tppabs="http://symfony.cn/docs/cookbook/event_dispatcher/index.html">äº‹ä»¶åˆ†å‘å™¨ï¼ˆDispatcherï¼‰</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-14.html" tppabs="http://symfony.cn/docs/cookbook/expression/index.html">è¡¨è¾¾å¼ï¼ˆExpressionï¼‰</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-15.html" tppabs="http://symfony.cn/docs/cookbook/form/index.html">Form</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-16.html" tppabs="http://symfony.cn/docs/cookbook/logging/index.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-17.html" tppabs="http://symfony.cn/docs/cookbook/profiler/index.html">Profiler</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-18.html" tppabs="http://symfony.cn/docs/cookbook/request/index.html">Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-19.html" tppabs="http://symfony.cn/docs/cookbook/routing/index.html">Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-20.html" tppabs="http://symfony.cn/docs/cookbook/security/index.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="serializer.html" tppabs="http://symfony.cn/docs/cookbook/serializer.html">How to Use the Serializer</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-21.html" tppabs="http://symfony.cn/docs/cookbook/service_container/index.html">Service Container</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-22.html" tppabs="http://symfony.cn/docs/cookbook/session/index.html">Sessions</a></li>
<li class="toctree-l2"><a class="reference internal" href="symfony1.html" tppabs="http://symfony.cn/docs/cookbook/symfony1.html">How Symfony2 Differs from Symfony1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-23.html" tppabs="http://symfony.cn/docs/cookbook/templating/index.html">Templating</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-24.html" tppabs="http://symfony.cn/docs/cookbook/testing/index.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrading.html" tppabs="http://symfony.cn/docs/cookbook/upgrading.html">How to Upgrade Your Symfony Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-25.html" tppabs="http://symfony.cn/docs/cookbook/validation/index.html">Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-26.html" tppabs="http://symfony.cn/docs/cookbook/web_server/index.html">Web Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-27.html" tppabs="http://symfony.cn/docs/cookbook/web_services/index.html">Web Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-28.html" tppabs="http://symfony.cn/docs/cookbook/workflow/index.html">Workflow</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index-29.html" tppabs="http://symfony.cn/docs/best_practices/index.html">æœ€ä½³å®è·µ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html" tppabs="http://symfony.cn/docs/best_practices/introduction.html">Symfonyæ¡†æ¶æœ€ä½³å®è·µ</a></li>
<li class="toctree-l2"><a class="reference internal" href="creating-the-project.html" tppabs="http://symfony.cn/docs/best_practices/creating-the-project.html">åˆ›å»ºé¡¹ç›®</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html" tppabs="http://symfony.cn/docs/best_practices/configuration.html">é…ç½®å‚æ•°</a></li>
<li class="toctree-l2"><a class="reference internal" href="business-logic.html" tppabs="http://symfony.cn/docs/best_practices/business-logic.html">ä¸šåŠ¡é€»è¾‘ä»£ç çš„ç»„ç»‡</a></li>
<li class="toctree-l2"><a class="reference internal" href="controllers.html" tppabs="http://symfony.cn/docs/best_practices/controllers.html">æ§åˆ¶å™¨ï¼ˆControllerï¼‰</a></li>
<li class="toctree-l2"><a class="reference internal" href="templates.html" tppabs="http://symfony.cn/docs/best_practices/templates.html">æ¨¡æ¿</a></li>
<li class="toctree-l2"><a class="reference internal" href="forms-1.html" tppabs="http://symfony.cn/docs/best_practices/forms.html">è¡¨å•</a></li>
<li class="toctree-l2"><a class="reference internal" href="i18n.html" tppabs="http://symfony.cn/docs/best_practices/i18n.html">å¤šè¯­è¨€æ”¯æŒ</a></li>
<li class="toctree-l2"><a class="reference internal" href="security-1.html" tppabs="http://symfony.cn/docs/best_practices/security.html">å®‰å…¨</a></li>
<li class="toctree-l2"><a class="reference internal" href="web-assets.html" tppabs="http://symfony.cn/docs/best_practices/web-assets.html">é™æ€æ–‡ä»¶ï¼ˆAssetsï¼‰</a></li>
<li class="toctree-l2"><a class="reference internal" href="tests.html" tppabs="http://symfony.cn/docs/best_practices/tests.html">æµ‹è¯•</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index-30.html" tppabs="http://symfony.cn/docs/components/index.html">ç»„ä»¶</a><ul>
<li class="toctree-l2"><a class="reference internal" href="using_components.html" tppabs="http://symfony.cn/docs/components/using_components.html">How to Install and Use the Symfony Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-31.html" tppabs="http://symfony.cn/docs/components/asset/index.html">Asset</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-32.html" tppabs="http://symfony.cn/docs/components/class_loader/index.html">ClassLoader</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-33.html" tppabs="http://symfony.cn/docs/components/config/index.html">Config</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-34.html" tppabs="http://symfony.cn/docs/components/console/index.html">Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="css_selector.html" tppabs="http://symfony.cn/docs/components/css_selector.html">The CssSelector Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-35.html" tppabs="http://symfony.cn/docs/components/debug/index.html">Debug</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-36.html" tppabs="http://symfony.cn/docs/components/dependency_injection/index.html">DependencyInjection</a></li>
<li class="toctree-l2"><a class="reference internal" href="dom_crawler.html" tppabs="http://symfony.cn/docs/components/dom_crawler.html">The DomCrawler Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-37.html" tppabs="http://symfony.cn/docs/components/event_dispatcher/index.html">EventDispatcher</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-38.html" tppabs="http://symfony.cn/docs/components/expression_language/index.html">Expression Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-39.html" tppabs="http://symfony.cn/docs/components/filesystem/index.html">Filesystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="finder.html" tppabs="http://symfony.cn/docs/components/finder.html">The Finder Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-40.html" tppabs="http://symfony.cn/docs/components/form/index.html">Form</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-41.html" tppabs="http://symfony.cn/docs/components/http_foundation/index.html">HttpFoundation</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-42.html" tppabs="http://symfony.cn/docs/components/http_kernel/index.html">HttpKernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="intl.html" tppabs="http://symfony.cn/docs/components/intl.html">The Intl Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="options_resolver.html" tppabs="http://symfony.cn/docs/components/options_resolver.html">The OptionsResolver Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="process.html" tppabs="http://symfony.cn/docs/components/process.html">The Process Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-43.html" tppabs="http://symfony.cn/docs/components/property_access/index.html">PropertyAccess</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-44.html" tppabs="http://symfony.cn/docs/components/routing/index.html">Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-45.html" tppabs="http://symfony.cn/docs/components/security/index.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="serializer-1.html" tppabs="http://symfony.cn/docs/components/serializer.html">The Serializer Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="stopwatch.html" tppabs="http://symfony.cn/docs/components/stopwatch.html">The Stopwatch Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-46.html" tppabs="http://symfony.cn/docs/components/templating/index.html">Templating</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-47.html" tppabs="http://symfony.cn/docs/components/translation/index.html">Translation</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-48.html" tppabs="http://symfony.cn/docs/components/var_dumper/index.html">VarDumper</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-49.html" tppabs="http://symfony.cn/docs/components/yaml/index.html">Yaml</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index-50.html" tppabs="http://symfony.cn/docs/reference/index.html">å‚è€ƒ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="framework.html" tppabs="http://symfony.cn/docs/reference/configuration/framework.html">FrameworkBundle Configuration (&#8220;framework&#8221;)</a></li>
<li class="toctree-l2"><a class="reference internal" href="doctrine-1.html" tppabs="http://symfony.cn/docs/reference/configuration/doctrine.html">DoctrineBundle Configuration (&#8220;doctrine&#8221;)</a></li>
<li class="toctree-l2"><a class="reference internal" href="security-2.html" tppabs="http://symfony.cn/docs/reference/configuration/security.html">SecurityBundle Configuration (&#8220;security&#8221;)</a></li>
<li class="toctree-l2"><a class="reference internal" href="assetic.html" tppabs="http://symfony.cn/docs/reference/configuration/assetic.html">AsseticBundle Configuration (&#8220;assetic&#8221;)</a></li>
<li class="toctree-l2"><a class="reference internal" href="swiftmailer.html" tppabs="http://symfony.cn/docs/reference/configuration/swiftmailer.html">SwiftmailerBundle Configuration (&#8220;swiftmailer&#8221;)</a></li>
<li class="toctree-l2"><a class="reference internal" href="twig.html" tppabs="http://symfony.cn/docs/reference/configuration/twig.html">TwigBundle Configuration (&#8220;twig&#8221;)</a></li>
<li class="toctree-l2"><a class="reference internal" href="monolog.html" tppabs="http://symfony.cn/docs/reference/configuration/monolog.html">MonologBundle Configuration (&#8220;monolog&#8221;)</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_profiler.html" tppabs="http://symfony.cn/docs/reference/configuration/web_profiler.html">WebProfilerBundle Configuration (&#8220;web_profiler&#8221;)</a></li>
<li class="toctree-l2"><a class="reference internal" href="kernel.html" tppabs="http://symfony.cn/docs/reference/configuration/kernel.html">Configuring in the Kernel (e.g. AppKernel)</a></li>
<li class="toctree-l2"><a class="reference internal" href="types.html" tppabs="http://symfony.cn/docs/reference/forms/types.html">Form Types Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="constraints.html" tppabs="http://symfony.cn/docs/reference/constraints.html">Validation Constraints Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="twig_reference.html" tppabs="http://symfony.cn/docs/reference/forms/twig_reference.html">Twig Template Form Function and Variable Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="twig_reference-1.html" tppabs="http://symfony.cn/docs/reference/twig_reference.html">Symfony Twig Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="dic_tags.html" tppabs="http://symfony.cn/docs/reference/dic_tags.html">The Dependency Injection Tags</a></li>
<li class="toctree-l2"><a class="reference internal" href="requirements.html" tppabs="http://symfony.cn/docs/reference/requirements.html">Requirements for Running Symfony</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index-51.html" tppabs="http://symfony.cn/docs/contributing/index.html">è´¡çŒ®</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index-52.html" tppabs="http://symfony.cn/docs/contributing/code/index.html">è´¡çŒ®ä»£ç </a></li>
<li class="toctree-l2"><a class="reference internal" href="index-53.html" tppabs="http://symfony.cn/docs/contributing/documentation/index.html">è´¡çŒ®æ–‡æ¡£</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-54.html" tppabs="http://symfony.cn/docs/contributing/community/index.html">ç¤¾åŒº</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html" tppabs="http://symfony.cn/docs/index.html">Symfony Framework Documentation</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html" tppabs="http://symfony.cn/docs/index.html">Docs</a> &raquo;</li>
      
          <li><a href="index-2.html" tppabs="http://symfony.cn/docs/book/index.html">æ•™ç¨‹</a> &raquo;</li>
      
    <li>æ•°æ®åº“å’ŒPropel</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="propel.txt" tppabs="http://symfony.cn/docs/_sources/book/propel.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="databases-and-propel">
<span id="index-0"></span><h1>æ•°æ®åº“å’ŒPropel<a class="headerlink" href="#databases-and-propel" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h1>
<p>One of the most common and challenging tasks for any application
involves persisting and reading information to and from a database. Symfony
does not come integrated with any ORMs but the Propel integration is easy.
To install Propel, read <a class="reference external" href="javascript:if(confirm('http://propelorm.org/Propel/cookbook/symfony2/working-with-symfony2.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://propelorm.org/Propel/cookbook/symfony2/working-with-symfony2.html#installation'" tppabs="http://propelorm.org/Propel/cookbook/symfony2/working-with-symfony2.html#installation">Working With Symfony2</a> on the Propel documentation.</p>
<div class="section" id="a-simple-example-a-product">
<h2>A Simple Example: A Product<a class="headerlink" href="#a-simple-example-a-product" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>In this section, you&#8217;ll configure your database, create a <code class="docutils literal"><span class="pre">Product</span></code> object,
persist it to the database and fetch it back out.</p>
<div class="section" id="configuring-the-database">
<h3>Configuring the Database<a class="headerlink" href="#configuring-the-database" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>Before you can start, you&#8217;ll need to configure your database connection
information. By convention, this information is usually configured in an
<code class="docutils literal"><span class="pre">app/config/parameters.yml</span></code> file:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/parameters.yml</span>
<span class="l-Scalar-Plain">parameters</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">database_driver</span><span class="p-Indicator">:</span>   <span class="l-Scalar-Plain">mysql</span>
    <span class="l-Scalar-Plain">database_host</span><span class="p-Indicator">:</span>     <span class="l-Scalar-Plain">localhost</span>
    <span class="l-Scalar-Plain">database_name</span><span class="p-Indicator">:</span>     <span class="l-Scalar-Plain">test_project</span>
    <span class="l-Scalar-Plain">database_user</span><span class="p-Indicator">:</span>     <span class="l-Scalar-Plain">root</span>
    <span class="l-Scalar-Plain">database_password</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">password</span>
    <span class="l-Scalar-Plain">database_charset</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">UTF8</span>
</pre></div>
</div>
<p>These parameters defined in <code class="docutils literal"><span class="pre">parameters.yml</span></code> can now be included in the
configuration file (<code class="docutils literal"><span class="pre">config.yml</span></code>):</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">propel</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">dbal</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">driver</span><span class="p-Indicator">:</span>   <span class="s">&quot;%database_driver%&quot;</span>
        <span class="l-Scalar-Plain">user</span><span class="p-Indicator">:</span>     <span class="s">&quot;%database_user%&quot;</span>
        <span class="l-Scalar-Plain">password</span><span class="p-Indicator">:</span> <span class="s">&quot;%database_password%&quot;</span>
        <span class="l-Scalar-Plain">dsn</span><span class="p-Indicator">:</span>      <span class="s">&quot;%database_driver%:host=%database_host%;dbname=%database_name%;charset=%database_charset%&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">æ³¨è§£</p>
<p class="last">Defining the configuration via <code class="docutils literal"><span class="pre">parameters.yml</span></code> is a
<a class="reference internal" href="configuration.html#best-practices-canonical-parameters" tppabs="http://symfony.cn/docs/best_practices/configuration.html#best-practices-canonical-parameters"><span>Symfony Framework Best Practice</span></a>,
feel free to do it differently if that suits your application better.</p>
</div>
<p>Now that Propel knows about your database, it can create the database for
you:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>php app/console propel:database:create
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">æ³¨è§£</p>
<p class="last">In this example, you have one configured connection, named <code class="docutils literal"><span class="pre">default</span></code>. If
you want to configure more than one connection, read the
<a class="reference external" href="javascript:if(confirm('http://propelorm.org/Propel/cookbook/symfony2/working-with-symfony2.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://propelorm.org/Propel/cookbook/symfony2/working-with-symfony2.html#configuration'" tppabs="http://propelorm.org/Propel/cookbook/symfony2/working-with-symfony2.html#configuration">PropelBundle configuration section</a>.</p>
</div>
</div>
<div class="section" id="creating-a-model-class">
<h3>Creating a Model Class<a class="headerlink" href="#creating-a-model-class" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>In the Propel world, ActiveRecord classes are known as <strong>models</strong> because classes
generated by Propel contain some business logic.</p>
<div class="admonition note">
<p class="first admonition-title">æ³¨è§£</p>
<p class="last">For people who use Symfony with Doctrine2, <strong>models</strong> are equivalent to
<strong>entities</strong>.</p>
</div>
<p>Suppose you&#8217;re building an application where products need to be displayed.
First, create a <code class="docutils literal"><span class="pre">schema.xml</span></code> file inside the <code class="docutils literal"><span class="pre">Resources/config</span></code> directory
of your AppBundle:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- src/AppBundle/Resources/config/schema.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;database</span>
    <span class="na">name=</span><span class="s">&quot;default&quot;</span>
    <span class="na">namespace=</span><span class="s">&quot;AppBundle\Model&quot;</span>
    <span class="na">defaultIdMethod=</span><span class="s">&quot;native&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;table</span> <span class="na">name=</span><span class="s">&quot;product&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;column</span>
            <span class="na">name=</span><span class="s">&quot;id&quot;</span>
            <span class="na">type=</span><span class="s">&quot;integer&quot;</span>
            <span class="na">required=</span><span class="s">&quot;true&quot;</span>
            <span class="na">primaryKey=</span><span class="s">&quot;true&quot;</span>
            <span class="na">autoIncrement=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>

        <span class="nt">&lt;column</span>
            <span class="na">name=</span><span class="s">&quot;name&quot;</span>
            <span class="na">type=</span><span class="s">&quot;varchar&quot;</span>
            <span class="na">primaryString=</span><span class="s">&quot;true&quot;</span>
            <span class="na">size=</span><span class="s">&quot;100&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;column</span>
            <span class="na">name=</span><span class="s">&quot;price&quot;</span>
            <span class="na">type=</span><span class="s">&quot;decimal&quot;</span> <span class="nt">/&gt;</span>

        <span class="nt">&lt;column</span>
            <span class="na">name=</span><span class="s">&quot;description&quot;</span>
            <span class="na">type=</span><span class="s">&quot;longvarchar&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/table&gt;</span>
<span class="nt">&lt;/database&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="building-the-model">
<h3>Building the Model<a class="headerlink" href="#building-the-model" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>After creating your <code class="docutils literal"><span class="pre">schema.xml</span></code>, generate your model from it by running:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>php app/console propel:model:build
</pre></div>
</div>
<p>This generates each model class to quickly develop your application in the
<code class="docutils literal"><span class="pre">Model/</span></code> directory of the AppBundle bundle.</p>
</div>
<div class="section" id="creating-the-database-tables-schema">
<h3>Creating the Database Tables/Schema<a class="headerlink" href="#creating-the-database-tables-schema" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>Now you have a usable <code class="docutils literal"><span class="pre">Product</span></code> class and all you need to persist it. Of
course, you don&#8217;t yet have the corresponding <code class="docutils literal"><span class="pre">product</span></code> table in your
database. Fortunately, Propel can automatically create all the database tables
needed for every known model in your application. To do this, run:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>php app/console propel:sql:build
<span class="nv">$ </span>php app/console propel:sql:insert --force
</pre></div>
</div>
<p>Your database now has a fully-functional <code class="docutils literal"><span class="pre">product</span></code> table with columns that
match the schema you&#8217;ve specified.</p>
<div class="admonition tip">
<p class="first admonition-title">å°æŠ€å·§</p>
<p>You can run the last three commands combined by using the following
command:</p>
<div class="last highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>php app/console propel:build --insert-sql
</pre></div>
</div>
</div>
</div>
<div class="section" id="persisting-objects-to-the-database">
<h3>Persisting Objects to the Database<a class="headerlink" href="#persisting-objects-to-the-database" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>Now that you have a <code class="docutils literal"><span class="pre">Product</span></code> object and corresponding <code class="docutils literal"><span class="pre">product</span></code> table,
you&#8217;re ready to persist data to the database. From inside a controller, this
is pretty easy. Add the following method to the <code class="docutils literal"><span class="pre">ProductController</span></code> of the
bundle:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/AppBundle/Controller/ProductController.php</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">AppBundle\Model\Product</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ProductController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">createAction</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$product</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Product</span><span class="p">();</span>
        <span class="nv">$product</span><span class="o">-&gt;</span><span class="na">setName</span><span class="p">(</span><span class="s1">&#39;A Foo Bar&#39;</span><span class="p">);</span>
        <span class="nv">$product</span><span class="o">-&gt;</span><span class="na">setPrice</span><span class="p">(</span><span class="mf">19.99</span><span class="p">);</span>
        <span class="nv">$product</span><span class="o">-&gt;</span><span class="na">setDescription</span><span class="p">(</span><span class="s1">&#39;Lorem ipsum dolor&#39;</span><span class="p">);</span>

        <span class="nv">$product</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>

        <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="s1">&#39;Created product id &#39;</span><span class="o">.</span><span class="nv">$product</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this piece of code, you instantiate and work with the <code class="docutils literal"><span class="pre">$product</span></code> object.
When you call the <code class="docutils literal"><span class="pre">save()</span></code> method on it, you persist it to the database. No
need to use other services, the object knows how to persist itself.</p>
<div class="admonition note">
<p class="first admonition-title">æ³¨è§£</p>
<p class="last">If you&#8217;re following along with this example, you&#8217;ll need to create a
<a class="reference internal" href="routing.html" tppabs="http://symfony.cn/docs/book/routing.html"><em>route</em></a> that points to this action to see it in action.</p>
</div>
</div>
<div class="section" id="fetching-objects-from-the-database">
<h3>Fetching Objects from the Database<a class="headerlink" href="#fetching-objects-from-the-database" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>Fetching an object back from the database is even easier. For example, suppose
you&#8217;ve configured a route to display a specific <code class="docutils literal"><span class="pre">Product</span></code> based on its <code class="docutils literal"><span class="pre">id</span></code>
value:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/AppBundle/Controller/ProductController.php</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">AppBundle\Model\ProductQuery</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ProductController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">showAction</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$product</span> <span class="o">=</span> <span class="nx">ProductQuery</span><span class="o">::</span><span class="na">create</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">findPk</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$product</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createNotFoundException</span><span class="p">(</span>
                <span class="s1">&#39;No product found for id &#39;</span><span class="o">.</span><span class="nv">$id</span>
            <span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">// ... do something, like pass the $product object into a template</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="updating-an-object">
<h3>Updating an Object<a class="headerlink" href="#updating-an-object" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>Once you&#8217;ve fetched an object from Propel, updating it is easy. Suppose you
have a route that maps a product id to an update action in a controller:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/AppBundle/Controller/ProductController.php</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">AppBundle\Model\ProductQuery</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ProductController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">updateAction</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$product</span> <span class="o">=</span> <span class="nx">ProductQuery</span><span class="o">::</span><span class="na">create</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">findPk</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$product</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createNotFoundException</span><span class="p">(</span>
                <span class="s1">&#39;No product found for id &#39;</span><span class="o">.</span><span class="nv">$id</span>
            <span class="p">);</span>
        <span class="p">}</span>

        <span class="nv">$product</span><span class="o">-&gt;</span><span class="na">setName</span><span class="p">(</span><span class="s1">&#39;New product name!&#39;</span><span class="p">);</span>
        <span class="nv">$product</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>

        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirectToRoute</span><span class="p">(</span><span class="s1">&#39;homepage&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Updating an object involves just three steps:</p>
<ol class="arabic simple">
<li>fetching the object from Propel (line 12 - 18);</li>
<li>modifying the object (line 20);</li>
<li>saving it (line 21).</li>
</ol>
</div>
<div class="section" id="deleting-an-object">
<h3>Deleting an Object<a class="headerlink" href="#deleting-an-object" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>Deleting an object is very similar to updating, but requires a call to the
<code class="docutils literal"><span class="pre">delete()</span></code> method on the object:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$product</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="querying-for-objects">
<h2>Querying for Objects<a class="headerlink" href="#querying-for-objects" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>Propel provides generated <code class="docutils literal"><span class="pre">Query</span></code> classes to run both basic and complex queries
without any work:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">AppBundle\Model\ProductQuery</span><span class="p">;</span>
<span class="c1">// ...</span>

<span class="nx">ProductQuery</span><span class="o">::</span><span class="na">create</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">findPk</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>

<span class="nx">ProductQuery</span><span class="o">::</span><span class="na">create</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="na">filterByName</span><span class="p">(</span><span class="s1">&#39;Foo&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">findOne</span><span class="p">();</span>
</pre></div>
</div>
<p>Imagine that you want to query for products which cost more than 19.99, ordered
from cheapest to most expensive. From inside a controller, do the following:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">AppBundle\Model\ProductQuery</span><span class="p">;</span>
<span class="c1">// ...</span>

<span class="nv">$products</span> <span class="o">=</span> <span class="nx">ProductQuery</span><span class="o">::</span><span class="na">create</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="na">filterByPrice</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;min&#39;</span> <span class="o">=&gt;</span> <span class="mf">19.99</span><span class="p">))</span>
    <span class="o">-&gt;</span><span class="na">orderByPrice</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="na">find</span><span class="p">();</span>
</pre></div>
</div>
<p>In one line, you get your products in a powerful oriented object way. No need
to waste your time with SQL or whatever, Symfony offers fully object oriented
programming and Propel respects the same philosophy by providing an awesome
abstraction layer.</p>
<p>If you want to reuse some queries, you can add your own methods to the
<code class="docutils literal"><span class="pre">ProductQuery</span></code> class:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/AppBundle/Model/ProductQuery.php</span>

<span class="c1">// ...</span>
<span class="k">class</span> <span class="nc">ProductQuery</span> <span class="k">extends</span> <span class="nx">BaseProductQuery</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">filterByExpensivePrice</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">filterByPrice</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;min&#39;</span> <span class="o">=&gt;</span> <span class="mi">1000</span><span class="p">,</span>
        <span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>However, note that Propel generates a lot of methods for you and a simple
<code class="docutils literal"><span class="pre">findAllOrderedByName()</span></code> can be written without any effort:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">AppBundle\Model\ProductQuery</span><span class="p">;</span>
<span class="c1">// ...</span>

<span class="nx">ProductQuery</span><span class="o">::</span><span class="na">create</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="na">orderByName</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="na">find</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="relationships-associations">
<h2>Relationships/Associations<a class="headerlink" href="#relationships-associations" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>Suppose that the products in your application all belong to exactly one
&#8220;category&#8221;. In this case, you&#8217;ll need a <code class="docutils literal"><span class="pre">Category</span></code> object and a way to relate
a <code class="docutils literal"><span class="pre">Product</span></code> object to a <code class="docutils literal"><span class="pre">Category</span></code> object.</p>
<p>Start by adding the <code class="docutils literal"><span class="pre">category</span></code> definition in your <code class="docutils literal"><span class="pre">schema.xml</span></code>:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;database</span>
    <span class="na">name=</span><span class="s">&quot;default&quot;</span>
    <span class="na">namespace=</span><span class="s">&quot;AppBundle\Model&quot;</span>
    <span class="na">defaultIdMethod=</span><span class="s">&quot;native&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;table</span> <span class="na">name=</span><span class="s">&quot;product&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;column</span>
            <span class="na">name=</span><span class="s">&quot;id&quot;</span>
            <span class="na">type=</span><span class="s">&quot;integer&quot;</span>
            <span class="na">required=</span><span class="s">&quot;true&quot;</span>
            <span class="na">primaryKey=</span><span class="s">&quot;true&quot;</span>
            <span class="na">autoIncrement=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>

        <span class="nt">&lt;column</span>
            <span class="na">name=</span><span class="s">&quot;name&quot;</span>
            <span class="na">type=</span><span class="s">&quot;varchar&quot;</span>
            <span class="na">primaryString=</span><span class="s">&quot;true&quot;</span>
            <span class="na">size=</span><span class="s">&quot;100&quot;</span> <span class="nt">/&gt;</span>

        <span class="nt">&lt;column</span>
            <span class="na">name=</span><span class="s">&quot;price&quot;</span>
            <span class="na">type=</span><span class="s">&quot;decimal&quot;</span> <span class="nt">/&gt;</span>

        <span class="nt">&lt;column</span>
            <span class="na">name=</span><span class="s">&quot;description&quot;</span>
            <span class="na">type=</span><span class="s">&quot;longvarchar&quot;</span> <span class="nt">/&gt;</span>

        <span class="nt">&lt;column</span>
            <span class="na">name=</span><span class="s">&quot;category_id&quot;</span>
            <span class="na">type=</span><span class="s">&quot;integer&quot;</span> <span class="nt">/&gt;</span>

        <span class="nt">&lt;foreign-key</span> <span class="na">foreignTable=</span><span class="s">&quot;category&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;reference</span> <span class="na">local=</span><span class="s">&quot;category_id&quot;</span> <span class="na">foreign=</span><span class="s">&quot;id&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/foreign-key&gt;</span>
    <span class="nt">&lt;/table&gt;</span>

    <span class="nt">&lt;table</span> <span class="na">name=</span><span class="s">&quot;category&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;column</span>
            <span class="na">name=</span><span class="s">&quot;id&quot;</span>
            <span class="na">type=</span><span class="s">&quot;integer&quot;</span>
            <span class="na">required=</span><span class="s">&quot;true&quot;</span>
            <span class="na">primaryKey=</span><span class="s">&quot;true&quot;</span>
            <span class="na">autoIncrement=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>

        <span class="nt">&lt;column</span>
            <span class="na">name=</span><span class="s">&quot;name&quot;</span>
            <span class="na">type=</span><span class="s">&quot;varchar&quot;</span>
            <span class="na">primaryString=</span><span class="s">&quot;true&quot;</span>
            <span class="na">size=</span><span class="s">&quot;100&quot;</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;/table&gt;</span>
<span class="nt">&lt;/database&gt;</span>
</pre></div>
</div>
<p>Create the classes:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>php app/console propel:model:build
</pre></div>
</div>
<p>Assuming you have products in your database, you don&#8217;t want to lose them. Thanks to
migrations, Propel will be able to update your database without losing existing
data.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>php app/console propel:migration:generate-diff
<span class="nv">$ </span>php app/console propel:migration:migrate
</pre></div>
</div>
<p>Your database has been updated, you can continue writing your application.</p>
<div class="section" id="saving-related-objects">
<h3>Saving Related Objects<a class="headerlink" href="#saving-related-objects" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>Now, try the code in action. Imagine you&#8217;re inside a controller:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/AppBundle/Controller/ProductController.php</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">AppBundle\Model\Category</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">AppBundle\Model\Product</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ProductController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">createProductAction</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$category</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Category</span><span class="p">();</span>
        <span class="nv">$category</span><span class="o">-&gt;</span><span class="na">setName</span><span class="p">(</span><span class="s1">&#39;Main Products&#39;</span><span class="p">);</span>

        <span class="nv">$product</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Product</span><span class="p">();</span>
        <span class="nv">$product</span><span class="o">-&gt;</span><span class="na">setName</span><span class="p">(</span><span class="s1">&#39;Foo&#39;</span><span class="p">);</span>
        <span class="nv">$product</span><span class="o">-&gt;</span><span class="na">setPrice</span><span class="p">(</span><span class="mf">19.99</span><span class="p">);</span>
        <span class="c1">// relate this product to the category</span>
        <span class="nv">$product</span><span class="o">-&gt;</span><span class="na">setCategory</span><span class="p">(</span><span class="nv">$category</span><span class="p">);</span>

        <span class="c1">// save the whole</span>
        <span class="nv">$product</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>

        <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span>
            <span class="s1">&#39;Created product id: &#39;</span><span class="o">.</span><span class="nv">$product</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">()</span><span class="o">.</span><span class="s1">&#39; and category id: &#39;</span><span class="o">.</span><span class="nv">$category</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">()</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now, a single row is added to both the <code class="docutils literal"><span class="pre">category</span></code> and <code class="docutils literal"><span class="pre">product</span></code> tables. The
<code class="docutils literal"><span class="pre">product.category_id</span></code> column for the new product is set to whatever the id is
of the new category. Propel manages the persistence of this relationship for
you.</p>
</div>
<div class="section" id="fetching-related-objects">
<h3>Fetching Related Objects<a class="headerlink" href="#fetching-related-objects" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>When you need to fetch associated objects, your workflow looks just like it did
before: Fetch a <code class="docutils literal"><span class="pre">$product</span></code> object and then access its related <code class="docutils literal"><span class="pre">Category</span></code>:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/AppBundle/Controller/ProductController.php</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">AppBundle\Model\ProductQuery</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ProductController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">showAction</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$product</span> <span class="o">=</span> <span class="nx">ProductQuery</span><span class="o">::</span><span class="na">create</span><span class="p">()</span>
            <span class="o">-&gt;</span><span class="na">joinWithCategory</span><span class="p">()</span>
            <span class="o">-&gt;</span><span class="na">findPk</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>

        <span class="nv">$categoryName</span> <span class="o">=</span> <span class="nv">$product</span><span class="o">-&gt;</span><span class="na">getCategory</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">();</span>

        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note, in the above example, only one query was made.</p>
</div>
<div class="section" id="more-information-on-associations">
<h3>More Information on Associations<a class="headerlink" href="#more-information-on-associations" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>You will find more information on relations by reading the dedicated chapter on
<a class="reference external" href="javascript:if(confirm('http://propelorm.org/Propel/documentation/04-relationships.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://propelorm.org/Propel/documentation/04-relationships.html'" tppabs="http://propelorm.org/Propel/documentation/04-relationships.html">Relationships</a>.</p>
</div>
</div>
<div class="section" id="lifecycle-callbacks">
<h2>Lifecycle Callbacks<a class="headerlink" href="#lifecycle-callbacks" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>Sometimes, you need to perform an action right before or after an object is
inserted, updated, or deleted. These types of actions are known as &#8220;lifecycle&#8221;
callbacks or &#8220;hooks&#8221;, as they&#8217;re callback methods that you need to execute
during different stages of the lifecycle of an object (e.g. the object is
inserted, updated, deleted, etc).</p>
<p>To add a hook, just add a new method to the object class:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/AppBundle/Model/Product.php</span>

<span class="c1">// ...</span>
<span class="k">class</span> <span class="nc">Product</span> <span class="k">extends</span> <span class="nx">BaseProduct</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">preInsert</span><span class="p">(</span><span class="nx">\PropelPDO</span> <span class="nv">$con</span> <span class="o">=</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ... do something before the object is inserted</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Propel provides the following hooks:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">preInsert()</span></code></dt>
<dd>Code executed before insertion of a new object.</dd>
<dt><code class="docutils literal"><span class="pre">postInsert()</span></code></dt>
<dd>Code executed after insertion of a new object.</dd>
<dt><code class="docutils literal"><span class="pre">preUpdate()</span></code></dt>
<dd>Code executed before update of an existing object.</dd>
<dt><code class="docutils literal"><span class="pre">postUpdate()</span></code></dt>
<dd>Code executed after update of an existing object.</dd>
<dt><code class="docutils literal"><span class="pre">preSave()</span></code></dt>
<dd>Code executed before saving an object (new or existing).</dd>
<dt><code class="docutils literal"><span class="pre">postSave()</span></code></dt>
<dd>Code executed after saving an object (new or existing).</dd>
<dt><code class="docutils literal"><span class="pre">preDelete()</span></code></dt>
<dd>Code executed before deleting an object.</dd>
<dt><code class="docutils literal"><span class="pre">postDelete()</span></code></dt>
<dd>Code executed after deleting an object.</dd>
</dl>
</div>
<div class="section" id="behaviors">
<h2>Behaviors<a class="headerlink" href="#behaviors" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>All bundled behaviors in Propel are working with Symfony. To get more
information about how to use Propel behaviors, look at the
<a class="reference external" href="javascript:if(confirm('http://propelorm.org/Propel/documentation/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://propelorm.org/Propel/documentation/#behaviors-reference'" tppabs="http://propelorm.org/Propel/documentation/#behaviors-reference">Behaviors reference section</a>.</p>
</div>
<div class="section" id="commands">
<h2>Commands<a class="headerlink" href="#commands" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>You should read the dedicated section for <a class="reference external" href="javascript:if(confirm('http://propelorm.org/Propel/cookbook/symfony2/working-with-symfony2  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://propelorm.org/Propel/cookbook/symfony2/working-with-symfony2#the-commands'" tppabs="http://propelorm.org/Propel/cookbook/symfony2/working-with-symfony2#the-commands">Propel commands in Symfony2</a>.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="testing.html" tppabs="http://symfony.cn/docs/book/testing.html" class="btn btn-neutral float-right" title="æµ‹è¯•">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="doctrine.html" tppabs="http://symfony.cn/docs/book/doctrine.html" class="btn btn-neutral" title="æ•°æ®åº“å’ŒDoctrine"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; ç‰ˆæƒæ‰€æœ‰ Creative Commons Attribution-Share Alike 3.0 Unported.
    </p>
  </div>

  Built with <a href="javascript:if(confirm('http://sphinx-doc.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://sphinx-doc.org/'" tppabs="http://sphinx-doc.org/">Sphinx</a> using a <a href="javascript:if(confirm('https://github.com/snide/sphinx_rtd_theme  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/snide/sphinx_rtd_theme'" tppabs="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="javascript:if(confirm('https://readthedocs.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://readthedocs.org/'" tppabs="https://readthedocs.org/">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="jquery.js" tppabs="http://symfony.cn/docs/_static/jquery.js"></script>
      <script type="text/javascript" src="underscore.js" tppabs="http://symfony.cn/docs/_static/underscore.js"></script>
      <script type="text/javascript" src="doctools.js" tppabs="http://symfony.cn/docs/_static/doctools.js"></script>
      <script type="text/javascript" src="translations.js" tppabs="http://symfony.cn/docs/_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="theme.js" tppabs="http://symfony.cn/docs/_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>