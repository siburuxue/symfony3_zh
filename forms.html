

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>è¡¨å• &mdash; Symfony Framework Documentation  æ–‡æ¡£</title>
  

  
  

  
  <link href="css-family=Lato-400,700,400italic,700italic-Roboto+Slab-400,700-Inconsolata-400,700&subset=latin,cyrillic.css" tppabs="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic" rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="theme.css" tppabs="http://symfony.cn/docs/_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="stylesheet" href="custom.css" tppabs="http://symfony.cn/docs/_static/custom.css" type="text/css" />
  
    <link rel="top" title="Symfony Framework Documentation  æ–‡æ¡£" href="../index.html"/>
        <link rel="up" title="æ•™ç¨‹" href="index.html"/>
        <link rel="next" title="å®‰å…¨æ€§" href="security.html"/>
        <link rel="prev" title="æ ¡éªŒ" href="validation.html"/> 

  
  <script src="modernizr.min.js" tppabs="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html" tppabs="http://symfony.cn/docs/index.html" class="fa fa-home"> Symfony Framework Documentation</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="http://symfony.cn/docs/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html" tppabs="http://symfony.cn/docs/changelog.html">The Documentation Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#february-2015" tppabs="http://symfony.cn/docs/changelog.html#february-2015">February, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#january-2015" tppabs="http://symfony.cn/docs/changelog.html#january-2015">January, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#december-2014" tppabs="http://symfony.cn/docs/changelog.html#december-2014">December, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#november-2014" tppabs="http://symfony.cn/docs/changelog.html#november-2014">November, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#october-2014" tppabs="http://symfony.cn/docs/changelog.html#october-2014">October, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#september-2014" tppabs="http://symfony.cn/docs/changelog.html#september-2014">September, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#august-2014" tppabs="http://symfony.cn/docs/changelog.html#august-2014">August, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#july-2014" tppabs="http://symfony.cn/docs/changelog.html#july-2014">July, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#june-2014" tppabs="http://symfony.cn/docs/changelog.html#june-2014">June, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#may-2014" tppabs="http://symfony.cn/docs/changelog.html#may-2014">May, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#april-2014" tppabs="http://symfony.cn/docs/changelog.html#april-2014">April, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#march-2014" tppabs="http://symfony.cn/docs/changelog.html#march-2014">March, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#february-2014" tppabs="http://symfony.cn/docs/changelog.html#february-2014">February, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#january-2014" tppabs="http://symfony.cn/docs/changelog.html#january-2014">January, 2014</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index-1.html" tppabs="http://symfony.cn/docs/quick_tour/index.html">å¿«é€Ÿå…¥é—¨</a><ul>
<li class="toctree-l2"><a class="reference internal" href="the_big_picture.html" tppabs="http://symfony.cn/docs/quick_tour/the_big_picture.html">æ€»è§ˆ</a></li>
<li class="toctree-l2"><a class="reference internal" href="the_view.html" tppabs="http://symfony.cn/docs/quick_tour/the_view.html">è§†å›¾</a></li>
<li class="toctree-l2"><a class="reference internal" href="the_controller.html" tppabs="http://symfony.cn/docs/quick_tour/the_controller.html">æ§åˆ¶å™¨ï¼ˆControllerï¼‰</a></li>
<li class="toctree-l2"><a class="reference internal" href="the_architecture.html" tppabs="http://symfony.cn/docs/quick_tour/the_architecture.html">ä»£ç ç»“æ„</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index-2.html" tppabs="http://symfony.cn/docs/book/index.html">æ•™ç¨‹</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="http_fundamentals.html" tppabs="http://symfony.cn/docs/book/http_fundamentals.html">Symfonyå’ŒHTTPåŸºç¡€å·¥å…·</a></li>
<li class="toctree-l2"><a class="reference internal" href="from_flat_php_to_symfony2.html" tppabs="http://symfony.cn/docs/book/from_flat_php_to_symfony2.html">Symfony vs çº¯PHP</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html" tppabs="http://symfony.cn/docs/book/installation.html">å®‰è£…å’Œé…ç½®Symfony</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_creation.html" tppabs="http://symfony.cn/docs/book/page_creation.html">åˆ›å»ºé¡µé¢</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller.html" tppabs="http://symfony.cn/docs/book/controller.html">æ§åˆ¶å™¨ï¼ˆControllerï¼‰</a></li>
<li class="toctree-l2"><a class="reference internal" href="routing.html" tppabs="http://symfony.cn/docs/book/routing.html">è·¯ç”±ï¼ˆRoutingï¼‰</a></li>
<li class="toctree-l2"><a class="reference internal" href="templating.html" tppabs="http://symfony.cn/docs/book/templating.html">åˆ›å»ºå’Œä½¿ç”¨æ¨¡æ¿</a></li>
<li class="toctree-l2"><a class="reference internal" href="doctrine.html" tppabs="http://symfony.cn/docs/book/doctrine.html">æ•°æ®åº“å’ŒDoctrine</a></li>
<li class="toctree-l2"><a class="reference internal" href="propel.html" tppabs="http://symfony.cn/docs/book/propel.html">æ•°æ®åº“å’ŒPropel</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html" tppabs="http://symfony.cn/docs/book/testing.html">æµ‹è¯•</a></li>
<li class="toctree-l2"><a class="reference internal" href="validation.html" tppabs="http://symfony.cn/docs/book/validation.html">æ ¡éªŒ</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">è¡¨å•</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html" tppabs="http://symfony.cn/docs/book/security.html">å®‰å…¨æ€§</a></li>
<li class="toctree-l2"><a class="reference internal" href="http_cache.html" tppabs="http://symfony.cn/docs/book/http_cache.html">HTTPç¼“å­˜</a></li>
<li class="toctree-l2"><a class="reference internal" href="translation.html" tppabs="http://symfony.cn/docs/book/translation.html">å¤šè¯­è¨€</a></li>
<li class="toctree-l2"><a class="reference internal" href="service_container.html" tppabs="http://symfony.cn/docs/book/service_container.html">æœåŠ¡å®¹å™¨ï¼ˆService Containerï¼‰</a></li>
<li class="toctree-l2"><a class="reference internal" href="performance.html" tppabs="http://symfony.cn/docs/book/performance.html">æ€§èƒ½</a></li>
<li class="toctree-l2"><a class="reference internal" href="internals.html" tppabs="http://symfony.cn/docs/book/internals.html">æ ¸å¿ƒåŠŸèƒ½</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index-3.html" tppabs="http://symfony.cn/docs/cookbook/index.html">æ‰‹å†Œ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index-4.html" tppabs="http://symfony.cn/docs/cookbook/assetic/index.html">é™æ€æ–‡ä»¶å¤„ç†ï¼ˆAsseticï¼‰</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-5.html" tppabs="http://symfony.cn/docs/cookbook/bundles/index.html">åŒ…ï¼ˆBundleï¼‰</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-6.html" tppabs="http://symfony.cn/docs/cookbook/cache/index.html">ç¼“å­˜</a></li>
<li class="toctree-l2"><a class="reference internal" href="composer.html" tppabs="http://symfony.cn/docs/cookbook/composer.html">Installing Composer</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-7.html" tppabs="http://symfony.cn/docs/cookbook/configuration/index.html">é…ç½®</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-8.html" tppabs="http://symfony.cn/docs/cookbook/console/index.html">å‘½ä»¤è¡Œ</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-9.html" tppabs="http://symfony.cn/docs/cookbook/controller/index.html">æ§åˆ¶å™¨ï¼ˆControllerï¼‰</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html" tppabs="http://symfony.cn/docs/cookbook/debugging.html">How to Optimize your Development Environment for Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-10.html" tppabs="http://symfony.cn/docs/cookbook/deployment/index.html">éƒ¨ç½²</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-11.html" tppabs="http://symfony.cn/docs/cookbook/doctrine/index.html">Doctrine</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-12.html" tppabs="http://symfony.cn/docs/cookbook/email/index.html">é‚®ä»¶</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-13.html" tppabs="http://symfony.cn/docs/cookbook/event_dispatcher/index.html">äº‹ä»¶åˆ†å‘å™¨ï¼ˆDispatcherï¼‰</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-14.html" tppabs="http://symfony.cn/docs/cookbook/expression/index.html">è¡¨è¾¾å¼ï¼ˆExpressionï¼‰</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-15.html" tppabs="http://symfony.cn/docs/cookbook/form/index.html">Form</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-16.html" tppabs="http://symfony.cn/docs/cookbook/logging/index.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-17.html" tppabs="http://symfony.cn/docs/cookbook/profiler/index.html">Profiler</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-18.html" tppabs="http://symfony.cn/docs/cookbook/request/index.html">Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-19.html" tppabs="http://symfony.cn/docs/cookbook/routing/index.html">Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-20.html" tppabs="http://symfony.cn/docs/cookbook/security/index.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="serializer.html" tppabs="http://symfony.cn/docs/cookbook/serializer.html">How to Use the Serializer</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-21.html" tppabs="http://symfony.cn/docs/cookbook/service_container/index.html">Service Container</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-22.html" tppabs="http://symfony.cn/docs/cookbook/session/index.html">Sessions</a></li>
<li class="toctree-l2"><a class="reference internal" href="symfony1.html" tppabs="http://symfony.cn/docs/cookbook/symfony1.html">How Symfony2 Differs from Symfony1</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-23.html" tppabs="http://symfony.cn/docs/cookbook/templating/index.html">Templating</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-24.html" tppabs="http://symfony.cn/docs/cookbook/testing/index.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrading.html" tppabs="http://symfony.cn/docs/cookbook/upgrading.html">How to Upgrade Your Symfony Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-25.html" tppabs="http://symfony.cn/docs/cookbook/validation/index.html">Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-26.html" tppabs="http://symfony.cn/docs/cookbook/web_server/index.html">Web Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-27.html" tppabs="http://symfony.cn/docs/cookbook/web_services/index.html">Web Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-28.html" tppabs="http://symfony.cn/docs/cookbook/workflow/index.html">Workflow</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index-29.html" tppabs="http://symfony.cn/docs/best_practices/index.html">æœ€ä½³å®è·µ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html" tppabs="http://symfony.cn/docs/best_practices/introduction.html">Symfonyæ¡†æ¶æœ€ä½³å®è·µ</a></li>
<li class="toctree-l2"><a class="reference internal" href="creating-the-project.html" tppabs="http://symfony.cn/docs/best_practices/creating-the-project.html">åˆ›å»ºé¡¹ç›®</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html" tppabs="http://symfony.cn/docs/best_practices/configuration.html">é…ç½®å‚æ•°</a></li>
<li class="toctree-l2"><a class="reference internal" href="business-logic.html" tppabs="http://symfony.cn/docs/best_practices/business-logic.html">ä¸šåŠ¡é€»è¾‘ä»£ç çš„ç»„ç»‡</a></li>
<li class="toctree-l2"><a class="reference internal" href="controllers.html" tppabs="http://symfony.cn/docs/best_practices/controllers.html">æ§åˆ¶å™¨ï¼ˆControllerï¼‰</a></li>
<li class="toctree-l2"><a class="reference internal" href="templates.html" tppabs="http://symfony.cn/docs/best_practices/templates.html">æ¨¡æ¿</a></li>
<li class="toctree-l2"><a class="reference internal" href="forms-1.html" tppabs="http://symfony.cn/docs/best_practices/forms.html">è¡¨å•</a></li>
<li class="toctree-l2"><a class="reference internal" href="i18n.html" tppabs="http://symfony.cn/docs/best_practices/i18n.html">å¤šè¯­è¨€æ”¯æŒ</a></li>
<li class="toctree-l2"><a class="reference internal" href="security-1.html" tppabs="http://symfony.cn/docs/best_practices/security.html">å®‰å…¨</a></li>
<li class="toctree-l2"><a class="reference internal" href="web-assets.html" tppabs="http://symfony.cn/docs/best_practices/web-assets.html">é™æ€æ–‡ä»¶ï¼ˆAssetsï¼‰</a></li>
<li class="toctree-l2"><a class="reference internal" href="tests.html" tppabs="http://symfony.cn/docs/best_practices/tests.html">æµ‹è¯•</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index-30.html" tppabs="http://symfony.cn/docs/components/index.html">ç»„ä»¶</a><ul>
<li class="toctree-l2"><a class="reference internal" href="using_components.html" tppabs="http://symfony.cn/docs/components/using_components.html">How to Install and Use the Symfony Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-31.html" tppabs="http://symfony.cn/docs/components/asset/index.html">Asset</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-32.html" tppabs="http://symfony.cn/docs/components/class_loader/index.html">ClassLoader</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-33.html" tppabs="http://symfony.cn/docs/components/config/index.html">Config</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-34.html" tppabs="http://symfony.cn/docs/components/console/index.html">Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="css_selector.html" tppabs="http://symfony.cn/docs/components/css_selector.html">The CssSelector Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-35.html" tppabs="http://symfony.cn/docs/components/debug/index.html">Debug</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-36.html" tppabs="http://symfony.cn/docs/components/dependency_injection/index.html">DependencyInjection</a></li>
<li class="toctree-l2"><a class="reference internal" href="dom_crawler.html" tppabs="http://symfony.cn/docs/components/dom_crawler.html">The DomCrawler Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-37.html" tppabs="http://symfony.cn/docs/components/event_dispatcher/index.html">EventDispatcher</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-38.html" tppabs="http://symfony.cn/docs/components/expression_language/index.html">Expression Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-39.html" tppabs="http://symfony.cn/docs/components/filesystem/index.html">Filesystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="finder.html" tppabs="http://symfony.cn/docs/components/finder.html">The Finder Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-40.html" tppabs="http://symfony.cn/docs/components/form/index.html">Form</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-41.html" tppabs="http://symfony.cn/docs/components/http_foundation/index.html">HttpFoundation</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-42.html" tppabs="http://symfony.cn/docs/components/http_kernel/index.html">HttpKernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="intl.html" tppabs="http://symfony.cn/docs/components/intl.html">The Intl Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="options_resolver.html" tppabs="http://symfony.cn/docs/components/options_resolver.html">The OptionsResolver Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="process.html" tppabs="http://symfony.cn/docs/components/process.html">The Process Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-43.html" tppabs="http://symfony.cn/docs/components/property_access/index.html">PropertyAccess</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-44.html" tppabs="http://symfony.cn/docs/components/routing/index.html">Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-45.html" tppabs="http://symfony.cn/docs/components/security/index.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="serializer-1.html" tppabs="http://symfony.cn/docs/components/serializer.html">The Serializer Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="stopwatch.html" tppabs="http://symfony.cn/docs/components/stopwatch.html">The Stopwatch Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-46.html" tppabs="http://symfony.cn/docs/components/templating/index.html">Templating</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-47.html" tppabs="http://symfony.cn/docs/components/translation/index.html">Translation</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-48.html" tppabs="http://symfony.cn/docs/components/var_dumper/index.html">VarDumper</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-49.html" tppabs="http://symfony.cn/docs/components/yaml/index.html">Yaml</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index-50.html" tppabs="http://symfony.cn/docs/reference/index.html">å‚è€ƒ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="framework.html" tppabs="http://symfony.cn/docs/reference/configuration/framework.html">FrameworkBundle Configuration (&#8220;framework&#8221;)</a></li>
<li class="toctree-l2"><a class="reference internal" href="doctrine-1.html" tppabs="http://symfony.cn/docs/reference/configuration/doctrine.html">DoctrineBundle Configuration (&#8220;doctrine&#8221;)</a></li>
<li class="toctree-l2"><a class="reference internal" href="security-2.html" tppabs="http://symfony.cn/docs/reference/configuration/security.html">SecurityBundle Configuration (&#8220;security&#8221;)</a></li>
<li class="toctree-l2"><a class="reference internal" href="assetic.html" tppabs="http://symfony.cn/docs/reference/configuration/assetic.html">AsseticBundle Configuration (&#8220;assetic&#8221;)</a></li>
<li class="toctree-l2"><a class="reference internal" href="swiftmailer.html" tppabs="http://symfony.cn/docs/reference/configuration/swiftmailer.html">SwiftmailerBundle Configuration (&#8220;swiftmailer&#8221;)</a></li>
<li class="toctree-l2"><a class="reference internal" href="twig.html" tppabs="http://symfony.cn/docs/reference/configuration/twig.html">TwigBundle Configuration (&#8220;twig&#8221;)</a></li>
<li class="toctree-l2"><a class="reference internal" href="monolog.html" tppabs="http://symfony.cn/docs/reference/configuration/monolog.html">MonologBundle Configuration (&#8220;monolog&#8221;)</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_profiler.html" tppabs="http://symfony.cn/docs/reference/configuration/web_profiler.html">WebProfilerBundle Configuration (&#8220;web_profiler&#8221;)</a></li>
<li class="toctree-l2"><a class="reference internal" href="kernel.html" tppabs="http://symfony.cn/docs/reference/configuration/kernel.html">Configuring in the Kernel (e.g. AppKernel)</a></li>
<li class="toctree-l2"><a class="reference internal" href="types.html" tppabs="http://symfony.cn/docs/reference/forms/types.html">Form Types Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="constraints.html" tppabs="http://symfony.cn/docs/reference/constraints.html">Validation Constraints Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="twig_reference.html" tppabs="http://symfony.cn/docs/reference/forms/twig_reference.html">Twig Template Form Function and Variable Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="twig_reference-1.html" tppabs="http://symfony.cn/docs/reference/twig_reference.html">Symfony Twig Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="dic_tags.html" tppabs="http://symfony.cn/docs/reference/dic_tags.html">The Dependency Injection Tags</a></li>
<li class="toctree-l2"><a class="reference internal" href="requirements.html" tppabs="http://symfony.cn/docs/reference/requirements.html">Requirements for Running Symfony</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index-51.html" tppabs="http://symfony.cn/docs/contributing/index.html">è´¡çŒ®</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index-52.html" tppabs="http://symfony.cn/docs/contributing/code/index.html">è´¡çŒ®ä»£ç </a></li>
<li class="toctree-l2"><a class="reference internal" href="index-53.html" tppabs="http://symfony.cn/docs/contributing/documentation/index.html">è´¡çŒ®æ–‡æ¡£</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-54.html" tppabs="http://symfony.cn/docs/contributing/community/index.html">ç¤¾åŒº</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html" tppabs="http://symfony.cn/docs/index.html">Symfony Framework Documentation</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html" tppabs="http://symfony.cn/docs/index.html">Docs</a> &raquo;</li>
      
          <li><a href="index-2.html" tppabs="http://symfony.cn/docs/book/index.html">æ•™ç¨‹</a> &raquo;</li>
      
    <li>è¡¨å•</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="forms.txt.htm" tppabs="http://symfony.cn/docs/_sources/book/forms.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="forms">
<span id="index-0"></span><h1>è¡¨å•<a class="headerlink" href="#forms" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h1>
<p>å¯¹å¼€å‘æ¥è¯´å¤„ç†HTMLè¡¨å•æ˜¯ä¸€ä¸ªå¸¸è§åˆå……æ»¡æŒ‘æˆ˜çš„ä»»åŠ¡ã€‚Symfonyæ•´åˆçš„çš„Formç»„ä»¶å°†å¤„ç†è¡¨å•å˜å¾—æ›´ç®€å•ã€‚è¿™ä¸€ç« ï¼Œä½ å°†ä»0å¼€å§‹åˆ›å»ºä¸€ä¸ªå¤æ‚çš„è¡¨å•ï¼Œå¹¶ä»è¿‡ç¨‹ä¸­å­¦åˆ°è®¸å¤šç‰›é€¼çš„åŠŸèƒ½ã€‚</p>
<div class="admonition note">
<p class="first admonition-title">æ³¨è§£</p>
<p class="last">Symfonyè¡¨å•ç»„ä»¶æ˜¯å¯ä»¥ç‹¬ç«‹äºæ¡†æ¶è€Œå•ç‹¬å­˜åœ¨çš„åº“ã€‚æƒ³è¦çŸ¥é“æ›´å¤šä¿¡æ¯è¯·ä¸ŠGitHubçœ‹ <a class="reference internal" href="introduction-3.html" tppabs="http://symfony.cn/docs/components/form/introduction.html"><em>Form component documentation</em></a></p>
</div>
<div class="section" id="creating-a-simple-form">
<span id="index-1"></span><h2>åˆ›å»ºä¸€ä¸ªç®€å•è¡¨å•<a class="headerlink" href="#creating-a-simple-form" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>å‡è®¾ä½ å½“å‰è¦å®ç°ä¸€ä¸ªä»»åŠ¡åˆ—è¡¨è¿™ä¹ˆä¸ªåŠŸèƒ½ï¼Œä½ çš„ç”¨æˆ·æ€»å¾—åˆ›å»ºæˆ–è€…ä¿®æ”¹ä»»åŠ¡å§ï¼Œæ‰€ä»¥ä½ å¾—åˆ›å»ºä¸ªè¡¨å•ã€‚ä¸è¿‡åœ¨ä½ å¼€å§‹ä¹‹å‰ï¼Œå…ˆæ¥çœ‹çœ‹ä»£è¡¨ä¸€ä¸ªä»»åŠ¡çš„ <code class="docutils literal"><span class="pre">Task</span></code> ç±»ã€‚</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/AppBundle/Entity/Task.php</span>
<span class="k">namespace</span> <span class="nx">AppBundle\Entity</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Task</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$task</span><span class="p">;</span>
    <span class="k">protected</span> <span class="nv">$dueDate</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getTask</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">task</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">setTask</span><span class="p">(</span><span class="nv">$task</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">task</span> <span class="o">=</span> <span class="nv">$task</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getDueDate</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">dueDate</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">setDueDate</span><span class="p">(</span><span class="nx">\DateTime</span> <span class="nv">$dueDate</span> <span class="o">=</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">dueDate</span> <span class="o">=</span> <span class="nv">$dueDate</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>è¿™å°±æ˜¯ä¸€ä¸ªå¹³æ·¡æ— å¥‡çš„ç»å…¸PHPå¯¹è±¡ï¼Œè·ŸSymfonyæˆ–è€…å…¶ä»–åº“éƒ½ä¸å è¾¹ã€‚è¿™å°±æ˜¯ä¸€ä¸ªä½ ç”¨æ¥è§£å†³æŸä¸€ä¸ªé—®é¢˜ï¼ˆè¡¨ç¤ºä¸€ä¸ªä»»åŠ¡å¯¹è±¡ï¼‰çš„æ™®é€šå¯¹è±¡è€Œå·²ã€‚ä¸è¿‡ç­‰åˆ°ä½ çœ‹å®Œè¿™ç« èŠ‚çš„æ—¶å€™ï¼Œä½ å°±çŸ¥é“æ€ä¹ˆæäº¤æ•°æ®åˆ° <code class="docutils literal"><span class="pre">Task</span></code> å¯¹è±¡é‡Œï¼ˆé€šè¿‡HTMLè¡¨å•ï¼‰ï¼Œæ ¡éªŒæ•°æ®çš„æ­£ç¡®æ€§ï¼Œè€Œä¸”è¿˜å°†å®ƒå­˜åˆ°æ•°æ®åº“é‡Œã€‚</p>
<div class="section" id="building-the-form">
<span id="index-2"></span><h3>é…ç½®è¡¨å•<a class="headerlink" href="#building-the-form" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>ç›®å‰æœ‰äº† <code class="docutils literal"><span class="pre">Task</span></code> ç±»ï¼Œä¸‹ä¸€æ­¥åˆ›å»ºHTMLè¡¨å•ã€‚åœ¨Symfonyé‡Œï¼Œè¿™ä¸€æ­¥å°†é€šè¿‡åˆ›å»ºä¸€ä¸ªè¡¨å•å¯¹è±¡åç„¶ååœ¨æ¨¡æ¿é‡Œæ¸²æŸ“å®ƒæ¥å®ç°ã€‚ç°åœ¨å¯ä»¥ç›´æ¥åœ¨Controlleré‡Œå®Œæˆ:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/AppBundle/Controller/DefaultController.php</span>
<span class="k">namespace</span> <span class="nx">AppBundle\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\Controller</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">AppBundle\Entity\Task</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Request</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">DefaultController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">newAction</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// create a task and give it some dummy data for this example</span>
        <span class="nv">$task</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Task</span><span class="p">();</span>
        <span class="nv">$task</span><span class="o">-&gt;</span><span class="na">setTask</span><span class="p">(</span><span class="s1">&#39;Write a blog post&#39;</span><span class="p">);</span>
        <span class="nv">$task</span><span class="o">-&gt;</span><span class="na">setDueDate</span><span class="p">(</span><span class="k">new</span> <span class="nx">\DateTime</span><span class="p">(</span><span class="s1">&#39;tomorrow&#39;</span><span class="p">));</span>

        <span class="nv">$form</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createFormBuilder</span><span class="p">(</span><span class="nv">$task</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;task&#39;</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;dueDate&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;save&#39;</span><span class="p">,</span> <span class="s1">&#39;submit&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;label&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Create Task&#39;</span><span class="p">))</span>
            <span class="o">-&gt;</span><span class="na">getForm</span><span class="p">();</span>

        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;default/new.html.twig&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;form&#39;</span> <span class="o">=&gt;</span> <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">createView</span><span class="p">(),</span>
        <span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">å°æŠ€å·§</p>
<p class="last">æ­¤ä¾‹å±•ç¤ºå¦‚ä½•åœ¨Controlleré‡Œç›´æ¥åˆ›å»ºformï¼Œæ¥ä¸‹æ¥åœ¨ â€œ <a class="reference internal" href="#book-form-creating-form-classes"><span>åˆ›å»ºè¡¨å•ç±»</span></a> â€ å°èŠ‚é‡Œæ‚¨å°†äº†è§£æ›´æ¨èæ›´æœ‰å¤ç”¨æ€§çš„æ–¹æ³•ï¼šåœ¨å•ç‹¬çš„ç±»é‡Œåˆ›å»ºè¡¨å•ã€‚</p>
</div>
<p>åˆ›å»ºè¡¨å•ä¸éœ€è¦å¤ªå¤šä»£ç å› ä¸ºSymfonyçš„â€œè¡¨å•åˆ›å»ºå™¨â€åšäº†åˆ›å»ºè¡¨å•å·¥ä½œã€‚è¡¨å•åˆ›å»ºå™¨çš„ç›®çš„å°±æ˜¯è®©ä½ æƒ³å†™â€œé£Ÿè°±â€ä¸€æ ·å®šä¹‰è¡¨å•ï¼Œç„¶åå°±æ²¡æœ‰ç„¶åäº†ï¼Œåˆ›å»ºå™¨æ¥åšå‰©ä¸‹çš„é‡æ´»å„¿ã€‚</p>
<p>åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œä½ åœ¨è¡¨å•ä¸­æ·»åŠ äº† <code class="docutils literal"><span class="pre">task</span></code> å’Œ <code class="docutils literal"><span class="pre">dueDate</span></code> ä¸¤ä¸ªå­—æ®µï¼Œæ­£å¥½å¯¹åº”äº† <code class="docutils literal"><span class="pre">Task</span></code> ç±»ç±»çš„ä¸¤ä¸ªå±æ€§ã€‚åŒæ—¶ä½ ä¹Ÿå®šä¹‰äº†ä¸¤ä¸ªå­—æ®µçš„æ˜¾ç¤ºç±»å‹ï¼ˆæ¯”å¦‚ <code class="docutils literal"><span class="pre">text</span></code>ï¼Œ<code class="docutils literal"><span class="pre">date</span></code>ï¼‰ï¼Œå†³å®šäº†è¯¥ç”¨ä»€ä¹ˆHTMLæ ‡ç­¾æ¥ç”Ÿæˆå­—æ®µã€‚</p>
<p>æœ€åï¼Œä½ æ·»åŠ å¥½äº†ä¸€ä¸ªçš„æäº¤æŒ‰é’®ï¼Œè¿˜æ˜¯è‡ªå®šä¹‰æŒ‰é’®æ–‡å­—çš„å‘¢ã€‚</p>
<div class="versionadded">
<p><span class="versionmodified">2.3 æ–°ç‰ˆåŠŸèƒ½: </span>ä»Symfony 2.3å¼€å§‹æ”¯æŒåˆ›å»ºæäº¤æŒ‰é’®ï¼Œä¹‹å‰çš„ç‰ˆæœ¬ä½ å¾—è‡ªå·±æ‰‹å†™HTMLä»£ç </p>
</div>
<p>Symfonyå†…ç½®è¶…å¤šå­—æ®µç±»å‹ï¼Œä¹‹åæˆ‘ä»¬ä¼šä»‹ç»ï¼ˆè¯·çœ‹ <a class="reference internal" href="#book-forms-type-reference"><span>å†…ç½®è¡¨å•å­—æ®µç±»å‹</span></a>ï¼‰ã€‚</p>
</div>
<div class="section" id="rendering-the-form">
<span id="index-3"></span><h3>ç”Ÿæˆè¡¨å•<a class="headerlink" href="#rendering-the-form" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>åˆ›å»ºå¥½è¡¨å•åè®©æˆ‘ä»¬æ¥å±•ç°å®ƒï¼Œæˆ‘ä»¬å°†ä¼ é€’è¡¨å•çš„â€œviewâ€å¯¹è±¡ç»™æ¨¡æ¿ï¼ˆæ³¨æ„ <code class="docutils literal"><span class="pre">$form-&gt;createView()</span></code> ï¼‰ç„¶åä½¿ç”¨formç›¸å…³çš„åŠ©æ‰‹å‡½æ•°ï¼š</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# app/Resources/views/default/new.html.twig #}</span>
<span class="cp">{{</span> <span class="nv">form_start</span><span class="o">(</span><span class="nv">form</span><span class="o">)</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">form_widget</span><span class="o">(</span><span class="nv">form</span><span class="o">)</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">form_end</span><span class="o">(</span><span class="nv">form</span><span class="o">)</span> <span class="cp">}}</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-html+php"><div class="highlight"><pre><span class="c">&lt;!-- app/Resources/views/default/new.html.php --&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">start</span><span class="p">(</span><span class="nv">$form</span><span class="p">)</span> <span class="cp">?&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">widget</span><span class="p">(</span><span class="nv">$form</span><span class="p">)</span> <span class="cp">?&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">end</span><span class="p">(</span><span class="nv">$form</span><span class="p">)</span> <span class="cp">?&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<img alt="../_images/form-simple.png" class="align-center" src="form-simple.png" tppabs="http://symfony.cn/docs/_images/form-simple.png" />
<div class="admonition note">
<p class="first admonition-title">æ³¨è§£</p>
<p class="last">ä¾‹å­é‡Œå‡è®¾ä½ é€šè¿‡â€œPOSTâ€å‘æŠŠè¡¨å•æäº¤åˆ°åŒä¸€ä¸ªURLä¸­ï¼Œä¹‹åä½ ä¼šäº†è§£å¦‚æœä¿®æ”¹formçš„actionå’Œmethodå±æ€§</p>
</div>
<p>ä¸‰è¡Œæå®šï¼</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">form_start(form)</span></code></dt>
<dd><p class="first last">æ˜¾ç¤ºformçš„å¼€å§‹tagï¼Œå¦‚æœ‰ä¸Šä¼ æ–‡ä»¶å­—æ®µè¿˜ä¼šåŒ…å«enctypeå±æ€§å“¦</p>
</dd>
<dt><code class="docutils literal"><span class="pre">form_widget(form)</span></code></dt>
<dd><p class="first last">æ˜¾ç¤ºæ‰€æœ‰çš„å­—æ®µï¼ŒåŒ…æ‹¬å­—æ®µæœ¬èº«å’Œlabelæ ‡ç­¾ï¼Œä»¥åŠé”™è¯¯ä¿¡æ¯</p>
</dd>
<dt><code class="docutils literal"><span class="pre">form_end(form)</span></code></dt>
<dd><p class="first last">æ˜¾ç¤ºè¡¨å•ç»“æŸçš„tagä»¥åŠæ‰€æœ‰è¡¨å•é‡Œæœ‰ï¼Œä½†æ˜¯ç›®å‰è¿˜æ²¡æœ‰è¢«æ˜¾ç¤ºçš„å­—æ®µã€‚è¿™ä¸ªåŠŸèƒ½è¶…çº§å¯¹äºæ˜¾ç¤ºéšè—å­—æ®µè¶…çº§å¥½ç”¨ï¼Œæ¯”å¦‚è¯´  <a class="reference internal" href="#forms-csrf"><span>CSRF Protection</span></a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="first admonition-title">å‚è§</p>
<p class="last">ç›®å‰è™½ç„¶ä»£ç ç®€å•ï¼Œä½†æ˜¯è¿˜ä¸å¤Ÿçµæ´»ã€‚ä¸€èˆ¬æ¥è¯´ä½ è¿˜æ˜¯éœ€è¦äº†è§£å¦‚ä½•å•ç‹¬æ˜¾ç¤ºæ¯ä¸€ä¸ªè¡¨å•å­—æ®µï¼Œæ¥å®Œå…¨æ§åˆ¶ä½ çš„è¡¨å•çš„æ ·å­ã€‚è¯·ç§»æ­¥â€œ <a class="reference internal" href="#form-rendering-template"><span>åœ¨æ¨¡æ¿é‡Œç”Ÿæˆè¡¨å•</span></a> â€äº†è§£</p>
</div>
<p>ç»§ç»­ä¹‹å‰ï¼Œæ³¨æ„ <code class="docutils literal"><span class="pre">task</span></code> è¾“å…¥æ¡†é‡Œçš„å€¼æ˜¯å¦‚ä½•ä» <code class="docutils literal"><span class="pre">$task</span></code> å¯¹è±¡é‡Œè·å–è¿‡æ¥çš„ã€‚formçš„ç¬¬ä¸€ä¸ªèŒè´£å°±æ˜¯ä»å¯¹è±¡å±æ€§é‡Œè·å–æ•°æ®ï¼Œå¹¶ä¸”ç»‘å®šåˆ°è¡¨å•å¯¹åº”çš„å­—æ®µçš„å€¼</p>
<div class="admonition tip">
<p class="first admonition-title">å°æŠ€å·§</p>
<p class="last">Formå¯ä»¥éå¸¸æœºåˆ¶åˆ°è¿ <code class="docutils literal"><span class="pre">getTask</span></code> å’Œ <code class="docutils literal"><span class="pre">setTask</span></code> æ–¹æ³•éƒ½è®¤å¾—ã€‚é™¤äº†`public`çš„å±æ€§ï¼Œå…¶ä»–çš„éƒ½éœ€è¦getterå’Œsetterï¼Œå¦åˆ™formä¸èƒ½è¯»å†™å±æ€§çš„æ•°æ®ã€‚å¦‚æœæ˜¯å¸ƒå°”ç±»å‹çš„ï¼Œä½ å¯ä»¥ç”¨isseræˆ–è€…hasserï¼Œæ¯”å¦‚è¯´ <code class="docutils literal"><span class="pre">isPublished()</span></code> æˆ–è€… <code class="docutils literal"><span class="pre">hasReminder()</span></code></p>
</div>
</div>
<div class="section" id="handling-form-submissions">
<span id="book-form-handling-form-submissions"></span><span id="index-4"></span><h3>è¡¨å•æäº¤çš„å¤„ç†<a class="headerlink" href="#handling-form-submissions" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>Formçš„ç¬¬äºŒèŒè´£æ˜¯å°†ç”¨æˆ·æäº¤æ•°æ®è½¬åŒ–å›å¯¹è±¡ï¼Œä¸ºæ­¤è¡¨å•éœ€å°†ç”¨æˆ·ç”¨æˆ·æäº¤æ•°æ®å†™å…¥è¡¨å¯¹è±¡ä¸­:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Request</span><span class="p">;</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">newAction</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// just setup a fresh $task object (remove the dummy data)</span>
    <span class="nv">$task</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Task</span><span class="p">();</span>

    <span class="nv">$form</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createFormBuilder</span><span class="p">(</span><span class="nv">$task</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;task&#39;</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;dueDate&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;save&#39;</span><span class="p">,</span> <span class="s1">&#39;submit&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;label&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Create Task&#39;</span><span class="p">))</span>
        <span class="o">-&gt;</span><span class="na">getForm</span><span class="p">();</span>

    <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">handleRequest</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$form</span><span class="o">-&gt;</span><span class="na">isValid</span><span class="p">())</span> <span class="p">{</span>
        <span class="c1">// perform some action, such as saving the task to the database</span>

        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirectToRoute</span><span class="p">(</span><span class="s1">&#39;task_success&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">2.3 æ–°ç‰ˆåŠŸèƒ½: </span>ä»Symfony 2.3å¼€å§‹å¼•å…¥ <code class="docutils literal"><a class="reference external" href="javascript:if(confirm('http://api.symfony.com/master/Symfony/Component/Form/FormInterface.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://api.symfony.com/master/Symfony/Component/Form/FormInterface.html#method_handleRequest'" tppabs="http://api.symfony.com/master/Symfony/Component/Form/FormInterface.html#method_handleRequest" title="Symfony\Component\Form\FormInterface::handleRequest()"><span class="pre">handleRequest()</span></a></code> æ–¹æ³•ä¹‹å‰éœ€è¦å°† <code class="docutils literal"><span class="pre">$request</span></code> ä¼ å…¥ <code class="docutils literal"><span class="pre">submit</span></code> æ–¹æ³•ï¼Œå¦‚ä»Šå·²ä¸æ¨èï¼Œå¹¶ä¸”Symfony 3.0é‡Œä¼šå®Œå…¨å»æ‰æ­¤æ–¹æ³•ã€‚è¯·ç§»æ­¥ <a class="reference internal" href="direct_submit.html#cookbook-form-submit-request" tppabs="http://symfony.cn/docs/cookbook/form/direct_submit.html#cookbook-form-submit-request"><span>Passing a Request to Form::submit() (Deprecated)</span></a> æŸ¥çœ‹æ›´å¤šä¿¡æ¯ã€‚</p>
</div>
<p>æ­¤æ§åˆ¶å™¨å±•ç°äº†é™¤äº†è¡¨å•çš„å¸¸è§æ€è·¯ï¼ŒåŒ…å«3ä¸­æ–¹å¼ï¼š</p>
<ol class="arabic">
<li><p class="first">å½“é¡µé¢è¢«è½½å…¥æ—¶ï¼Œè¡¨å•åªæ˜¯è¢«åˆ›å»ºç„¶åè¢«æ˜¾ç¤ºã€‚ <code class="docutils literal"><a class="reference external" href="javascript:if(confirm('http://api.symfony.com/master/Symfony/Component/Form/FormInterface.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://api.symfony.com/master/Symfony/Component/Form/FormInterface.html#method_handleRequest'" tppabs="http://api.symfony.com/master/Symfony/Component/Form/FormInterface.html#method_handleRequest" title="Symfony\Component\Form\FormInterface::handleRequest()"><span class="pre">handleRequest()</span></a></code> æ–¹æ³•èƒ½æ„ŸçŸ¥è¡¨å•æ²¡æœ‰è¢«æäº¤ï¼Œç„¶åç›´æ¥è®© <code class="docutils literal"><a class="reference external" href="javascript:if(confirm('http://api.symfony.com/master/Symfony/Component/Form/FormInterface.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://api.symfony.com/master/Symfony/Component/Form/FormInterface.html#method_isValid'" tppabs="http://api.symfony.com/master/Symfony/Component/Form/FormInterface.html#method_isValid" title="Symfony\Component\Form\FormInterface::isValid()"><span class="pre">isValid()</span></a></code> è¿”å› <code class="docutils literal"><span class="pre">false</span></code></p>
</li>
<li><p class="first">å¦‚æœç”¨æˆ·æäº¤è¡¨å•ï¼Œ <code class="docutils literal"><a class="reference external" href="javascript:if(confirm('http://api.symfony.com/master/Symfony/Component/Form/FormInterface.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://api.symfony.com/master/Symfony/Component/Form/FormInterface.html#method_handleRequest'" tppabs="http://api.symfony.com/master/Symfony/Component/Form/FormInterface.html#method_handleRequest" title="Symfony\Component\Form\FormInterface::handleRequest()"><span class="pre">handleRequest()</span></a></code> ä¹Ÿèƒ½æ„ŸçŸ¥åˆ°ï¼Œç„¶åç«‹é©¬æŠŠæäº¤çš„æ•°æ®è½¬æ¢æˆ <code class="docutils literal"><span class="pre">$task</span></code> å¯¹è±¡ <code class="docutils literal"><span class="pre">task</span></code> å’Œ <code class="docutils literal"><span class="pre">dueDate</span></code> å±æ€§çš„å€¼ã€‚å½“ç„¶å¦‚æœæ•°æ®æ ¡éªŒå‡ºé—®é¢˜äº†ï¼ˆæ•°æ®æ ¡éªŒå°†åœ¨ä¸‹ä¸€å°èŠ‚ä»‹ç»ï¼‰ <code class="docutils literal"><a class="reference external" href="javascript:if(confirm('http://api.symfony.com/master/Symfony/Component/Form/FormInterface.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://api.symfony.com/master/Symfony/Component/Form/FormInterface.html#method_isValid'" tppabs="http://api.symfony.com/master/Symfony/Component/Form/FormInterface.html#method_isValid" title="Symfony\Component\Form\FormInterface::isValid()"><span class="pre">isValid()</span></a></code> æ–¹æ³•ä¹Ÿä¼šè¿”å› <code class="docutils literal"><span class="pre">false</span></code> ï¼Œç„¶åè¡¨å•å°†é‡æ–°ä¼ ç»™æ¨¡æ¿é‡æ–°æ˜¾ç¤ºï¼Œå¹¶ä¸”åŒ…å«äº†æ‰€æœ‰é”™è¯¯ä¿¡æ¯ã€‚</p>
<div class="admonition note">
<p class="first admonition-title">æ³¨è§£</p>
<p class="last">ä½ å¯ä»¥ä½¿ç”¨ <code class="docutils literal"><a class="reference external" href="javascript:if(confirm('http://api.symfony.com/master/Symfony/Component/Form/FormInterface.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://api.symfony.com/master/Symfony/Component/Form/FormInterface.html#method_isSubmitted'" tppabs="http://api.symfony.com/master/Symfony/Component/Form/FormInterface.html#method_isSubmitted" title="Symfony\Component\Form\FormInterface::isSubmitted()"><span class="pre">isSubmitted()</span></a></code> æ¥æ£€æŸ¥è¡¨å•æ˜¯å¦è¢«æäº¤ï¼Œæ— è®ºè¡¨å•èƒ½å¦é€šè¿‡æ ¡éªŒã€‚</p>
</div>
</li>
<li><p class="first">å¦‚æœç”¨æˆ·å†æ¬¡æäº¤è¡¨å•ä¿¡æ¯ï¼Œæäº¤çš„æ•°æ®ä¹Ÿåœ¨æ­¤å†™å…¥è¡¨å•å¯¹è±¡ä¸­ï¼Œå¦‚æœè¿™æ¬¡é€šè¿‡äº†æ ¡éªŒï¼Œé‚£ä¹ˆ <code class="docutils literal"><span class="pre">isValid</span></code> ä¼šè¿”å› <code class="docutils literal"><span class="pre">true</span></code> äº†ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥é€šè¿‡ <code class="docutils literal"><span class="pre">$task</span></code> å¯¹è±¡åœ¨è·³è½¬åˆ°â€œæäº¤æˆåŠŸâ€é¡µä¹‹å‰åšä¸€äº›äº‹æƒ…ï¼ˆæ¯”å¦‚å­˜ä¸ªåº“å•¥çš„ï¼‰</p>
<div class="admonition note">
<p class="first admonition-title">æ³¨è§£</p>
<p class="last">è¡¨å•æˆåŠŸæäº¤è·³è½¬åˆ°å…¶ä»–é¡µé¢æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯é˜²æ­¢ç”¨æˆ·ç‚¹å‡»â€œåˆ·æ–°â€æŒ‰é’®é‡å¤æäº¤æ•°æ®</p>
</div>
</li>
</ol>
<div class="admonition seealso">
<p class="first admonition-title">å‚è§</p>
<p class="last">å¦‚æœä½ æƒ³æ§åˆ¶è¡¨å•åœ¨ä»€ä¹ˆæ—¶å€™æäº¤ï¼Œä»¥åŠæäº¤ä»€ä¹ˆæ•°æ®åˆ°è¡¨å•å¯¹è±¡ï¼Œè¯·é˜…è¯» <code class="docutils literal"><a class="reference external" href="javascript:if(confirm('http://api.symfony.com/master/Symfony/Component/Form/FormInterface.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://api.symfony.com/master/Symfony/Component/Form/FormInterface.html#method_submit'" tppabs="http://api.symfony.com/master/Symfony/Component/Form/FormInterface.html#method_submit" title="Symfony\Component\Form\FormInterface::submit()"><span class="pre">submit()</span></a></code>  ä»¥åŠ <a class="reference internal" href="direct_submit.html#cookbook-form-call-submit-directly" tppabs="http://symfony.cn/docs/cookbook/form/direct_submit.html#cookbook-form-call-submit-directly"><span>in the cookbook</span></a> ã€‚</p>
</div>
</div>
<div class="section" id="submitting-forms-with-multiple-buttons">
<span id="book-form-submitting-multiple-buttons"></span><span id="index-5"></span><h3>å¤šæŒ‰é’®è¡¨å•<a class="headerlink" href="#submitting-forms-with-multiple-buttons" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">2.3 æ–°ç‰ˆåŠŸèƒ½: </span>ä»Symfony 2.3å¼€å§‹æ”¯æŒå¤šæŒ‰é’®è¡¨å•</p>
</div>
<p>å¦‚æœä½ çš„è¡¨å•åŒ…å«ä¸æ­¢ä¸€ä¸ªæŒ‰é’®ï¼Œè€Œä¸”ä½ åˆæƒ³çŸ¥é“å“ªä¸€ä¸ªæŒ‰é’®è¢«ç‚¹äº†ï¼Œä½ å¯ä»¥è¿™æ ·:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$form</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createFormBuilder</span><span class="p">(</span><span class="nv">$task</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;task&#39;</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;dueDate&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;save&#39;</span><span class="p">,</span> <span class="s1">&#39;submit&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;label&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Create Task&#39;</span><span class="p">))</span>
    <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;saveAndAdd&#39;</span><span class="p">,</span> <span class="s1">&#39;submit&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;label&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Save and Add&#39;</span><span class="p">))</span>
    <span class="o">-&gt;</span><span class="na">getForm</span><span class="p">();</span>
</pre></div>
</div>
<p>åœ¨ä½ çš„Controlleré‡Œä½¿ç”¨ <code class="docutils literal"><a class="reference external" href="javascript:if(confirm('http://api.symfony.com/master/Symfony/Component/Form/ClickableInterface.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://api.symfony.com/master/Symfony/Component/Form/ClickableInterface.html#method_isClicked'" tppabs="http://api.symfony.com/master/Symfony/Component/Form/ClickableInterface.html#method_isClicked" title="Symfony\Component\Form\ClickableInterface::isClicked()"><span class="pre">isClicked()</span></a></code> æ–¹æ³•æ¥åˆ¤æ–­â€œSave and addâ€æŒ‰é’®æ˜¯ä¸æ˜¯è¢«ç‚¹å‡»è¿‡:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="nv">$form</span><span class="o">-&gt;</span><span class="na">isValid</span><span class="p">())</span> <span class="p">{</span>
    <span class="c1">// ... perform some action, such as saving the task to the database</span>

    <span class="nv">$nextAction</span> <span class="o">=</span> <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;saveAndAdd&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">isClicked</span><span class="p">()</span>
        <span class="o">?</span> <span class="s1">&#39;task_new&#39;</span>
        <span class="o">:</span> <span class="s1">&#39;task_success&#39;</span><span class="p">;</span>

    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirectToRoute</span><span class="p">(</span><span class="nv">$nextAction</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="form-validation">
<span id="book-forms-form-validation"></span><span id="index-6"></span><h2>è¡¨å•éªŒè¯<a class="headerlink" href="#form-validation" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>åœ¨ä¹‹å‰çš„å°èŠ‚é‡Œï¼Œä½ äº†è§£åˆ°äº†ç”¨æˆ·ä¼šæäº¤åˆæ³•å’Œéæ³•çš„æ•°æ®ã€‚åœ¨Symfonyæ¡†æ¶é‡Œï¼Œæ•°æ®æ ¡éªŒæ˜¯é…ç½®åœ¨å¯¹è±¡ä¸Šé¢çš„ï¼Œï¼ˆæ¯”å¦‚ <code class="docutils literal"><span class="pre">Task</span></code> ï¼‰ã€‚æ¢å¥è¯è¯´ï¼Œä¸æ˜¯éªŒè¯ä½ çš„â€œè¡¨å•â€æ•°æ®ï¼Œè€Œæ˜¯éªŒè¯ä½ çš„ <code class="docutils literal"><span class="pre">$task</span></code> å¯¹è±¡æ˜¯ä¸æ˜¯åˆæ³•çš„ã€‚ <code class="docutils literal"><span class="pre">$form-&gt;isValid()</span></code> ä¹Ÿåªæ˜¯ä¸€ä¸ªåˆ¤æ–­ <code class="docutils literal"><span class="pre">$task</span></code> å¯¹è±¡æ˜¯å¦æ˜¯åˆæ³•å¯¹è±¡çš„å¿«æ·æ–¹å¼è€Œå·²ã€‚</p>
<p>æ ¡éªŒæ˜¯é€šè¿‡æ·»åŠ ä¸€ç»„è§„åˆ™ï¼ˆç§°ä¹‹ä¸ºæ ¡éªŒè§„åˆ™ï¼‰åˆ°ç±»ä¸Šå®ç°çš„ã€‚ä¸ºäº†æ¼”ç¤ºç”¨æ³•ï¼Œæ·»åŠ ä¸€äº›æ£€éªŒè§„åˆ™ï¼Œè®© <code class="docutils literal"><span class="pre">task</span></code> å±æ€§ä¸èƒ½ä¸ºç©ºï¼Œè®© <code class="docutils literal"><span class="pre">dueDate</span></code> å±æ€§ä¹Ÿä¸èƒ½ä¸ºç©ºï¼Œå¹¶ä¸”è¿˜å¿…é¡»æ˜¯ä¸ªåˆæ³•çš„æ—¶é—´å¯¹è±¡ã€‚</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># AppBundle/Resources/config/validation.yml</span>
<span class="l-Scalar-Plain">AppBundle\Entity\Task</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">properties</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">task</span><span class="p-Indicator">:</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">NotBlank</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">~</span>
        <span class="l-Scalar-Plain">dueDate</span><span class="p-Indicator">:</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">NotBlank</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">~</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">Type</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">\DateTime</span>
</pre></div>
</div>
</li>
<li><em>Annotations</em><div class="highlight-php-annotations"><div class="highlight"><pre><span class="c1">// AppBundle/Entity/Task.php</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Task</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Assert\NotBlank()</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="nv">$task</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * @Assert\NotBlank()</span>
<span class="sd">     * @Assert\Type(&quot;\DateTime&quot;)</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="nv">$dueDate</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- AppBundle/Resources/config/validation.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;constraint-mapping</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping</span>
<span class="s">        http://symfony.com/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">&quot;AppBundle\Entity\Task&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;task&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;NotBlank&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;dueDate&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;NotBlank&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;Type&quot;</span><span class="nt">&gt;</span>\DateTime<span class="nt">&lt;/constraint&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/constraint-mapping&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// AppBundle/Entity/Task.php</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Mapping\ClassMetadata</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints\NotBlank</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints\Type</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Task</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">loadValidatorMetadata</span><span class="p">(</span><span class="nx">ClassMetadata</span> <span class="nv">$metadata</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$metadata</span><span class="o">-&gt;</span><span class="na">addPropertyConstraint</span><span class="p">(</span><span class="s1">&#39;task&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">NotBlank</span><span class="p">());</span>

        <span class="nv">$metadata</span><span class="o">-&gt;</span><span class="na">addPropertyConstraint</span><span class="p">(</span><span class="s1">&#39;dueDate&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">NotBlank</span><span class="p">());</span>
        <span class="nv">$metadata</span><span class="o">-&gt;</span><span class="na">addPropertyConstraint</span><span class="p">(</span>
            <span class="s1">&#39;dueDate&#39;</span><span class="p">,</span>
            <span class="k">new</span> <span class="nx">Type</span><span class="p">(</span><span class="s1">&#39;\DateTime&#39;</span><span class="p">)</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>æå®šï¼å¦‚æœä½ é‡æ–°æäº¤éæ³•æ•°æ®ï¼Œä½ ä¼šåœ¨è¡¨å•ä¸Šçœ‹åˆ°é”™è¯¯æç¤ºã€‚</p>
<div class="sidebar" id="book-forms-html5-validation-disable">
<p class="first sidebar-title">HTML5 éªŒè¯</p>
<p>å¯¹äºHTML5æ¥è¯´ï¼Œè®¸å¤šæµè§ˆå™¨å·²ç»å®ç°äº†åœ¨å®¢æˆ·ç«¯åšæœ¬åœ°æ ¡éªŒã€‚æœ€å¸¸è§çš„å°±æ˜¯åœ¨è¡¨å•å­—æ®µä¸Šæ·»åŠ  <code class="docutils literal"><span class="pre">required</span></code> å±æ€§ã€‚åªè¦æµè§ˆå™¨æ”¯æŒæ­¤HTML5æ–°å±æ€§ï¼Œå°±ä¼šæç¤ºä½ å¿…é¡»è¾“å…¥æ­¤å­—æ®µæ‰èƒ½æäº¤ã€‚</p>
<p>è™½ç„¶åœ¨å®¢æˆ·ç«¯é€šè¿‡HTMLä¹Ÿå¯ä»¥æ·»åŠ æ ¡éªŒäº†ï¼Œä½†æœ‰æ—¶ä½ ä¹Ÿè®¸è¦æŠŠå®¢æˆ·ç«¯çš„æ ¡éªŒå…³é—­ï¼Œæ¯”å¦‚è¯´åœ¨æµ‹è¯•æœåŠ¡å™¨ç«¯çš„æ ¡éªŒåŠŸèƒ½çš„æ—¶å€™ã€‚æ­¤æ—¶éœ€è¦ç»™formæ ‡ç­¾æ·»åŠ  <code class="docutils literal"><span class="pre">novalidate</span></code> å±æ€§ï¼Œæˆ–è€…åœ¨æäº¤æŒ‰é’®ä¸Šæ·»åŠ  <code class="docutils literal"><span class="pre">formnovalidate</span></code> å±æ€§ã€‚</p>
<div class="last configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# app/Resources/views/default/new.html.twig #}</span>
<span class="cp">{{</span> <span class="nv">form</span><span class="o">(</span><span class="nv">form</span><span class="o">,</span> <span class="o">{</span><span class="s1">&#39;attr&#39;</span><span class="o">:</span> <span class="o">{</span><span class="s1">&#39;novalidate&#39;</span><span class="o">:</span> <span class="s1">&#39;novalidate&#39;</span><span class="cp">}}</span>) }}
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-html+php"><div class="highlight"><pre><span class="c">&lt;!-- app/Resources/views/default/new.html.php --&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">form</span><span class="p">(</span><span class="nv">$form</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;attr&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;novalidate&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;novalidate&#39;</span><span class="p">),</span>
<span class="p">))</span> <span class="cp">?&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<p>æ ¡éªŒæ˜¯ä¸€ä¸ªéå¸¸ç‰›é€¼çš„åŠŸèƒ½ï¼Œä»–æœ‰å•ç‹¬çš„ç« èŠ‚ä»‹ç»ï¼š <a class="reference internal" href="validation.html" tppabs="http://symfony.cn/docs/book/validation.html"><em>dedicated chapter</em></a></p>
<div class="section" id="validation-groups">
<span id="book-forms-validation-groups"></span><span id="index-7"></span><h3>éªŒè¯è§„åˆ™ç»„<a class="headerlink" href="#validation-groups" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>å¦‚æœä½ çš„å¯¹è±¡ä½¿ç”¨äº† <a class="reference internal" href="validation.html#book-validation-validation-groups" tppabs="http://symfony.cn/docs/book/validation.html#book-validation-validation-groups"><span>validation groups</span></a> ï¼Œä½ å°†åœ¨è¡¨å•é‡Œè®¾ç½®éœ€è¦ä½¿ç”¨å“ªä¸ªæ ¡éªŒç»„æ¥æ ¡éªŒã€‚</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$form</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createFormBuilder</span><span class="p">(</span><span class="nv">$users</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;validation_groups&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;registration&#39;</span><span class="p">),</span>
<span class="p">))</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="o">...</span><span class="p">);</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">2.7 æ–°ç‰ˆåŠŸèƒ½: </span><code class="docutils literal"><span class="pre">configureOptions()</span></code> æ–¹æ³•æ˜¯åœ¨Symfony 2.7é‡ŒåŠ å…¥çš„ï¼Œä¹‹å‰å¾—ç”¨ <code class="docutils literal"><span class="pre">setDefaultOptions()</span></code> æ–¹æ³•ã€‚</p>
</div>
<p>å¦‚æœä½ æ­£åˆ›å»º <a class="reference internal" href="#book-form-creating-form-classes"><span>form classes</span></a> ï¼ˆè¿™æ˜¯æœ€ä½³å®è·µï¼‰ï¼Œä½ éœ€è¦æ·»åŠ ä»¥ä¸‹ä»£ç åˆ° <code class="docutils literal"><span class="pre">configureOptions()</span></code> æ–¹æ³•:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\OptionsResolver\OptionsResolver</span><span class="p">;</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">configureOptions</span><span class="p">(</span><span class="nx">OptionsResolver</span> <span class="nv">$resolver</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$resolver</span><span class="o">-&gt;</span><span class="na">setDefaults</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;validation_groups&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;registration&#39;</span><span class="p">),</span>
    <span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œ <em>åªæœ‰</em> <code class="docutils literal"><span class="pre">registration</span></code> æ ¡éªŒç»„ä¼šè¢«ä½¿ç”¨ã€‚</p>
</div>
<div class="section" id="disabling-validation">
<span id="index-8"></span><h3>å…³é—­éªŒè¯åŠŸèƒ½<a class="headerlink" href="#disabling-validation" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">2.3 æ–°ç‰ˆåŠŸèƒ½: </span>å…³é—­ <code class="docutils literal"><span class="pre">validation_groups</span></code> çš„åŠŸèƒ½äºSymfony 2.3æ—¶åŠ å…¥ã€‚</p>
</div>
<p>æœ‰æ—¶ä½ éœ€è¦å¿½ç•¥æ ¡éªŒï¼Œæ­¤æ—¶ä½ å¯ä»¥è®¾ç½® <code class="docutils literal"><span class="pre">validation_groups</span></code> é€‰é¡¹ä¸º <code class="docutils literal"><span class="pre">false</span></code>:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\OptionsResolver\OptionsResolver</span><span class="p">;</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">configureOptions</span><span class="p">(</span><span class="nx">OptionsResolver</span> <span class="nv">$resolver</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$resolver</span><span class="o">-&gt;</span><span class="na">setDefaults</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;validation_groups&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
    <span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>æ³¨æ„ä¸€ç‚¹å¦‚æœä½ è¿™ä¹ˆè®¾ç½®åï¼Œè¡¨å•ä¾ç„¶ä¼šè·‘ä¸€äº›åŸºç¡€æ£€æŸ¥ã€‚æ¯”å¦‚æäº¤æ–‡ä»¶æ˜¯å¦å¤ªå¤§ï¼Œæˆ–è€…ä¸€äº›å¿…å¡«é¡¹æ²¡å¡«ã€‚å¦‚æœä½ æƒ³å®Œå…¨å¿½ç•¥ä»»ä½•æ£€æŸ¥ï¼Œä½ å¯ä»¥ä½¿ç”¨ <a class="reference internal" href="dynamic_form_modification.html#cookbook-dynamic-form-modification-suppressing-form-validation" tppabs="http://symfony.cn/docs/cookbook/form/dynamic_form_modification.html#cookbook-dynamic-form-modification-suppressing-form-validation"><span>POST_SUBMIT event</span></a> ã€‚</p>
</div>
<div class="section" id="groups-based-on-the-submitted-data">
<span id="book-form-validation-groups"></span><span id="index-9"></span><h3>åŸºäºæäº¤æ•°æ®çš„éªŒè¯è§„åˆ™åˆ†ç»„<a class="headerlink" href="#groups-based-on-the-submitted-data" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>å¦‚æœä½ ç¨‹åºè¦ä¸€äº›é€»è¾‘æ¥å†³å®šä½¿ç”¨ä»€ä¹ˆæ ¡éªŒç»„ï¼ˆæ¯”å¦‚é€šè¿‡æäº¤çš„æ•°æ®ï¼‰ï¼Œä½ å¯ä»¥é€šè¿‡ç»™ <code class="docutils literal"><span class="pre">validation_groups</span></code> æŒ‡å®šå›è°ƒå‡½æ•°çš„æ–¹å¼å®ç°ã€‚</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\OptionsResolver\OptionsResolver</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">configureOptions</span><span class="p">(</span><span class="nx">OptionsResolver</span> <span class="nv">$resolver</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$resolver</span><span class="o">-&gt;</span><span class="na">setDefaults</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;validation_groups&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;AppBundle\Entity\Client&#39;</span><span class="p">,</span>
            <span class="s1">&#39;determineValidationGroups&#39;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>åœ¨è¡¨å•æäº¤åï¼Œè¿›è¡Œæ ¡éªŒå‰ï¼Œ <code class="docutils literal"><span class="pre">Client</span></code> ç±»çš„ <code class="docutils literal"><span class="pre">determinValidationGroups()</span></code> æ–¹æ³•å°†ä¼šè¢«è°ƒç”¨ã€‚è¡¨å•å¯¹è±¡å°†è¢«ä½œä¸ºä¸€ä¸ªå‚æ•°ï¼ˆè¯·çœ‹ä¸‹ä¸€ä¸ªä¾‹å­ï¼‰è¢«ä¼ å¦‚è¯¥æ–¹æ³•ã€‚ä½ ä¹Ÿå¯ä»¥ç›´æ¥ä¼ å…¥åŒ¿åæ–¹æ³•ã€‚</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Acme\AcmeBundle\Entity\Client</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Form\FormInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\OptionsResolver\OptionsResolver</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">configureOptions</span><span class="p">(</span><span class="nx">OptionsResolver</span> <span class="nv">$resolver</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$resolver</span><span class="o">-&gt;</span><span class="na">setDefaults</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;validation_groups&#39;</span> <span class="o">=&gt;</span> <span class="k">function</span><span class="p">(</span><span class="nx">FormInterface</span> <span class="nv">$form</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$data</span> <span class="o">=</span> <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">getData</span><span class="p">();</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">Client</span><span class="o">::</span><span class="na">TYPE_PERSON</span> <span class="o">==</span> <span class="nv">$data</span><span class="o">-&gt;</span><span class="na">getType</span><span class="p">())</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;person&#39;</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;company&#39;</span><span class="p">);</span>
        <span class="p">},</span>
    <span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>ä½¿ç”¨ <code class="docutils literal"><span class="pre">validation_groups</span></code> å‚æ•°æ¥é‡è½½é»˜è®¤çš„æ ¡éªŒç»„ã€‚å¦‚æœä½ ä¹Ÿå¸Œæœ›ä½¿ç”¨é»˜è®¤çš„æ ¡éªŒè§„åˆ™ï¼Œä½ éœ€è¦è°ƒæ•´ä¸€äº›é€‰é¡¹:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Acme\AcmeBundle\Entity\Client</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Form\FormInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\OptionsResolver\OptionsResolver</span><span class="p">;</span>

<span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">configureOptions</span><span class="p">(</span><span class="nx">OptionsResolver</span> <span class="nv">$resolver</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$resolver</span><span class="o">-&gt;</span><span class="na">setDefaults</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;validation_groups&#39;</span> <span class="o">=&gt;</span> <span class="k">function</span><span class="p">(</span><span class="nx">FormInterface</span> <span class="nv">$form</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$data</span> <span class="o">=</span> <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">getData</span><span class="p">();</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">Client</span><span class="o">::</span><span class="na">TYPE_PERSON</span> <span class="o">==</span> <span class="nv">$data</span><span class="o">-&gt;</span><span class="na">getType</span><span class="p">())</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Default&#39;</span><span class="p">,</span> <span class="s1">&#39;person&#39;</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Default&#39;</span><span class="p">,</span> <span class="s1">&#39;company&#39;</span><span class="p">);</span>
        <span class="p">},</span>
    <span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>ä½ å¯ä»¥æ‰¾åˆ°æ›´å¤šçš„å…³äºæ ¡éªŒç»„ä»¥åŠé»˜è®¤æ ¡éªŒçš„ä¿¡æ¯åœ¨  <a class="reference internal" href="validation.html#book-validation-validation-groups" tppabs="http://symfony.cn/docs/book/validation.html#book-validation-validation-groups"><span>validation groups</span></a></p>
</div>
<div class="section" id="groups-based-on-the-clicked-button">
<span id="index-10"></span><h3>åŸºäºæäº¤æŒ‰é’®çš„éªŒè¯è§„åˆ™åˆ†ç»„<a class="headerlink" href="#groups-based-on-the-clicked-button" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">2.3 æ–°ç‰ˆåŠŸèƒ½: </span>ä»Symfony 2.3å¼€å§‹æ”¯æŒå¤šæŒ‰é’®è¡¨å•</p>
</div>
<p>å¦‚æœè¡¨å•åŒ…å«ä¸æ­¢ä¸€ä¸ªæäº¤æŒ‰é’®ï¼Œä½ å¯ä»¥é€šè¿‡æŒ‰é’®æ¥å†³å®šæ ¡éªŒç»„ã€‚æ¯”å¦‚è¯´æœ‰äº›å¸¦æ­¥éª¤çš„è¡¨å•ï¼Œå¯èƒ½æä¾›ä¸Šä¸€æ­¥æŒ‰é’®ï¼Œå¦‚æœä¸Šä¸€æ­¥æŒ‰é’®è¢«ç‚¹å‡»ï¼Œå°±ä¸åº”è¯¥ä½¿ç”¨æ ¡éªŒï¼Œä½†æ˜¯æ•°æ®è¿˜æ˜¯åº”è¯¥ä¿å­˜ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ ä¸¤ä¸ªæŒ‰é’®:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$form</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createFormBuilder</span><span class="p">(</span><span class="nv">$task</span><span class="p">)</span>
    <span class="c1">// ...</span>
    <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;nextStep&#39;</span><span class="p">,</span> <span class="s1">&#39;submit&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;previousStep&#39;</span><span class="p">,</span> <span class="s1">&#39;submit&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">getForm</span><span class="p">();</span>
</pre></div>
</div>
<p>æ¥ç€ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®ä¸Šä¸€æ­¥æŒ‰é’®è¿è¡ŒæŸä¸ªç‰¹æ®Šçš„æ ¡éªŒç»„ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒå‹æ ¹å°±ä¸æ ¡éªŒï¼Œæ‰€ä»¥æˆ‘ä»¬è®¾ç½® <code class="docutils literal"><span class="pre">validation_groups</span></code> ä¸ºfalse:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$form</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createFormBuilder</span><span class="p">(</span><span class="nv">$task</span><span class="p">)</span>
    <span class="c1">// ...</span>
    <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;previousStep&#39;</span><span class="p">,</span> <span class="s1">&#39;submit&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;validation_groups&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
    <span class="p">))</span>
    <span class="o">-&gt;</span><span class="na">getForm</span><span class="p">();</span>
</pre></div>
</div>
<p>è¿™æ—¶è¡¨å•å°†è·³è¿‡æ ¡éªŒã€‚ä½†ä»–ä¾ç„¶ä¼šæ‰§è¡Œä¸€äº›åŸºç¡€æ£€æŸ¥ï¼Œæ¯”å¦‚æ˜¯å¦ä¸Šä¼ è¿‡å¤§çš„æ–‡ä»¶ï¼Œæˆ–è€…åœ¨æ•°å­—ç±»å‹å­—æ®µé‡Œè¾“å…¥äº†éæ•°å­—ã€‚</p>
</div>
</div>
<div class="section" id="built-in-field-types">
<span id="book-forms-type-reference"></span><span id="index-11"></span><h2>å†…ç½®è¡¨å•å­—æ®µç±»å‹<a class="headerlink" href="#built-in-field-types" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>Symfonyè‡ªå¸¦ä¸€å¤§æ³¢è¡¨å•å­—æ®µç±»å‹ï¼Œå‡ ä¹æ¶µç›–æ‰€æœ‰ä½ ä¼šé‡åˆ°çš„æ‰€æœ‰éœ€æ±‚</p>
<div class="section" id="text-fields">
<h3>æ–‡å­—ç±»<a class="headerlink" href="#text-fields" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="text.html" tppabs="http://symfony.cn/docs/reference/forms/types/text.html"><em>text</em></a></li>
<li><a class="reference internal" href="textarea.html" tppabs="http://symfony.cn/docs/reference/forms/types/textarea.html"><em>textarea</em></a></li>
<li><a class="reference internal" href="email-1.html" tppabs="http://symfony.cn/docs/reference/forms/types/email.html"><em>email</em></a></li>
<li><a class="reference internal" href="integer.html" tppabs="http://symfony.cn/docs/reference/forms/types/integer.html"><em>integer</em></a></li>
<li><a class="reference internal" href="money.html" tppabs="http://symfony.cn/docs/reference/forms/types/money.html"><em>money</em></a></li>
<li><a class="reference internal" href="number.html" tppabs="http://symfony.cn/docs/reference/forms/types/number.html"><em>number</em></a></li>
<li><a class="reference internal" href="password.html" tppabs="http://symfony.cn/docs/reference/forms/types/password.html"><em>password</em></a></li>
<li><a class="reference internal" href="percent.html" tppabs="http://symfony.cn/docs/reference/forms/types/percent.html"><em>percent</em></a></li>
<li><a class="reference internal" href="search.html" tppabs="http://symfony.cn/docs/reference/forms/types/search.html"><em>search</em></a></li>
<li><a class="reference internal" href="url-1.html" tppabs="http://symfony.cn/docs/reference/forms/types/url.html"><em>url</em></a></li>
</ul>
</div>
<div class="section" id="choice-fields">
<h3>é€‰æ‹©ç±»<a class="headerlink" href="#choice-fields" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="choice-1.html" tppabs="http://symfony.cn/docs/reference/forms/types/choice.html"><em>choice</em></a></li>
<li><a class="reference internal" href="entity.html" tppabs="http://symfony.cn/docs/reference/forms/types/entity.html"><em>entity</em></a></li>
<li><a class="reference internal" href="country-1.html" tppabs="http://symfony.cn/docs/reference/forms/types/country.html"><em>country</em></a></li>
<li><a class="reference internal" href="language-1.html" tppabs="http://symfony.cn/docs/reference/forms/types/language.html"><em>language</em></a></li>
<li><a class="reference internal" href="locale-1.html" tppabs="http://symfony.cn/docs/reference/forms/types/locale.html"><em>locale</em></a></li>
<li><a class="reference internal" href="timezone.html" tppabs="http://symfony.cn/docs/reference/forms/types/timezone.html"><em>timezone</em></a></li>
<li><a class="reference internal" href="currency-1.html" tppabs="http://symfony.cn/docs/reference/forms/types/currency.html"><em>currency</em></a></li>
</ul>
</div>
<div class="section" id="date-and-time-fields">
<h3>Date and Time Fields<a class="headerlink" href="#date-and-time-fields" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="date-1.html" tppabs="http://symfony.cn/docs/reference/forms/types/date.html"><em>date</em></a></li>
<li><a class="reference internal" href="datetime-1.html" tppabs="http://symfony.cn/docs/reference/forms/types/datetime.html"><em>datetime</em></a></li>
<li><a class="reference internal" href="time-1.html" tppabs="http://symfony.cn/docs/reference/forms/types/time.html"><em>time</em></a></li>
<li><a class="reference internal" href="birthday.html" tppabs="http://symfony.cn/docs/reference/forms/types/birthday.html"><em>birthday</em></a></li>
</ul>
</div>
<div class="section" id="other-fields">
<h3>å…¶ä»–ç±»<a class="headerlink" href="#other-fields" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="checkbox.html" tppabs="http://symfony.cn/docs/reference/forms/types/checkbox.html"><em>checkbox</em></a></li>
<li><a class="reference internal" href="file-1.html" tppabs="http://symfony.cn/docs/reference/forms/types/file.html"><em>file</em></a></li>
<li><a class="reference internal" href="radio.html" tppabs="http://symfony.cn/docs/reference/forms/types/radio.html"><em>radio</em></a></li>
</ul>
</div>
<div class="section" id="field-groups">
<h3>Field Groups<a class="headerlink" href="#field-groups" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="collection-1.html" tppabs="http://symfony.cn/docs/reference/forms/types/collection.html"><em>collection</em></a></li>
<li><a class="reference internal" href="repeated.html" tppabs="http://symfony.cn/docs/reference/forms/types/repeated.html"><em>repeated</em></a></li>
</ul>
</div>
<div class="section" id="hidden-fields">
<h3>Hidden Fields<a class="headerlink" href="#hidden-fields" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="hidden.html" tppabs="http://symfony.cn/docs/reference/forms/types/hidden.html"><em>hidden</em></a></li>
</ul>
</div>
<div class="section" id="buttons">
<h3>æŒ‰é’®ç±»<a class="headerlink" href="#buttons" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="button.html" tppabs="http://symfony.cn/docs/reference/forms/types/button.html"><em>button</em></a></li>
<li><a class="reference internal" href="reset.html" tppabs="http://symfony.cn/docs/reference/forms/types/reset.html"><em>reset</em></a></li>
<li><a class="reference internal" href="submit.html" tppabs="http://symfony.cn/docs/reference/forms/types/submit.html"><em>submit</em></a></li>
</ul>
</div>
<div class="section" id="base-fields">
<h3>Base Fields<a class="headerlink" href="#base-fields" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="form.html" tppabs="http://symfony.cn/docs/reference/forms/types/form.html"><em>form</em></a></li>
</ul>
<p>ä½ ä¹Ÿå¯ä»¥åˆ›å»ºä½ è‡ªå·±çš„è¡¨å•å­—æ®µç±»å‹ã€‚è¿™åœ¨ <a class="reference internal" href="create_custom_field_type.html" tppabs="http://symfony.cn/docs/cookbook/form/create_custom_field_type.html"><em>How to Create a Custom Form Field Type</em></a> æœ‰è®¨è®º</p>
</div>
<div class="section" id="field-type-options">
<span id="index-12"></span><h3>è¡¨å•å­—æ®µé€‰é¡¹<a class="headerlink" href="#field-type-options" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>æ¯ä¸€ä¸ªå­—æ®µç±»å‹éƒ½æœ‰ä¸€å †é€‰é¡¹ã€‚æ¯”å¦‚è¯´ <code class="docutils literal"><span class="pre">dueDate</span></code> å­—æ®µå°±è¢«æ˜¾ç¤ºæˆä¸‰ä¸ªä¸‹æ‹‰èœå•ã€‚ä¸è¿‡ï¼Œ <a class="reference internal" href="date-1.html" tppabs="http://symfony.cn/docs/reference/forms/types/date.html"><em>date field</em></a> å¯ä»¥è¢«è®¾ç½®ä¸ºä¸€ä¸ªæ–‡å­—è¾“å…¥æ¡†ï¼Œè¿™æ ·ç”¨æˆ·å°±å¯ä»¥ç›´æ¥è¾“å…¥æ—¶é—´æ–‡å­—äº†:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;dueDate&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;widget&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;single_text&#39;</span><span class="p">))</span>
</pre></div>
</div>
<img alt="../_images/form-simple2.png" class="align-center" src="form-simple2.png" tppabs="http://symfony.cn/docs/_images/form-simple2.png" />
<p>æ¯ä¸€ä¸ªè¡¨å•å­—æ®µæœ‰ä¸€å †é€‰é¡¹ç‹¬æœ‰çš„é€‰é¡¹å¯ä»¥è®¾ç½®ï¼Œå®ƒä»¬åœ¨æ–‡æ¡£é‡Œéƒ½å¯ä»¥æŸ¥åˆ°ã€‚</p>
<div class="sidebar">
<p class="first sidebar-title"><code class="docutils literal"><span class="pre">required</span></code> é€‰é¡¹</p>
<p>æœ€å¸¸è§çš„é€‰é¡¹å°±æ˜¯ <code class="docutils literal"><span class="pre">requried</span></code> ï¼Œä»»ä½•å­—æ®µéƒ½å¯ä»¥ä½¿ç”¨å®ƒã€‚ <code class="docutils literal"><span class="pre">required</span></code> é»˜è®¤ä¸º <code class="docutils literal"><span class="pre">true</span></code> ï¼Œè¡¨ç¤ºæ”¯æŒHTML5çš„æµè§ˆå™¨å°†åœ¨å®¢æˆ·ç«¯è®¾ç½®æ­¤å­—æ®µä¸èƒ½ä¸å¡«ã€‚å¦‚æœä½ ä¸æƒ³ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œä½ å¯ä»¥è®¾ç½® <code class="docutils literal"><span class="pre">required</span></code> ä¸º <code class="docutils literal"><span class="pre">false</span></code> ï¼Œ æˆ–è€… <a class="reference internal" href="#book-forms-html5-validation-disable"><span>disable HTML5 validation</span></a> ã€‚</p>
<p>æ³¨æ„è®¾ç½® <code class="docutils literal"><span class="pre">required</span></code> ä¸º <code class="docutils literal"><span class="pre">true</span></code> å¹¶ <strong>ä¸ä¼š</strong> è§¦å‘æœåŠ¡å™¨ç«¯çš„éç©ºæ ¡éªŒã€‚æˆ–è€…è¯´ï¼Œå¦‚æœå®¢æˆ·ç«¯å¤ªæ—§ä¸æ”¯æŒHTML5ï¼Œæ•°æ®ä¾ç„¶ä¼šæäº¤ï¼Œå¹¶ä¸”å¦‚æœä½ ä¸ä½¿ç”¨ <code class="docutils literal"><span class="pre">NotBlank</span></code> å’Œ <code class="docutils literal"><span class="pre">NotNull</span></code> è¿™æ ·çš„æ ¡éªŒè§„åˆ™ï¼Œ ä¾ç„¶ç®—é€šè¿‡æ ¡éªŒã€‚</p>
<p class="last">æ¢å¥è¯è¯´ï¼Œ <code class="docutils literal"><span class="pre">required</span></code> è™½å¥½ï¼ŒæœåŠ¡å™¨ç«¯æ ¡éªŒ <em>æ›´</em> éœ€è¦</p>
</div>
<div class="sidebar">
<p class="first sidebar-title"><code class="docutils literal"><span class="pre">label</span></code> é€‰é¡¹</p>
<p>è¡¨å•é¡¹æ–‡å­—å¯ä»¥é€šè¿‡ <code class="docutils literal"><span class="pre">label</span></code> é€‰é¡¹è®¾ç½®ï¼ŒåŒæ ·æ˜¯ä»»ä½•ç±»å‹çš„å­—æ®µéƒ½å¯ä»¥ç”¨å®ƒã€‚</p>
<div class="highlight-php"><div class="highlight"><pre><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;dueDate&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;widget&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;single_text&#39;</span><span class="p">,</span>
    <span class="s1">&#39;label&#39;</span>  <span class="o">=&gt;</span> <span class="s1">&#39;Due Date&#39;</span><span class="p">,</span>
<span class="p">))</span>
</pre></div>
</div>
<p class="last">labelä¹Ÿå¯ä»¥åœ¨æ¨¡æ¿ä¸­è®¾ç½®ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œå¦‚æœä½ ä¸æƒ³è®©æŸä¸ªlabelè·Ÿä½ çš„è¾“å…¥æ¡†ä¸€èµ·æ˜¾ç¤ºï¼Œä½ å¯ä»¥é€šè¿‡è®¾ç½®å…¶ä¸º <code class="docutils literal"><span class="pre">false</span></code> æ¥å…³é—­å®ƒã€‚</p>
</div>
</div>
</div>
<div class="section" id="field-type-guessing">
<span id="book-forms-field-guessing"></span><span id="index-13"></span><h2>è¡¨å•å­—æ®µç±»å‹è‡ªåŠ¨é¢„æµ‹<a class="headerlink" href="#field-type-guessing" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>ç›®å‰ä½ å·²ç»ç»™ <code class="docutils literal"><span class="pre">Task</span></code> ç±»æ·»åŠ äº†æ ¡éªŒï¼ŒSymfonyå°±å·²ç»çŸ¥é“å¾ˆå¤šè¡¨å•å­—æ®µä¿¡æ¯ã€‚Symfonyè¿˜å¯ä»¥â€œæ¨æµ‹â€è¡¨å•å­—æ®µåº”è¯¥æ˜¯ä»€ä¹ˆç±»å‹ï¼Œç„¶åè‡ªåŠ¨ä¸ºä½ è®¾ç½®ã€‚åœ¨æ­¤ä¾‹ä¸­ï¼ŒSymfonyé€šè¿‡æ ¡éªŒè§„åˆ™æ¨æµ‹å‡º <code class="docutils literal"><span class="pre">task</span></code> å­—æ®µåº”è¯¥æ˜¯ <code class="docutils literal"><span class="pre">text</span></code> ç±»å‹ï¼Œè€Œ <code class="docutils literal"><span class="pre">dueDate</span></code> æ˜¯ <code class="docutils literal"><span class="pre">date</span></code> ç±»å‹:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">newAction</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$task</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Task</span><span class="p">();</span>

    <span class="nv">$form</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createFormBuilder</span><span class="p">(</span><span class="nv">$task</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;task&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;dueDate&#39;</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;widget&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;single_text&#39;</span><span class="p">))</span>
        <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;save&#39;</span><span class="p">,</span> <span class="s1">&#39;submit&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">getForm</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>å¦‚æœä½ å¿½ç•¥ <code class="docutils literal"><span class="pre">add()</span></code> çš„ç¬¬äºŒä¸ªå‚æ•°ï¼ˆæˆ–è€…ä¼ nullç»™å®ƒï¼‰ï¼Œâ€œæ¨æµ‹â€åŠŸèƒ½ä¾¿ä¼šå¼€å¯ã€‚å¦‚æœä½ ä¼ å…¥äº†é€‰é¡¹åˆ°ç¬¬ä¸‰ä¸ªå‚æ•°ï¼ˆä¸Šé¢ <code class="docutils literal"><span class="pre">dueDate</span></code> å°±æ˜¯è¿™ä¹ˆåšçš„ï¼‰ï¼Œè¿™äº›é€‰é¡¹å°±ä¼šä½¿ç”¨åœ¨è¢«æ¨æµ‹å‡ºæ¥çš„å­—æ®µä¸Šã€‚</p>
<div class="admonition caution">
<p class="first admonition-title">è­¦å‘Š</p>
<p class="last">å¦‚æœä½ çš„è¡¨å•å°†ä½¿ç”¨æŸä¸ªç‰¹åˆ«çš„æ ¡éªŒç»„ï¼Œå­—æ®µç±»å‹æ¨æµ‹åŠŸèƒ½ä¾ç„¶æ˜¯ä»æ‰€æœ‰çš„éªŒè¯è§„åˆ™é‡Œå»çŒœæµ‹ä½ çš„å­—æ®µç±»å‹ï¼ˆå³åŒ…æ‹¬æ‰€ä½¿ç”¨çš„æ ¡éªŒè§„åˆ™ä¹‹å¤–çš„è§„åˆ™ï¼‰ã€‚</p>
</div>
<div class="section" id="field-type-options-guessing">
<span id="index-14"></span><h3>è¡¨å•å­—æ®µé€‰é¡¹è‡ªåŠ¨é¢„æµ‹<a class="headerlink" href="#field-type-options-guessing" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>é™¤äº†èƒ½æ¨æµ‹ç±»å‹ï¼ŒSymfonyä¹Ÿå¯ä»¥æ¨æµ‹é€‰é¡¹ã€‚</p>
<div class="admonition tip">
<p class="first admonition-title">å°æŠ€å·§</p>
<p class="last">å½“è®¾ç½®å®Œè¿™äº›é€‰é¡¹åï¼Œåœ¨ç”ŸæˆHTMLä»£ç æ—¶ä¼šç”Ÿæˆå“åº”çš„HTML5å±æ€§ã€‚åªä¸è¿‡ï¼Œä»–å¹¶ä¸ç”Ÿæˆç›¸åŒåŠŸèƒ½çš„ï¼ŒæœåŠ¡å™¨ç«¯çš„æ ¡éªŒè§„åˆ™ï¼ˆæ¯”å¦‚è¯´ <code class="docutils literal"><span class="pre">Asset\Length</span></code>ï¼‰ã€‚æ‰€ä»¥ä½ å¾—è‡ªå·±æ·»åŠ æœåŠ¡ç«¯çš„æ ¡éªŒã€‚è¿™äº›å­—æ®µè®¾ç½®å¯ä»¥è¢«å®ƒçš„æ ¡éªŒä¿¡æ¯æ¨æµ‹å‡ºæ¥ã€‚</p>
</div>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">required</span></code></dt>
<dd><p class="first last"><code class="docutils literal"><span class="pre">required</span></code> é€‰é¡¹å¯ä»¥é€šè¿‡æ ¡éªŒè§„åˆ™çŒœæµ‹å‡ºæ¥ï¼ˆæ¯”å¦‚ <code class="docutils literal"><span class="pre">NotBlank</span></code> æˆ–è€… <code class="docutils literal"><span class="pre">NotNull</span></code>ï¼‰ç”šè‡³æ˜¯é€šè¿‡Doctrineçš„é…ç½®ä¿¡æ¯ï¼ˆæ¯”å¦‚ <code class="docutils literal"><span class="pre">nullable</span></code>ï¼‰ã€‚éå¸¸æ–¹ä¾¿å¾—è®©ä½ çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æœ‰ç›¸åŒçš„æ ¡éªŒè§„åˆ™ã€‚</p>
</dd>
<dt><code class="docutils literal"><span class="pre">max_length</span></code></dt>
<dd><p class="first last">å¦‚æœæ˜¯æ–‡å­—è¾“å…¥æ¡†ï¼Œ <code class="docutils literal"><span class="pre">max_length</span></code> å°†è¢«æ¨æµ‹å‡ºæ¥ï¼ˆé€šè¿‡ <code class="docutils literal"><span class="pre">Length</span></code> æˆ–è€… <code class="docutils literal"><span class="pre">Range</span></code>ï¼‰ç”šè‡³æ˜¯Doctrineçš„é…ç½®ä¿¡æ¯ ï¼ˆé€šè¿‡å“åº”å±æ€§çš„ length ä¿¡æ¯ï¼‰ã€‚</p>
</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">æ³¨è§£</p>
<p class="last">è¿™äº›å­—æ®µé€‰é¡¹ <em>ä»…ä»…</em> åœ¨è®©SymfonyçŒœæµ‹å­—æ®µç±»å‹çš„æ—¶å€™æ‰ä¼šç®¡ç”¨ï¼ˆå³å¿½ç•¥ <code class="docutils literal"><span class="pre">add()</span></code> çš„ç¬¬äºŒä¸ªå‚æ•°ï¼‰ã€‚</p>
</div>
<p>å¦‚æœä½ æƒ³æ”¹å˜å…¶ä¸­æŸä¸€ä¸ªçŒœæµ‹çš„é€‰é¡¹ï¼Œä½ å¯ä»¥é€šè¿‡ä¼ å…¥é€‰é¡¹æ•°ç»„å»è¦†ç›–å®ƒã€‚</p>
<div class="highlight-php"><div class="highlight"><pre><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;task&#39;</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;attr&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;maxlength&#39;</span> <span class="o">=&gt;</span> <span class="mi">4</span><span class="p">)))</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="rendering-a-form-in-a-template">
<span id="form-rendering-template"></span><span id="index-15"></span><h2>åœ¨æ¨¡æ¿é‡Œç”Ÿæˆè¡¨å•<a class="headerlink" href="#rendering-a-form-in-a-template" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>ç›®å‰ï¼Œä½ å·²ç»çŸ¥é“å¦‚ä½•ç”¨ä¸€è¡Œä»£ç ç”Ÿæˆæ•´ä¸ªè¡¨å•ã€‚ä½†ä½ æœ‰æ›´çµæ´»çš„æ–¹å¼å»ç”Ÿæˆè¡¨å•ï¼š</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# app/Resources/views/default/new.html.twig #}</span>
<span class="cp">{{</span> <span class="nv">form_start</span><span class="o">(</span><span class="nv">form</span><span class="o">)</span> <span class="cp">}}</span>
    <span class="cp">{{</span> <span class="nv">form_errors</span><span class="o">(</span><span class="nv">form</span><span class="o">)</span> <span class="cp">}}</span>

    <span class="cp">{{</span> <span class="nv">form_row</span><span class="o">(</span><span class="nv">form.task</span><span class="o">)</span> <span class="cp">}}</span>
    <span class="cp">{{</span> <span class="nv">form_row</span><span class="o">(</span><span class="nv">form.dueDate</span><span class="o">)</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">form_end</span><span class="o">(</span><span class="nv">form</span><span class="o">)</span> <span class="cp">}}</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-html+php"><div class="highlight"><pre><span class="c">&lt;!-- app/Resources/views/default/newAction.html.php --&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">start</span><span class="p">(</span><span class="nv">$form</span><span class="p">)</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">errors</span><span class="p">(</span><span class="nv">$form</span><span class="p">)</span> <span class="cp">?&gt;</span>

    <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">row</span><span class="p">(</span><span class="nv">$form</span><span class="p">[</span><span class="s1">&#39;task&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">row</span><span class="p">(</span><span class="nv">$form</span><span class="p">[</span><span class="s1">&#39;dueDate&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">end</span><span class="p">(</span><span class="nv">$form</span><span class="p">)</span> <span class="cp">?&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>åŒæ ·ä½ ä¹ŸçŸ¥é“äº† <code class="docutils literal"><span class="pre">form_start()</span></code> å’Œ <code class="docutils literal"><span class="pre">form_end()</span></code> æ–¹æ³•ï¼Œä½†å…¶ä»–çš„æ–¹æ³•æ˜¯å¹²å˜›ç”¨çš„ï¼Ÿ</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">form_errors(form)</span></code></dt>
<dd><p class="first last">æ˜¾ç¤ºæ•´ä¸ªè¡¨å•çš„é”™è¯¯ï¼ˆå¦‚ä½•å‚æ•°æ˜¯æŸä¸ªè¡¨å•å­—æ®µï¼Œå°±æ˜¯æ­¤å­—æ®µçš„é”™è¯¯ï¼‰ã€‚</p>
</dd>
<dt><code class="docutils literal"><span class="pre">form_row(form.dueDate)</span></code></dt>
<dd><p class="first last">æ˜¾ç¤ºlabelï¼Œé”™è¯¯ï¼Œä»¥åŠæ§ä»¶ï¼Œé»˜è®¤æƒ…å†µä¼šè¢«ä¸€ä¸ª <code class="docutils literal"><span class="pre">div</span></code> åŒ…èµ·æ¥</p>
</dd>
</dl>
<p>ä¸»è¦å·¥ä½œéƒ½æ˜¯ç”± <code class="docutils literal"><span class="pre">form_row</span></code> åŠ©æ‰‹å®Œæˆçš„ï¼Œä»–å°†æ˜¾ç¤ºä¸€ä¸ªlabelï¼Œé”™è¯¯ï¼Œä»¥åŠè¡¨å•çš„æ§ä»¶ï¼Œå¹¶é»˜è®¤è¢«ä¸€ä¸ª <code class="docutils literal"><span class="pre">div</span></code> åŒ…èµ·æ¥ã€‚åœ¨ <a class="reference internal" href="#form-theming"><span>è¡¨å•ä¸»é¢˜</span></a> ä¸­æ‚¨å°†çŸ¥é“å¦‚ä½•åœ¨å„ä¸ªå±‚é¢è‡ªå®šä¹‰å®ƒçš„æ˜¾ç¤ºã€‚</p>
<div class="admonition tip">
<p class="first admonition-title">å°æŠ€å·§</p>
<p>æ‚¨å¯ä»¥é€šè¿‡ <code class="docutils literal"><span class="pre">form.vars.value</span></code> æ¥è®¿é—®å½“å‰çš„æ•°æ®ï¼š</p>
<div class="last configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="nv">form.vars.value.task</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-html+php"><div class="highlight"><pre><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">vars</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">getTask</span><span class="p">()</span> <span class="cp">?&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="rendering-each-field-by-hand">
<span id="index-16"></span><h3>æ‰‹åŠ¨ç”Ÿæˆæ¯ä¸€ä¸ªè¡¨å•å­—æ®µ<a class="headerlink" href="#rendering-each-field-by-hand" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">form_row</span></code> helper is great because you can very quickly render each
field of your form (and the markup used for the &#8220;row&#8221; can be customized as
well). But since life isn&#8217;t always so simple, you can also render each field
entirely by hand. The end-product of the following is the same as when you
used the <code class="docutils literal"><span class="pre">form_row</span></code> helper:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="nv">form_start</span><span class="o">(</span><span class="nv">form</span><span class="o">)</span> <span class="cp">}}</span>
    <span class="cp">{{</span> <span class="nv">form_errors</span><span class="o">(</span><span class="nv">form</span><span class="o">)</span> <span class="cp">}}</span>

    <span class="nt">&lt;div&gt;</span>
        <span class="cp">{{</span> <span class="nv">form_label</span><span class="o">(</span><span class="nv">form.task</span><span class="o">)</span> <span class="cp">}}</span>
        <span class="cp">{{</span> <span class="nv">form_errors</span><span class="o">(</span><span class="nv">form.task</span><span class="o">)</span> <span class="cp">}}</span>
        <span class="cp">{{</span> <span class="nv">form_widget</span><span class="o">(</span><span class="nv">form.task</span><span class="o">)</span> <span class="cp">}}</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;div&gt;</span>
        <span class="cp">{{</span> <span class="nv">form_label</span><span class="o">(</span><span class="nv">form.dueDate</span><span class="o">)</span> <span class="cp">}}</span>
        <span class="cp">{{</span> <span class="nv">form_errors</span><span class="o">(</span><span class="nv">form.dueDate</span><span class="o">)</span> <span class="cp">}}</span>
        <span class="cp">{{</span> <span class="nv">form_widget</span><span class="o">(</span><span class="nv">form.dueDate</span><span class="o">)</span> <span class="cp">}}</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;div&gt;</span>
        <span class="cp">{{</span> <span class="nv">form_widget</span><span class="o">(</span><span class="nv">form.save</span><span class="o">)</span> <span class="cp">}}</span>
    <span class="nt">&lt;/div&gt;</span>

<span class="cp">{{</span> <span class="nv">form_end</span><span class="o">(</span><span class="nv">form</span><span class="o">)</span> <span class="cp">}}</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-html+php"><div class="highlight"><pre><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">start</span><span class="p">(</span><span class="nv">$form</span><span class="p">)</span> <span class="cp">?&gt;</span>

    <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">errors</span><span class="p">(</span><span class="nv">$form</span><span class="p">)</span> <span class="cp">?&gt;</span>

    <span class="nt">&lt;div&gt;</span>
        <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">label</span><span class="p">(</span><span class="nv">$form</span><span class="p">[</span><span class="s1">&#39;task&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span>
        <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">errors</span><span class="p">(</span><span class="nv">$form</span><span class="p">[</span><span class="s1">&#39;task&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span>
        <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">widget</span><span class="p">(</span><span class="nv">$form</span><span class="p">[</span><span class="s1">&#39;task&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;div&gt;</span>
        <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">label</span><span class="p">(</span><span class="nv">$form</span><span class="p">[</span><span class="s1">&#39;dueDate&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span>
        <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">errors</span><span class="p">(</span><span class="nv">$form</span><span class="p">[</span><span class="s1">&#39;dueDate&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span>
        <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">widget</span><span class="p">(</span><span class="nv">$form</span><span class="p">[</span><span class="s1">&#39;dueDate&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;div&gt;</span>
        <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">widget</span><span class="p">(</span><span class="nv">$form</span><span class="p">[</span><span class="s1">&#39;save&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">end</span><span class="p">(</span><span class="nv">$form</span><span class="p">)</span> <span class="cp">?&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>If the auto-generated label for a field isn&#8217;t quite right, you can explicitly
specify it:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="nv">form_label</span><span class="o">(</span><span class="nv">form.task</span><span class="o">,</span> <span class="s1">&#39;Task Description&#39;</span><span class="o">)</span> <span class="cp">}}</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-html+php"><div class="highlight"><pre><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">label</span><span class="p">(</span><span class="nv">$form</span><span class="p">[</span><span class="s1">&#39;task&#39;</span><span class="p">],</span> <span class="s1">&#39;Task Description&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Some field types have additional rendering options that can be passed
to the widget. These options are documented with each type, but one common
options is <code class="docutils literal"><span class="pre">attr</span></code>, which allows you to modify attributes on the form element.
The following would add the <code class="docutils literal"><span class="pre">task_field</span></code> class to the rendered input text
field:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="nv">form_widget</span><span class="o">(</span><span class="nv">form.task</span><span class="o">,</span> <span class="o">{</span><span class="s1">&#39;attr&#39;</span><span class="o">:</span> <span class="o">{</span><span class="s1">&#39;class&#39;</span><span class="o">:</span> <span class="s1">&#39;task_field&#39;</span><span class="cp">}}</span>) }}
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-html+php"><div class="highlight"><pre><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">widget</span><span class="p">(</span><span class="nv">$form</span><span class="p">[</span><span class="s1">&#39;task&#39;</span><span class="p">],</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;attr&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;class&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;task_field&#39;</span><span class="p">),</span>
<span class="p">))</span> <span class="cp">?&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>If you need to render form fields &#8220;by hand&#8221; then you can access individual
values for fields such as the <code class="docutils literal"><span class="pre">id</span></code>, <code class="docutils literal"><span class="pre">name</span></code> and <code class="docutils literal"><span class="pre">label</span></code>. For example
to get the <code class="docutils literal"><span class="pre">id</span></code>:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="nv">form.task.vars.id</span> <span class="cp">}}</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-html+php"><div class="highlight"><pre><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$form</span><span class="p">[</span><span class="s1">&#39;task&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">vars</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="cp">?&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>To get the value used for the form field&#8217;s name attribute you need to use
the <code class="docutils literal"><span class="pre">full_name</span></code> value:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="nv">form.task.vars.full_name</span> <span class="cp">}}</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-html+php"><div class="highlight"><pre><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$form</span><span class="p">[</span><span class="s1">&#39;task&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">vars</span><span class="p">[</span><span class="s1">&#39;full_name&#39;</span><span class="p">]</span> <span class="cp">?&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="twig-template-function-reference">
<h3>Twigå‡½æ•°å‚è€ƒ<a class="headerlink" href="#twig-template-function-reference" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>If you&#8217;re using Twig, a full reference of the form rendering functions is
available in the <a class="reference internal" href="twig_reference.html" tppabs="http://symfony.cn/docs/reference/forms/twig_reference.html"><em>reference manual</em></a>.
Read this to know everything about the helpers available and the options
that can be used with each.</p>
</div>
</div>
<div class="section" id="changing-the-action-and-method-of-a-form">
<span id="book-forms-changing-action-and-method"></span><span id="index-17"></span><h2>ä¿®æ”¹è¡¨å•çš„methodå’Œactionå±æ€§<a class="headerlink" href="#changing-the-action-and-method-of-a-form" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>So far, the <code class="docutils literal"><span class="pre">form_start()</span></code> helper has been used to render the form&#8217;s start
tag and we assumed that each form is submitted to the same URL in a POST request.
Sometimes you want to change these parameters. You can do so in a few different
ways. If you build your form in the controller, you can use <code class="docutils literal"><span class="pre">setAction()</span></code> and
<code class="docutils literal"><span class="pre">setMethod()</span></code>:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$form</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createFormBuilder</span><span class="p">(</span><span class="nv">$task</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setAction</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">generateUrl</span><span class="p">(</span><span class="s1">&#39;target_route&#39;</span><span class="p">))</span>
    <span class="o">-&gt;</span><span class="na">setMethod</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;task&#39;</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;dueDate&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;save&#39;</span><span class="p">,</span> <span class="s1">&#39;submit&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">getForm</span><span class="p">();</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">æ³¨è§£</p>
<p class="last">This example assumes that you&#8217;ve created a route called <code class="docutils literal"><span class="pre">target_route</span></code>
that points to the controller that processes the form.</p>
</div>
<p>In <a class="reference internal" href="#book-form-creating-form-classes"><span>åˆ›å»ºè¡¨å•ç±»</span></a> you will learn how to move the
form building code into separate classes. When using an external form class
in the controller, you can pass the action and method as form options:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$form</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createForm</span><span class="p">(</span><span class="k">new</span> <span class="nx">TaskType</span><span class="p">(),</span> <span class="nv">$task</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">generateUrl</span><span class="p">(</span><span class="s1">&#39;target_route&#39;</span><span class="p">),</span>
    <span class="s1">&#39;method&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;GET&#39;</span><span class="p">,</span>
<span class="p">));</span>
</pre></div>
</div>
<p>Finally, you can override the action and method in the template by passing them
to the <code class="docutils literal"><span class="pre">form()</span></code> or the <code class="docutils literal"><span class="pre">form_start()</span></code> helper:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# app/Resources/views/default/new.html.twig #}</span>
<span class="cp">{{</span> <span class="nv">form_start</span><span class="o">(</span><span class="nv">form</span><span class="o">,</span> <span class="o">{</span><span class="s1">&#39;action&#39;</span><span class="o">:</span> <span class="nv">path</span><span class="o">(</span><span class="s1">&#39;target_route&#39;</span><span class="o">),</span> <span class="s1">&#39;method&#39;</span><span class="o">:</span> <span class="s1">&#39;GET&#39;</span><span class="o">})</span> <span class="cp">}}</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-html+php"><div class="highlight"><pre><span class="c">&lt;!-- app/Resources/views/default/newAction.html.php --&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">start</span><span class="p">(</span><span class="nv">$form</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;router&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s1">&#39;target_route&#39;</span><span class="p">),</span>
    <span class="s1">&#39;method&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;GET&#39;</span><span class="p">,</span>
<span class="p">))</span> <span class="cp">?&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">æ³¨è§£</p>
<p class="last">If the form&#8217;s method is not GET or POST, but PUT, PATCH or DELETE, Symfony
will insert a hidden field with the name <code class="docutils literal"><span class="pre">_method</span></code> that stores this method.
The form will be submitted in a normal POST request, but Symfony&#8217;s router
is capable of detecting the <code class="docutils literal"><span class="pre">_method</span></code> parameter and will interpret it as
a PUT, PATCH or DELETE request. Read the cookbook chapter
&#8220;<a class="reference internal" href="method_parameters.html" tppabs="http://symfony.cn/docs/cookbook/routing/method_parameters.html"><em>How to Use HTTP Methods beyond GET and POST in Routes</em></a>&#8221; for more information.</p>
</div>
</div>
<div class="section" id="creating-form-classes">
<span id="book-form-creating-form-classes"></span><span id="index-18"></span><h2>åˆ›å»ºè¡¨å•ç±»<a class="headerlink" href="#creating-form-classes" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>As you&#8217;ve seen, a form can be created and used directly in a controller.
However, a better practice is to build the form in a separate, standalone PHP
class, which can then be reused anywhere in your application. Create a new class
that will house the logic for building the task form:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/AppBundle/Form/Type/TaskType.php</span>
<span class="k">namespace</span> <span class="nx">AppBundle\Form\Type</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\Form\AbstractType</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Form\FormBuilderInterface</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">TaskType</span> <span class="k">extends</span> <span class="nx">AbstractType</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">buildForm</span><span class="p">(</span><span class="nx">FormBuilderInterface</span> <span class="nv">$builder</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$options</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$builder</span>
            <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;task&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;dueDate&#39;</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;widget&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;single_text&#39;</span><span class="p">))</span>
            <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;save&#39;</span><span class="p">,</span> <span class="s1">&#39;submit&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getName</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;task&#39;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition caution">
<p class="first admonition-title">è­¦å‘Š</p>
<p class="last">The <code class="docutils literal"><span class="pre">getName()</span></code> method returns the identifier of this form &#8220;type&#8221;. These
identifiers must be unique in the application. Unless you want to override
a built-in type, they should be different from the default Symfony types
and from any type defined by a third-party bundle installed in your application.
Consider prefixing your types with <code class="docutils literal"><span class="pre">app_</span></code> to avoid identifier collisions.</p>
</div>
<p>This new class contains all the directions needed to create the task form. It can
be used to quickly build a form object in the controller:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/AppBundle/Controller/DefaultController.php</span>

<span class="c1">// add this new use statement at the top of the class</span>
<span class="k">use</span> <span class="nx">AppBundle\Form\Type\TaskType</span><span class="p">;</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">newAction</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$task</span> <span class="o">=</span> <span class="o">...</span><span class="p">;</span>
    <span class="nv">$form</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createForm</span><span class="p">(</span><span class="k">new</span> <span class="nx">TaskType</span><span class="p">(),</span> <span class="nv">$task</span><span class="p">);</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Placing the form logic into its own class means that the form can be easily
reused elsewhere in your project. This is the best way to create forms, but
the choice is ultimately up to you.</p>
<div class="sidebar" id="book-forms-data-class">
<p class="first sidebar-title">è®¾ç½® <code class="docutils literal"><span class="pre">data_class</span></code></p>
<p>Every form needs to know the name of the class that holds the underlying
data (e.g. <code class="docutils literal"><span class="pre">AppBundle\Entity\Task</span></code>). Usually, this is just guessed
based off of the object passed to the second argument to <code class="docutils literal"><span class="pre">createForm</span></code>
(i.e. <code class="docutils literal"><span class="pre">$task</span></code>). Later, when you begin embedding forms, this will no
longer be sufficient. So, while not always necessary, it&#8217;s generally a
good idea to explicitly specify the <code class="docutils literal"><span class="pre">data_class</span></code> option by adding the
following to your form type class:</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\OptionsResolver\OptionsResolver</span><span class="p">;</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">configureOptions</span><span class="p">(</span><span class="nx">OptionsResolver</span> <span class="nv">$resolver</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$resolver</span><span class="o">-&gt;</span><span class="na">setDefaults</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;data_class&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AppBundle\Entity\Task&#39;</span><span class="p">,</span>
    <span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="admonition tip">
<p class="first admonition-title">å°æŠ€å·§</p>
<p>When mapping forms to objects, all fields are mapped. Any fields on the
form that do not exist on the mapped object will cause an exception to
be thrown.</p>
<p>In cases where you need extra fields in the form (for example: a &#8220;do you
agree with these terms&#8221; checkbox) that will not be mapped to the underlying
object, you need to set the <code class="docutils literal"><span class="pre">mapped</span></code> option to <code class="docutils literal"><span class="pre">false</span></code>:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\Form\FormBuilderInterface</span><span class="p">;</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">buildForm</span><span class="p">(</span><span class="nx">FormBuilderInterface</span> <span class="nv">$builder</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$options</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$builder</span>
        <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;task&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;dueDate&#39;</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;mapped&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">))</span>
        <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;save&#39;</span><span class="p">,</span> <span class="s1">&#39;submit&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Additionally, if there are any fields on the form that aren&#8217;t included in
the submitted data, those fields will be explicitly set to <code class="docutils literal"><span class="pre">null</span></code>.</p>
<p>åœ¨Controlleré‡Œå¯ä»¥è¿™æ ·è®¿é—®è¡¨å•å­—æ®µæ•°æ®:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$form</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;dueDate&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">getData</span><span class="p">();</span>
</pre></div>
</div>
<p>å¦å¤–ï¼Œæ²¡æœ‰è¢«æ˜ å°„çš„å­—æ®µä¹Ÿå¯ä»¥ç›´æ¥è¢«ä¿®æ”¹:</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="nv">$form</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;dueDate&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">setData</span><span class="p">(</span><span class="k">new</span> <span class="nx">\DateTime</span><span class="p">());</span>
</pre></div>
</div>
</div>
<div class="section" id="defining-your-forms-as-services">
<h3>å°†è¡¨å•å®šä¹‰ä¸ºService<a class="headerlink" href="#defining-your-forms-as-services" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>å°†è¡¨å•å®šä¹‰ä¸ºæœåŠ¡æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ï¼Œä»–å°†è®©è¡¨å•å˜å¾—æ›´å¥½ç”¨</p>
<div class="admonition note">
<p class="first admonition-title">æ³¨è§£</p>
<p class="last">Services and the service container will be handled
<a class="reference internal" href="service_container.html" tppabs="http://symfony.cn/docs/book/service_container.html"><em>later on in this book</em></a>. Things will be
more clear after reading that chapter.</p>
</div>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># src/AppBundle/Resources/config/services.yml</span>
<span class="l-Scalar-Plain">services</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">acme_demo.form.type.task</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">class</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">AppBundle\Form\Type\TaskType</span>
        <span class="l-Scalar-Plain">tags</span><span class="p-Indicator">:</span>
            <span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">name</span><span class="p-Indicator">:</span> <span class="nv">form.type</span><span class="p-Indicator">,</span> <span class="nv">alias</span><span class="p-Indicator">:</span> <span class="nv">task</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- src/AppBundle/Resources/config/services.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;container</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/services&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;services&gt;</span>
        <span class="nt">&lt;service</span>
            <span class="na">id=</span><span class="s">&quot;acme_demo.form.type.task&quot;</span>
            <span class="na">class=</span><span class="s">&quot;AppBundle\Form\Type\TaskType&quot;</span><span class="nt">&gt;</span>

            <span class="nt">&lt;tag</span> <span class="na">name=</span><span class="s">&quot;form.type&quot;</span> <span class="na">alias=</span><span class="s">&quot;task&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/service&gt;</span>
    <span class="nt">&lt;/services&gt;</span>
<span class="nt">&lt;/container&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/AppBundle/Resources/config/services.php</span>
<span class="nv">$container</span>
    <span class="o">-&gt;</span><span class="na">register</span><span class="p">(</span>
        <span class="s1">&#39;acme_demo.form.type.task&#39;</span><span class="p">,</span>
        <span class="s1">&#39;AppBundle\Form\Type\TaskType&#39;</span>
    <span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addTag</span><span class="p">(</span><span class="s1">&#39;form.type&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;alias&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;task&#39;</span><span class="p">,</span>
    <span class="p">))</span>
<span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>æå®šï¼ ç°åœ¨ä½ å¯ä»¥ç›´æ¥åœ¨Controlleré‡Œä½¿ç”¨ä½ è‡ªå·±çš„è¡¨å•ç±»å‹</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/AppBundle/Controller/DefaultController.php</span>
<span class="c1">// ...</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">newAction</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$task</span> <span class="o">=</span> <span class="o">...</span><span class="p">;</span>
    <span class="nv">$form</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createForm</span><span class="p">(</span><span class="s1">&#39;task&#39;</span><span class="p">,</span> <span class="nv">$task</span><span class="p">);</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>ç”šè‡³å¯ä»¥åœ¨å…¶ä»–è¡¨å•ä¸­ä½¿ç”¨:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/AppBundle/Form/Type/ListType.php</span>
<span class="c1">// ...</span>

<span class="k">class</span> <span class="nc">ListType</span> <span class="k">extends</span> <span class="nx">AbstractType</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">buildForm</span><span class="p">(</span><span class="nx">FormBuilderInterface</span> <span class="nv">$builder</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$options</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>

        <span class="nv">$builder</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;someTask&#39;</span><span class="p">,</span> <span class="s1">&#39;task&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>ç§»æ­¥è‡³ <a class="reference internal" href="create_custom_field_type.html#form-cookbook-form-field-service" tppabs="http://symfony.cn/docs/cookbook/form/create_custom_field_type.html#form-cookbook-form-field-service"><span>Creating your Field Type as a Service</span></a> äº†è§£æ›´å¤šã€‚</p>
</div>
</div>
<div class="section" id="forms-and-doctrine">
<span id="index-19"></span><h2>è¡¨å•å’ŒDoctrine<a class="headerlink" href="#forms-and-doctrine" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>The goal of a form is to translate data from an object (e.g. <code class="docutils literal"><span class="pre">Task</span></code>) to an
HTML form and then translate user-submitted data back to the original object. As
such, the topic of persisting the <code class="docutils literal"><span class="pre">Task</span></code> object to the database is entirely
unrelated to the topic of forms. But, if you&#8217;ve configured the <code class="docutils literal"><span class="pre">Task</span></code> class
to be persisted via Doctrine (i.e. you&#8217;ve added
<a class="reference internal" href="doctrine.html#book-doctrine-adding-mapping" tppabs="http://symfony.cn/docs/book/doctrine.html#book-doctrine-adding-mapping"><span>mapping metadata</span></a> for it), then persisting
it after a form submission can be done when the form is valid:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="nv">$form</span><span class="o">-&gt;</span><span class="na">isValid</span><span class="p">())</span> <span class="p">{</span>
    <span class="nv">$em</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getDoctrine</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getManager</span><span class="p">();</span>
    <span class="nv">$em</span><span class="o">-&gt;</span><span class="na">persist</span><span class="p">(</span><span class="nv">$task</span><span class="p">);</span>
    <span class="nv">$em</span><span class="o">-&gt;</span><span class="na">flush</span><span class="p">();</span>

    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirectToRoute</span><span class="p">(</span><span class="s1">&#39;task_success&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>ä½ å¯ä»¥ä¸ç”¨åˆ›å»º <code class="docutils literal"><span class="pre">$task</span></code> å¯¹è±¡è€Œç›´æ¥ä»è¡¨å•å¯¹è±¡ä¸­è·å–å®ƒ</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$task</span> <span class="o">=</span> <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">getData</span><span class="p">();</span>
</pre></div>
</div>
<p>æƒ³äº†è§£æ›´å¤šï¼Ÿè¯·çœ‹  <a class="reference internal" href="doctrine.html" tppabs="http://symfony.cn/docs/book/doctrine.html"><em>Doctrine ORM chapter</em></a> ã€‚</p>
<p>The key thing to understand is that when the form is submitted, the submitted
data is transferred to the underlying object immediately. If you want to
persist that data, you simply need to persist the object itself (which already
contains the submitted data).</p>
</div>
<div class="section" id="embedded-forms">
<span id="index-20"></span><h2>è¡¨å•åµŒè¡¨å•<a class="headerlink" href="#embedded-forms" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>Often, you&#8217;ll want to build a form that will include fields from many different
objects. For example, a registration form may contain data belonging to
a <code class="docutils literal"><span class="pre">User</span></code> object as well as many <code class="docutils literal"><span class="pre">Address</span></code> objects. Fortunately, this
is easy and natural with the Form component.</p>
<div class="section" id="embedding-a-single-object">
<span id="forms-embedding-single-object"></span><h3>åªåµŒå•ä¸ªè¡¨å•<a class="headerlink" href="#embedding-a-single-object" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>å‡å¦‚ <code class="docutils literal"><span class="pre">Task</span></code> å±äºæŸä¸ª <code class="docutils literal"><span class="pre">Category</span></code> å¯¹è±¡ï¼Œé¦–å…ˆæˆ‘ä»¬å¾—æœ‰ä¸€ä¸ª <code class="docutils literal"><span class="pre">Category</span></code> å¯¹è±¡:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/AppBundle/Entity/Category.php</span>
<span class="k">namespace</span> <span class="nx">AppBundle\Entity</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Category</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Assert\NotBlank()</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="nv">$name</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>æ¥ä¸‹æ¥ï¼Œç»™ <code class="docutils literal"><span class="pre">Task</span></code> ç±»æ·»åŠ  <code class="docutils literal"><span class="pre">category</span></code> å±æ€§:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// ...</span>

<span class="k">class</span> <span class="nc">Task</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="sd">/**</span>
<span class="sd">     * @Assert\Type(type=&quot;AppBundle\Entity\Category&quot;)</span>
<span class="sd">     * @Assert\Valid()</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="nv">$category</span><span class="p">;</span>

    <span class="c1">// ...</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getCategory</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">category</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">setCategory</span><span class="p">(</span><span class="nx">Category</span> <span class="nv">$category</span> <span class="o">=</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">category</span> <span class="o">=</span> <span class="nv">$category</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">å°æŠ€å·§</p>
<p class="last">The <code class="docutils literal"><span class="pre">Valid</span></code> Constraint has been added to the property <code class="docutils literal"><span class="pre">category</span></code>. This
cascades the validation to the corresponding entity. If you omit this constraint
the child entity would not be validated.</p>
</div>
<p>Now that your application has been updated to reflect the new requirements,
create a form class so that a <code class="docutils literal"><span class="pre">Category</span></code> object can be modified by the user:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/AppBundle/Form/Type/CategoryType.php</span>
<span class="k">namespace</span> <span class="nx">AppBundle\Form\Type</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\Form\AbstractType</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Form\FormBuilderInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\OptionsResolver\OptionsResolver</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">CategoryType</span> <span class="k">extends</span> <span class="nx">AbstractType</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">buildForm</span><span class="p">(</span><span class="nx">FormBuilderInterface</span> <span class="nv">$builder</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$options</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$builder</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">configureOptions</span><span class="p">(</span><span class="nx">OptionsResolver</span> <span class="nv">$resolver</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$resolver</span><span class="o">-&gt;</span><span class="na">setDefaults</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;data_class&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AppBundle\Entity\Category&#39;</span><span class="p">,</span>
        <span class="p">));</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getName</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;category&#39;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The end goal is to allow the <code class="docutils literal"><span class="pre">Category</span></code> of a <code class="docutils literal"><span class="pre">Task</span></code> to be modified right
inside the task form itself. To accomplish this, add a <code class="docutils literal"><span class="pre">category</span></code> field
to the <code class="docutils literal"><span class="pre">TaskType</span></code> object whose type is an instance of the new <code class="docutils literal"><span class="pre">CategoryType</span></code>
class:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\Form\FormBuilderInterface</span><span class="p">;</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">buildForm</span><span class="p">(</span><span class="nx">FormBuilderInterface</span> <span class="nv">$builder</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$options</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="nv">$builder</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">CategoryType</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The fields from <code class="docutils literal"><span class="pre">CategoryType</span></code> can now be rendered alongside those from
the <code class="docutils literal"><span class="pre">TaskType</span></code> class.</p>
<p>ä½¿ç”¨è·Ÿæ˜¾ç¤º <code class="docutils literal"><span class="pre">Task</span></code> åŒæ ·çš„æ–¹å¼æ¥æ˜¾ç¤º <code class="docutils literal"><span class="pre">Category</span></code> çš„è¡¨å•å­—æ®µï¼š</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# ... #}</span>

<span class="nt">&lt;h3&gt;</span>Category<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;category&quot;</span><span class="nt">&gt;</span>
    <span class="cp">{{</span> <span class="nv">form_row</span><span class="o">(</span><span class="nv">form.category.name</span><span class="o">)</span> <span class="cp">}}</span>
<span class="nt">&lt;/div&gt;</span>

<span class="c">{# ... #}</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-html+php"><div class="highlight"><pre><span class="c">&lt;!-- ... --&gt;</span>

<span class="nt">&lt;h3&gt;</span>Category<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;category&quot;</span><span class="nt">&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">row</span><span class="p">(</span><span class="nv">$form</span><span class="p">[</span><span class="s1">&#39;category&#39;</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="c">&lt;!-- ... --&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>When the user submits the form, the submitted data for the <code class="docutils literal"><span class="pre">Category</span></code> fields
are used to construct an instance of <code class="docutils literal"><span class="pre">Category</span></code>, which is then set on the
<code class="docutils literal"><span class="pre">category</span></code> field of the <code class="docutils literal"><span class="pre">Task</span></code> instance.</p>
<p>The <code class="docutils literal"><span class="pre">Category</span></code> instance is accessible naturally via <code class="docutils literal"><span class="pre">$task-&gt;getCategory()</span></code>
and can be persisted to the database or used however you need.</p>
</div>
<div class="section" id="embedding-a-collection-of-forms">
<h3>å†…åµŒä¸€ç»„è¡¨å•<a class="headerlink" href="#embedding-a-collection-of-forms" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>You can also embed a collection of forms into one form (imagine a <code class="docutils literal"><span class="pre">Category</span></code>
form with many <code class="docutils literal"><span class="pre">Product</span></code> sub-forms). This is done by using the <code class="docutils literal"><span class="pre">collection</span></code>
field type.</p>
<p>For more information see the &#8220;<a class="reference internal" href="form_collections.html" tppabs="http://symfony.cn/docs/cookbook/form/form_collections.html"><em>How to Embed a Collection of Forms</em></a>&#8221; cookbook
entry and the <a class="reference internal" href="collection-1.html" tppabs="http://symfony.cn/docs/reference/forms/types/collection.html"><em>collection</em></a> field type reference.</p>
</div>
</div>
<div class="section" id="form-theming">
<span id="index-21"></span><span id="id1"></span><h2>è¡¨å•ä¸»é¢˜<a class="headerlink" href="#form-theming" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>Every part of how a form is rendered can be customized. You&#8217;re free to change
how each form &#8220;row&#8221; renders, change the markup used to render errors, or
even customize how a <code class="docutils literal"><span class="pre">textarea</span></code> tag should be rendered. Nothing is off-limits,
and different customizations can be used in different places.</p>
<p>Symfony uses templates to render each and every part of a form, such as
<code class="docutils literal"><span class="pre">label</span></code> tags, <code class="docutils literal"><span class="pre">input</span></code> tags, error messages and everything else.</p>
<p>In Twig, each form &#8220;fragment&#8221; is represented by a Twig block. To customize
any part of how a form renders, you just need to override the appropriate block.</p>
<p>In PHP, each form &#8220;fragment&#8221; is rendered via an individual template file.
To customize any part of how a form renders, you just need to override the
existing template by creating a new one.</p>
<p>To understand how this works, customize the <code class="docutils literal"><span class="pre">form_row</span></code> fragment and
add a class attribute to the <code class="docutils literal"><span class="pre">div</span></code> element that surrounds each row. To
do this, create a new template file that will store the new markup:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# app/Resources/views/form/fields.html.twig #}</span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">form_row</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">spaceless</span> <span class="cp">%}</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form_row&quot;</span><span class="nt">&gt;</span>
        <span class="cp">{{</span> <span class="nv">form_label</span><span class="o">(</span><span class="nv">form</span><span class="o">)</span> <span class="cp">}}</span>
        <span class="cp">{{</span> <span class="nv">form_errors</span><span class="o">(</span><span class="nv">form</span><span class="o">)</span> <span class="cp">}}</span>
        <span class="cp">{{</span> <span class="nv">form_widget</span><span class="o">(</span><span class="nv">form</span><span class="o">)</span> <span class="cp">}}</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="cp">{%</span> <span class="k">endspaceless</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="nv">form_row</span> <span class="cp">%}</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-html+php"><div class="highlight"><pre><span class="c">&lt;!-- app/Resources/views/form/form_row.html.php --&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form_row&quot;</span><span class="nt">&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">label</span><span class="p">(</span><span class="nv">$form</span><span class="p">,</span> <span class="nv">$label</span><span class="p">)</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">errors</span><span class="p">(</span><span class="nv">$form</span><span class="p">)</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">widget</span><span class="p">(</span><span class="nv">$form</span><span class="p">,</span> <span class="nv">$parameters</span><span class="p">)</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>The <code class="docutils literal"><span class="pre">form_row</span></code> form fragment is used when rendering most fields via the
<code class="docutils literal"><span class="pre">form_row</span></code> function. To tell the Form component to use your new <code class="docutils literal"><span class="pre">form_row</span></code>
fragment defined above, add the following to the top of the template that
renders the form:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# app/Resources/views/default/new.html.twig #}</span>
<span class="cp">{%</span> <span class="k">form_theme</span> <span class="nv">form</span> <span class="s1">&#39;form/fields.html.twig&#39;</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">form_theme</span> <span class="nv">form</span> <span class="s1">&#39;form/fields.html.twig&#39;</span> <span class="s1">&#39;form/fields2.html.twig&#39;</span> <span class="cp">%}</span>

<span class="c">{# ... render the form #}</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-html+php"><div class="highlight"><pre><span class="c">&lt;!-- app/Resources/views/default/new.html.php --&gt;</span>
<span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">setTheme</span><span class="p">(</span><span class="nv">$form</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;form&#39;</span><span class="p">))</span> <span class="cp">?&gt;</span>

<span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">setTheme</span><span class="p">(</span><span class="nv">$form</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;form&#39;</span><span class="p">,</span> <span class="s1">&#39;form2&#39;</span><span class="p">))</span> <span class="cp">?&gt;</span>

<span class="c">&lt;!-- ... render the form --&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>The <code class="docutils literal"><span class="pre">form_theme</span></code> tag (in Twig) &#8220;imports&#8221; the fragments defined in the given
template and uses them when rendering the form. In other words, when the
<code class="docutils literal"><span class="pre">form_row</span></code> function is called later in this template, it will use the <code class="docutils literal"><span class="pre">form_row</span></code>
block from your custom theme (instead of the default <code class="docutils literal"><span class="pre">form_row</span></code> block
that ships with Symfony).</p>
<p>Your custom theme does not have to override all the blocks. When rendering a block
which is not overridden in your custom theme, the theming engine will fall back
to the global theme (defined at the bundle level).</p>
<p>å¦‚æœæä¾›äº†å¤šä¸ªè‡ªå®šä¹‰ä¸»é¢˜ï¼Œä»–ä»¬å°†ä¼šæŒ‰ç…§é¡ºåºæŒ¨ä¸ªå°è¯•ä½¿ç”¨ï¼Œå¦‚æœæ‰€æœ‰ä¸é€‚ç”¨ï¼Œå°†ä¼šä½¿ç”¨å…¨å±€ä¸»é¢˜</p>
<p>è¦è‡ªå®šä¹‰è¡¨å•æŸä¸ªéƒ¨åˆ†çš„æ˜¾ç¤ºï¼Œä½ åªéœ€è¦é‡è½½åˆé€‚çš„ç‰‡æ®µä»£ç ã€‚ä¸‹ä¸€ä¸ªå°ç»“ä¼šå‘Šè¯‰ä½ åº”è¯¥é‡è½½å“ªä¸€éƒ¨åˆ†çš„ä»£ç ã€‚</p>
<p>è¯·ç§»æ­¥ <a class="reference internal" href="form_customization.html" tppabs="http://symfony.cn/docs/cookbook/form/form_customization.html"><em>How to Customize Form Rendering</em></a> äº†è§£æ›´å¤šã€‚</p>
<div class="section" id="form-fragment-naming">
<span id="form-template-blocks"></span><span id="index-22"></span><h3>è¡¨å•å‡½æ•°å‘½åè§„åˆ™<a class="headerlink" href="#form-fragment-naming" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>Symfonyä¼šæŠŠè¡¨å•çš„æ¯ä¸€ä¸ªéƒ¨åˆ†éƒ½ç”ŸæˆHTMLè¡¨å•ä»£ç ï¼Œæ¯”å¦‚é”™è¯¯ä¿¡æ¯ï¼Œè¡¨å•åç§°ï¼Œç­‰ç­‰ã€‚è€Œå®šä¹‰ä»–ä»¬çš„æ˜¯æŸä¸€ä¸ªTwigæ–‡ä»¶çš„è¡¨å•æ¨¡æ¿æ¨¡å—é›†åˆï¼Œæˆ–è€…ä¸€å †PHPå†™çš„æ¨¡æ¿æ–‡ä»¶ã€‚</p>
<p>Twigé‡Œæ¯ä¸€ä¸ªè¡¨å•æ¨¡å—éƒ½å®šä¹‰åœ¨ <a class="reference external" href="javascript:if(confirm('https://github.com/symfony/symfony/tree/master/src/Symfony/Bridge/Twig  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/symfony/symfony/tree/master/src/Symfony/Bridge/Twig'" tppabs="https://github.com/symfony/symfony/tree/master/src/Symfony/Bridge/Twig">Twig Bridge</a> çš„ä¸€ä¸ªæ¨¡æ¿æ–‡ä»¶é‡Œï¼ˆæ¯”å¦‚ <a class="reference external" href="javascript:if(confirm('https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig'" tppabs="https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig">form_div_layout.html.twig</a> ï¼‰ï¼Œä½ å¯ä»¥åœ¨æ­¤æ–‡ä»¶é‡Œçœ‹åˆ°è¡¨å•çš„æ¯ä¸€ä¸ªå­—æ®µçš„é»˜è®¤æ¨¡æ¿ã€‚</p>
<p>åœ¨PHPä»£ç é‡Œï¼Œè¡¨å•ç‰‡æ®µéƒ½æ˜¯å†™å•ç‹¬çš„æ¨¡æ¿æ–‡ä»¶ã€‚é»˜è®¤éƒ½æ”¾åœ¨framework bundleçš„ <cite>Resources/views/Form</cite> ä¸­ï¼ˆ <a class="reference external" href="javascript:if(confirm('https://github.com/symfony/symfony/tree/master/src/Symfony/Bundle/FrameworkBundle/Resources/views/Form  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/symfony/symfony/tree/master/src/Symfony/Bundle/FrameworkBundle/Resources/views/Form'" tppabs="https://github.com/symfony/symfony/tree/master/src/Symfony/Bundle/FrameworkBundle/Resources/views/Form">view on GitHub</a> ï¼‰ã€‚</p>
<p>æ¯ä¸€ä¸ªç‰‡æ®µåéƒ½æ˜¯åŒæ ·çš„è§„å¾‹ï¼šåˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œå¹¶ä¸”ç”¨ä¸€ä¸ªä¸‹åˆ’çº¿åˆ†å‰²ã€‚ä¸€äº›ä¾‹å­ï¼š</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">form_row</span></code> - used by <code class="docutils literal"><span class="pre">form_row</span></code> to render most fields;</li>
<li><code class="docutils literal"><span class="pre">textarea_widget</span></code> - used by <code class="docutils literal"><span class="pre">form_widget</span></code> to render a <code class="docutils literal"><span class="pre">textarea</span></code> field
type;</li>
<li><code class="docutils literal"><span class="pre">form_errors</span></code> - used by <code class="docutils literal"><span class="pre">form_errors</span></code> to render errors for a field;</li>
</ul>
<p>Each fragment follows the same basic pattern: <code class="docutils literal"><span class="pre">type_part</span></code>. The <code class="docutils literal"><span class="pre">type</span></code> portion
corresponds to the field <em>type</em> being rendered (e.g. <code class="docutils literal"><span class="pre">textarea</span></code>, <code class="docutils literal"><span class="pre">checkbox</span></code>,
<code class="docutils literal"><span class="pre">date</span></code>, etc) whereas the <code class="docutils literal"><span class="pre">part</span></code> portion corresponds to <em>what</em> is being
rendered (e.g. <code class="docutils literal"><span class="pre">label</span></code>, <code class="docutils literal"><span class="pre">widget</span></code>, <code class="docutils literal"><span class="pre">errors</span></code>, etc). By default, there
are 4 possible <em>parts</em> of a form that can be rendered:</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="27%" />
<col width="59%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">label</span></code></td>
<td><p class="first last">ï¼ˆæ¯”å¦‚ <code class="docutils literal"><span class="pre">form_label</span></code> ï¼‰</p>
</td>
<td><p class="first last">æ˜¾ç¤ºè¡¨å•çš„label</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">widget</span></code></td>
<td><p class="first last">ï¼ˆæ¯”å¦‚ <code class="docutils literal"><span class="pre">form_widget</span></code> ï¼‰</p>
</td>
<td><p class="first last">æ˜¾ç¤ºè¡¨å•å­—æ®µçš„HTML</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">errors</span></code></td>
<td><p class="first last">ï¼ˆæ¯”å¦‚ <code class="docutils literal"><span class="pre">form_errors</span></code> ï¼‰</p>
</td>
<td><p class="first last">æ˜¾ç¤ºå­—æ®µé”™è¯¯ä¿¡æ¯</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">row</span></code></td>
<td><p class="first last">ï¼ˆæ¯”å¦‚ <code class="docutils literal"><span class="pre">form_row</span></code>ï¼‰</p>
</td>
<td><p class="first last">æ˜¾ç¤ºè¡¨å•å­—æ®µçš„rowï¼ˆåŒ…æ‹¬ label, widget å·²ç» errorsï¼‰</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">æ³¨è§£</p>
<p class="last">äº‹å®ä¸Šæœ‰ä¸¤ä¸ª <em>éƒ¨åˆ†</em> â€”â€” <code class="docutils literal"><span class="pre">rows</span></code> å’Œ <code class="docutils literal"><span class="pre">rest</span></code> â€”â€” åªä¸è¿‡ä½ åº”è¯¥å¾ˆå°‘å»é‡æ„ä»–ä»¬ã€‚</p>
</div>
<p>åªè¦çŸ¥é“å­—æ®µçš„ç±»å‹å«ä»€ä¹ˆï¼ˆæ¯”å¦‚ <code class="docutils literal"><span class="pre">textarea</span></code>ï¼‰ï¼Œä»¥åŠä½ æƒ³è‡ªå®šä¹‰çš„åœ°æ–¹ï¼ˆæ¯”å¦‚ <code class="docutils literal"><span class="pre">widget</span></code>ï¼‰ï¼Œä½ å°±å¯ä»¥çŒœå‡ºå®ƒçš„åå­—é‡è½½å®ƒäº† ï¼ˆæ¯”å¦‚ <code class="docutils literal"><span class="pre">textarea_widget</span></code>ï¼‰ã€‚</p>
</div>
<div class="section" id="template-fragment-inheritance">
<span id="index-23"></span><h3>Templateç‰‡æ®µç»§æ‰¿<a class="headerlink" href="#template-fragment-inheritance" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>æŸäº›æƒ…å†µï¼Œä½ æƒ³è‡ªå®šä¹‰çš„ç‰‡æ®µå¯èƒ½ä¼šæ‰¾ä¸åˆ°ï¼Œæ¯”å¦‚è¯´ï¼Œé»˜è®¤æ¨¡æ¿æ²¡æœ‰ <code class="docutils literal"><span class="pre">textarea_errors</span></code> ç‰‡æ®µã€‚é‚£ä¹ˆtextareaçš„é”™è¯¯æ€ä¹ˆè‡ªå®šä¹‰å‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ï¼š é€šè¿‡ <code class="docutils literal"><span class="pre">form_errors</span></code> ç‰‡æ®µã€‚å½“Symfonyæ˜¾ç¤ºtextareé”™è¯¯çš„æ—¶å€™ï¼Œå®ƒä¼šå…ˆæŸ¥æ‰¾ <code class="docutils literal"><span class="pre">textarea_errors</span></code> ç‰‡æ®µï¼Œç„¶åæŸ¥æ‰¾ <code class="docutils literal"><span class="pre">form_errors</span></code>ã€‚æ¯ä¸€ä¸ªè¡¨å•å­—æ®µéƒ½æœ‰ä¸€ä¸ª <em>çˆ¶</em> ç±»å‹ï¼ˆ <code class="docutils literal"><span class="pre">textarea</span></code> çš„çˆ¶ç±»æ˜¯ <code class="docutils literal"><span class="pre">text</span></code>ï¼Œ<code class="docutils literal"><span class="pre">text</span></code> çš„çˆ¶ç±»æ˜¯ <code class="docutils literal"><span class="pre">form</span></code>ï¼‰ï¼Œå¦‚æœæœ¬èº«çš„çš„é”™è¯¯ç±»å‹æ— æ³•æ‰¾åˆ°ï¼ŒSymfonyå°†ä¼šä½¿ç”¨çˆ¶ç±»çš„é”™è¯¯ç±»å‹ã€‚</p>
<p>æ‰€ä»¥å¦‚æœè¦åªé‡è½½ <code class="docutils literal"><span class="pre">textarea</span></code> çš„é”™è¯¯ä¿¡æ¯ï¼Œå¤åˆ¶ <code class="docutils literal"><span class="pre">form_errors</span></code> ç‰‡æ®µï¼Œå°†å…¶é‡å‘½åä¸º <code class="docutils literal"><span class="pre">textarea_errros</span></code> ç„¶åä¿®æ”¹å®ƒã€‚å¦‚æœè¦é‡è½½ <em>æ‰€æœ‰</em> çš„é”™è¯¯ä¿¡æ¯ï¼Œå¤åˆ¶åç›´æ¥ä¿®æ”¹ <code class="docutils literal"><span class="pre">form_errors</span></code> ã€‚</p>
<div class="admonition tip">
<p class="first admonition-title">å°æŠ€å·§</p>
<p class="last">æ¯ä¸€ä¸ªè¡¨å•ç±»å‹çš„â€œparentâ€ç±»å‹å¯å‚è€ƒ <a class="reference internal" href="types.html" tppabs="http://symfony.cn/docs/reference/forms/types.html"><em>form type reference</em></a></p>
</div>
</div>
<div class="section" id="global-form-theming">
<span id="index-24"></span><h3>å…¨å±€è¡¨å•ä¸»é¢˜<a class="headerlink" href="#global-form-theming" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>åœ¨ä»¥ä¸Šçš„ä¾‹å­ä¸­ï¼Œä½ éœ€è¦ç”¨ <code class="docutils literal"><span class="pre">form_theme</span></code> åŠ©æ‰‹æ–¹æ³•ï¼ˆTwigï¼‰æ¥å¼•å…¥è‡ªå®šä¹‰çš„æ¨¡æ¿ç‰‡æ®µã€‚ä½ ä¹Ÿå¯ä»¥è®©Symfonyåœ¨æ•´ä¸ªé¡¹ç›®é‡Œéƒ½åŠ è½½ä½ è‡ªå®šä¹‰çš„æ¨¡æ¿ã€‚</p>
<div class="section" id="twig">
<h4>Twig<a class="headerlink" href="#twig" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h4>
<p>ä½ éœ€è¦ä¿®æ”¹é¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œæ¥è‡ªåŠ¨åŒ…å«ä½ åœ¨ <code class="docutils literal"><span class="pre">fields.html.twig</span></code> æ–‡ä»¶é‡Œå®šä¹‰çš„æ¨¡æ¿ï¼š</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">twig</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">form_themes</span><span class="p-Indicator">:</span>
        <span class="p-Indicator">-</span> <span class="s">&#39;form/fields.html.twig&#39;</span>
    <span class="c1"># ...</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/config.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;container</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/services&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xmlns:twig=</span><span class="s">&quot;http://symfony.com/schema/dic/twig&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd</span>
<span class="s">        http://symfony.com/schema/dic/twig http://symfony.com/schema/dic/twig/twig-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;twig:config&gt;</span>
        <span class="nt">&lt;twig:theme&gt;</span>form/fields.html.twig<span class="nt">&lt;/twig:theme&gt;</span>
        <span class="c">&lt;!-- ... --&gt;</span>
    <span class="nt">&lt;/twig:config&gt;</span>
<span class="nt">&lt;/container&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// app/config/config.php</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;twig&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;form_themes&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;form/fields.html.twig&#39;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="c1">// ...</span>
<span class="p">));</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>æ‰€æœ‰åœ¨ <code class="docutils literal"><span class="pre">fields.html.twig</span></code> æ¨¡æ¿é‡Œçš„è¡¨å•æ¨¡å—ç°åœ¨éƒ½å¯ä»¥å…¨å±€ä½¿ç”¨äº†ã€‚</p>
<div class="sidebar">
<p class="first sidebar-title">åœ¨å•ä¸ªTwigæ–‡ä»¶é‡Œè‡ªå®šä¹‰è¡¨å•è¾“å‡º</p>
<p>åœ¨Twigé‡Œï¼Œä½ å¯ä»¥ç›´æ¥åœ¨éœ€è¦è‡ªå®šä¹‰è¡¨å•æ˜¾ç¤ºçš„æ¨¡æ¿é‡Œï¼Œä¿®æ”¹è¡¨å•æŸä¸ªéƒ¨åˆ†çš„æ˜¾ç¤º</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;base.html.twig&#39;</span> <span class="cp">%}</span>

<span class="c">{# import &quot;_self&quot; as the form theme #}</span>
<span class="cp">{%</span> <span class="k">form_theme</span> <span class="nv">form</span> <span class="p">_</span><span class="nv">self</span> <span class="cp">%}</span>

<span class="c">{# make the form fragment customization #}</span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">form_row</span> <span class="cp">%}</span>
    <span class="c">{# custom field row output #}</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="nv">form_row</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
    <span class="c">{# ... #}</span>

    <span class="cp">{{</span> <span class="nv">form_row</span><span class="o">(</span><span class="nv">form.task</span><span class="o">)</span> <span class="cp">}}</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">{%</span> <span class="pre">form_theme</span> <span class="pre">form</span> <span class="pre">_self</span> <span class="pre">%}</span></code> è®©è¡¨å•å¯ä»¥ç›´æ¥åœ¨å½“å‰æ¨¡æ¿åšä¸€äº›è‡ªå®šä¹‰ä¿®æ”¹ã€‚ä½¿ç”¨æ­¤æ–¹æ³•å¯ä»¥å¾ˆå¿«å®ç°åœ¨å½“å‰æ¨¡æ¿è¡¨å•è‡ªå®šä¹‰æ˜¾ç¤ºã€‚</p>
<div class="last admonition caution">
<p class="first admonition-title">è­¦å‘Š</p>
<p class="last"><code class="docutils literal"><span class="pre">{%</span> <span class="pre">form_theme</span> <span class="pre">form</span> <span class="pre">_self</span> <span class="pre">%}</span></code> åŠŸèƒ½ <em>åªèƒ½</em> åœ¨å½“å‰æ¨¡æ¿æ˜¯ç»§æ‰¿å…¶ä»–æ¨¡æ¿çš„æ—¶å€™ç®¡ç”¨ã€‚å¦åˆ™ï¼Œä½ å¿…é¡»è®¾ç½® <code class="docutils literal"><span class="pre">form_theme</span></code> åˆ°å…¶ä»–çš„æ¨¡æ¿æ–‡ä»¶ã€‚</p>
</div>
</div>
</div>
<div class="section" id="php">
<h4>PHP<a class="headerlink" href="#php" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h4>
<p>ä½ éœ€è¦ä¿®æ”¹é¡¹ç›®é…ç½®æ–‡ä»¶æ¥ä» <code class="docutils literal"><span class="pre">app/Resources/views/Form</span></code> ç›®å½•è‡ªåŠ¨è½½å…¥ä½ çš„è‡ªå®šä¹‰æ¨¡æ¿</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">framework</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">templating</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">form</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">resources</span><span class="p-Indicator">:</span>
                <span class="p-Indicator">-</span> <span class="s">&#39;Form&#39;</span>
<span class="c1"># ...</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/config.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;container</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/services&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xmlns:framework=</span><span class="s">&quot;http://symfony.com/schema/dic/symfony&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd</span>
<span class="s">        http://symfony.com/schema/dic/symfony http://symfony.com/schema/dic/symfony/symfony-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;framework:config&gt;</span>
        <span class="nt">&lt;framework:templating&gt;</span>
            <span class="nt">&lt;framework:form&gt;</span>
                <span class="nt">&lt;framework:resource&gt;</span>Form<span class="nt">&lt;/framework:resource&gt;</span>
            <span class="nt">&lt;/framework:form&gt;</span>
        <span class="nt">&lt;/framework:templating&gt;</span>
        <span class="c">&lt;!-- ... --&gt;</span>
    <span class="nt">&lt;/framework:config&gt;</span>
<span class="nt">&lt;/container&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// app/config/config.php</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;framework&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;templating&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;form&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;resources&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;Form&#39;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="c1">// ...</span>
<span class="p">));</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>æ‰€æœ‰åœ¨ <code class="docutils literal"><span class="pre">app/Resources/views/Form</span></code> ç›®å½•çš„æ¨¡æ¿ç‰‡æ®µç›®å‰å¯ä»¥åœ¨å…¨å±€ä¸‹ä½¿ç”¨äº†ã€‚</p>
</div>
</div>
</div>
<div class="section" id="csrf-protection">
<span id="forms-csrf"></span><span id="index-25"></span><h2>CSRFä¿æŠ¤<a class="headerlink" href="#csrf-protection" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>CSRFï¼ˆ <a class="reference external" href="javascript:if(confirm('http://en.wikipedia.org/wiki/Cross-site_request_forgery  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://en.wikipedia.org/wiki/Cross-site_request_forgery'" tppabs="http://en.wikipedia.org/wiki/Cross-site_request_forgery">Cross-site request forgery</a> ï¼‰æ˜¯ä¸€ç§æ”»å‡»è€…è®©ç”¨æˆ·åœ¨æ— æ„è¯†ä¸‹æäº¤ä¸€äº›è‡ªå·±ä¸åº”è¯¥æäº¤çš„æ•°æ®çš„æ”»å‡»æ–¹å¼ã€‚ä¸è¿‡CSRFå¯ä»¥é€šè¿‡åœ¨ä½ çš„è¡¨å•é‡ŒåŠ å…¥CSRF Tokenæ¥é¿å…ã€‚</p>
<p>å¥½æ¶ˆæ¯æ˜¯ï¼ŒSymfonyä¼šè‡ªåŠ¨å¸®ä½ åœ¨è¡¨å•é‡Œæ·»åŠ ä»¥åŠéªŒè¯CSRF tokenã€‚æ‰€ä»¥ä½ å°±å¯ä»¥åœ¨Symfonyçš„åº‡æŠ¤ä¸‹æ”¾å¿ƒç”¨è¡¨å•è€Œä¸ç”¨åšå…¶ä»–ä»»ä½•äº‹æƒ…ã€‚æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­å…¶å®éƒ½å·²ç»å—åˆ°äº†CSRFçš„ä¿æŠ¤ï¼</p>
<p>CSRFä¿æŠ¤åŸç†ï¼šåœ¨è¡¨å•é‡Œæ·»åŠ ä¸€ä¸ªtokenå­—æ®µã€‚åªæœ‰æœåŠ¡å™¨å’Œç”¨æˆ·æ‰çŸ¥é“ã€‚è¿™å°†ä¿è¯åªæœ‰å½“å‰è®¿é—®ç”¨æˆ·â€”â€”è€Œä¸æ˜¯å…¶ä»–æ”»å‡»è€…â€”â€”æäº¤äº†è¡¨å•ã€‚Symfonyå°†ä¼šè‡ªåŠ¨æ ¡éªŒTokençš„æ­£ç¡®æ€§</p>
<p><code class="docutils literal"><span class="pre">_token</span></code> è¡¨å•å­—æ®µæ˜¯éšè—å­—æ®µï¼Œå¹¶ä¸”ä¼šåœ¨ <code class="docutils literal"><span class="pre">form_end()</span></code> çš„æ—¶å€™è‡ªåŠ¨è¢«ç”Ÿæˆï¼ŒåŒ…æ‹¬å…¶ä»–æ‰€æœ‰æ²¡æœ‰è¢«æ˜¾ç¤ºçš„å­—æ®µä¸€èµ·éƒ½è¢«è¾“å‡ºã€‚</p>
<p>CSRFä¹Ÿå¯ä»¥è¢«è‡ªå®šä¹‰ï¼Œæ¯”å¦‚:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\OptionsResolver\OptionsResolver</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">TaskType</span> <span class="k">extends</span> <span class="nx">AbstractType</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">configureOptions</span><span class="p">(</span><span class="nx">OptionsResolver</span> <span class="nv">$resolver</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$resolver</span><span class="o">-&gt;</span><span class="na">setDefaults</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;data_class&#39;</span>      <span class="o">=&gt;</span> <span class="s1">&#39;AppBundle\Entity\Task&#39;</span><span class="p">,</span>
            <span class="s1">&#39;csrf_protection&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
            <span class="s1">&#39;csrf_field_name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;_token&#39;</span><span class="p">,</span>
            <span class="c1">// a unique key to help generate the secret token</span>
            <span class="s1">&#39;intention&#39;</span>       <span class="o">=&gt;</span> <span class="s1">&#39;task_item&#39;</span><span class="p">,</span>
        <span class="p">));</span>
    <span class="p">}</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
<p id="form-disable-csrf">å¦‚æœæƒ³å…³é—­CSRFä¿æŠ¤ï¼Œè¯·è®¾ç½®è¡¨å•çš„ <code class="docutils literal"><span class="pre">csrf_protection</span></code> é€‰é¡¹ä¸ºfalseã€‚å½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡å…¨å±€è®¾ç½®ã€‚è¯·ç§»æ­¥è‡³ <a class="reference internal" href="framework.html#reference-framework-form" tppabs="http://symfony.cn/docs/reference/configuration/framework.html#reference-framework-form"><span>form configuration reference</span></a> å°èŠ‚æŸ¥çœ‹è¿‡å¤šä¿¡æ¯ã€‚</p>
<div class="admonition note">
<p class="first admonition-title">æ³¨è§£</p>
<p class="last"><code class="docutils literal"><span class="pre">intention</span></code> ä¸ºå¯é€‰é¡¹ï¼Œä½†å¦‚æœç»™æ¯ä¸€ä¸ªè¡¨å•è®¾ç½®ä¸åŒçš„å€¼ï¼Œä¼šæå¤§æé«˜å®‰å…¨æ€§ã€‚</p>
</div>
<div class="admonition caution">
<p class="first admonition-title">è­¦å‘Š</p>
<p class="last">CSRF tokenså¯¹äºæ¯ä¸€ä¸ªç”¨æˆ·éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™ä¹Ÿæ„å‘³ç€å¦‚æœä½ æƒ³ä½¿ç”¨é¡µé¢ç¼“å­˜æŠ€æœ¯æ‚¨å¾—æ³¨æ„äº†ã€‚æƒ³äº†è§£æ›´å¤šè¯·é˜…è¯» <a class="reference internal" href="form_csrf_caching.html" tppabs="http://symfony.cn/docs/cookbook/cache/form_csrf_caching.html"><em>ç¼“å­˜å¸¦CSRFè¡¨å•çš„é¡µé¢</em></a> ã€‚</p>
</div>
</div>
<div class="section" id="using-a-form-without-a-class">
<span id="index-26"></span><h2>ä¸ä½¿ç”¨ç±»ç›´æ¥åˆ›å»ºè¡¨å•<a class="headerlink" href="#using-a-form-without-a-class" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>å¤§éƒ¨åˆ†æƒ…å†µï¼Œè¡¨å•éƒ½å’ŒæŸä¸ªå¯¹è±¡æ˜¯ç»‘å®šçš„ï¼Œè€Œä¸”è¡¨å•æäº¤æ•°æ®å°†æäº¤åˆ°å¯¹è±¡çš„å±æ€§ä¸Šã€‚è¿™åœ¨ <code class="docutils literal"><span class="pre">Task</span></code> ç±»çš„ä¾‹å­ä¸Šå·²ç»çœ‹åˆ°äº†ã€‚</p>
<p>ä¸è¿‡æœ‰æ—¶å€™å‘¢ï¼Œä½ å¯èƒ½ä¸æƒ³æŠŠè¡¨å•è·Ÿä¸€ä¸ªå¯¹è±¡ç»‘å®šï¼Œå…¶å®è¿™ä¹Ÿæ˜¯å¯ä»¥è½»æ¾åšåˆ°çš„:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// make sure you&#39;ve imported the Request namespace above the class</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Request</span><span class="p">;</span>
<span class="c1">// ...</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">contactAction</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$defaultData</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Type your message here&#39;</span><span class="p">);</span>
    <span class="nv">$form</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createFormBuilder</span><span class="p">(</span><span class="nv">$defaultData</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="s1">&#39;email&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span> <span class="s1">&#39;textarea&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;send&#39;</span><span class="p">,</span> <span class="s1">&#39;submit&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">getForm</span><span class="p">();</span>

    <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">handleRequest</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$form</span><span class="o">-&gt;</span><span class="na">isValid</span><span class="p">())</span> <span class="p">{</span>
        <span class="c1">// data is an array with &quot;name&quot;, &quot;email&quot;, and &quot;message&quot; keys</span>
        <span class="nv">$data</span> <span class="o">=</span> <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">getData</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="c1">// ... render the form</span>
<span class="p">}</span>
</pre></div>
</div>
<p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¡¨å•å°±æ˜¯å°è¯•ç»‘å®šä¸€ä¸ªæ•°ç»„ï¼Œè€Œä¸æ˜¯å¯¹è±¡ã€‚æœ‰ä¸¤ä¸ªæ–¹æ³•ä½ å¯ä»¥æ”¹å˜è¿™ä¸ªè¡Œä¸ºï¼Œè€Œä½¿ç”¨å¯¹è±¡æ¥æ›¿æ¢ï¼š</p>
<ol class="arabic simple">
<li><p class="first">åœ¨ä½¿ç”¨ <code class="docutils literal"><span class="pre">createFormBuilder</span></code> æ–¹æ³•æ—¶å°†å¯¹è±¡ä¼ å…¥ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæˆ–è€…åœ¨ä½¿ç”¨ <code class="docutils literal"><span class="pre">createFormBuilder</span></code> æ—¶å°†å¯¹è±¡ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ã€‚</p>
</li>
<li><p class="first">åœ¨è¡¨å•é‡Œå®šä¹‰å¥½ <code class="docutils literal"><span class="pre">data_class</span></code> å‚æ•°ã€‚</p>
</li>
</ol>
<p>å¦‚æœä½  <em>ä¸</em> ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•ï¼Œé‚£ä¹ˆè¡¨å•é»˜è®¤è¿”å›çš„æ•°æ®æ˜¯ä¸ªæ•°ç»„ã€‚å› ä¸º <code class="docutils literal"><span class="pre">$defaultData</span></code> ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ ï¼ˆ <code class="docutils literal"><span class="pre">data_class</span></code> ä¹Ÿæ²¡æœ‰è¢«è®¾ç½®ï¼‰ã€‚æ‰€ä»¥ <code class="docutils literal"><span class="pre">$form-&gt;getData()</span></code> åªèƒ½è¿”å›æ•°ç»„äº†ã€‚</p>
<div class="admonition tip">
<p class="first admonition-title">å°æŠ€å·§</p>
<p>ä½ ä¹Ÿå¯ä»¥é€šè¿‡requestå¯¹è±¡è·å–POSTçš„æ•°æ®ï¼ˆè¿™é‡Œä¸ºâ€œnameâ€ï¼‰ï¼Œæ¯”å¦‚è¿™æ ·:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">ä¸è¿‡å‘¢ï¼Œæœ€å¥½è¿˜æ˜¯ç”¨ <code class="docutils literal"><span class="pre">getData()</span></code> æ–¹æ³•ï¼Œå› ä¸ºä»–è¿”å›çš„æ˜¯è¢«è¡¨å•è½¬æ¢åŒ–è¿‡åçš„æ•°æ®ã€‚</p>
</div>
<div class="section" id="adding-validation">
<h3>æ·»åŠ æ ¡éªŒè§„åˆ™<a class="headerlink" href="#adding-validation" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>å”¯ä¸€æ²¡æçš„æ˜¯æ ¡éªŒã€‚é€šå¸¸ï¼Œå½“ä½ æ‰§è¡Œ <code class="docutils literal"><span class="pre">$form-&gt;isValid()</span></code> æ—¶ï¼Œå¯¹è±¡ä¸Šçš„æ ¡éªŒè§„åˆ™è¢«è¯»å–ã€‚ä½†æ˜¯ä½ å¾—è®©è¡¨å’ŒæŸä¸ªå¯¹è±¡å…³è”æ‰è¡Œï¼ˆé€šè¿‡ <code class="docutils literal"><span class="pre">data_class</span></code>ï¼Œæˆ–è€…ä¼ é€’ä¸€ä¸ªå¯¹è±¡ï¼‰ã€‚è¯·è§ <a class="reference internal" href="validation.html" tppabs="http://symfony.cn/docs/book/validation.html"><em>æ ¡éªŒ</em></a> æŸ¥é˜…æ›´å¤šã€‚</p>
<p id="form-option-constraints">ä½†å¦‚æœè¡¨å•å¹¶æ²¡æœ‰å…³è”æŸä¸ªå¯¹è±¡ï¼Œä½ å¦‚ä½•ç»™ä½ çš„è¡¨å•æ·»åŠ æ ¡éªŒè§„åˆ™å‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ä½ è‡ªå·±åˆ›å»ºæ ¡éªŒè§„åˆ™ï¼Œå¹¶ä¸”å°†ä»–ä»¬æ·»åŠ åˆ°å•ä¸ªçš„è¡¨å•å­—æ®µé‡Œã€‚ä¸»è¦ç›®çš„å°†åœ¨ <a class="reference internal" href="validation.html#book-validation-raw-values" tppabs="http://symfony.cn/docs/book/validation.html#book-validation-raw-values"><span>validation chapter</span></a> å¾—ä»¥è®¨è®ºï¼Œä½†è¿™é‡Œä¹Ÿæœ‰ä¸€ä¸ªç®€å•çš„æ¼”ç¤ºä¾‹å­ï¼š</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints\Length</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints\NotBlank</span><span class="p">;</span>

<span class="nv">$builder</span>
   <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;firstName&#39;</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
       <span class="s1">&#39;constraints&#39;</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">Length</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;min&#39;</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">)),</span>
   <span class="p">))</span>
   <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;lastName&#39;</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
       <span class="s1">&#39;constraints&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
           <span class="k">new</span> <span class="nx">NotBlank</span><span class="p">(),</span>
           <span class="k">new</span> <span class="nx">Length</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;min&#39;</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">)),</span>
       <span class="p">),</span>
   <span class="p">))</span>
<span class="p">;</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">å°æŠ€å·§</p>
<p class="last">å¦‚æœä½ è¦ä½¿ç”¨æ ¡éªŒç»„ï¼Œä½ è¦ä¸åœ¨åˆ›å»ºè¡¨å•å¯¹è±¡æ—¶å¾—æåˆ° <code class="docutils literal"><span class="pre">Default</span></code> ç»„ï¼Œè¦ä¸è®¾ç½®ä¸€ä¸ªåˆé€‚çš„ç»„</p>
</div>
<div class="highlight-php"><div class="highlight"><pre><span class="k">new</span> <span class="nx">NotBlank</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;groups&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="s1">&#39;update&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="final-thoughts">
<h2>æ€»ç»“<a class="headerlink" href="#final-thoughts" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>ä½ å·²ç»çŸ¥é“æ‰€æœ‰åˆ›å»ºè¡¨å•å¿…é¡»çŸ¥é“çš„çŸ¥è¯†ç‚¹å’ŒåŠŸèƒ½ã€‚å½“ä½ ä½¿ç”¨è¡¨å•æ—¶ï¼Œè¯·æ—¶åˆ»è®°ä½è¡¨å•çš„ç›®çš„ï¼šä¸€ï¼Œå°†ä¸€ä¸ªå°†å¯¹è±¡å˜æˆç”¨æˆ·å¯è¾“å…¥çš„è¾“å…¥æ¡†ï¼ŒäºŒï¼Œå°†ç”¨æˆ·æäº¤æ•°æ®å˜å›å¯¹è±¡ã€‚</p>
<p>å…³äºFormçš„å¼ºå¤§è¿˜æœ‰å¾ˆå¤šå¯ä»¥è¯´ï¼Œæ¯”å¦‚ <a class="reference internal" href="file_uploads.html" tppabs="http://symfony.cn/docs/cookbook/doctrine/file_uploads.html"><em>file uploads with Doctrine</em></a> ï¼Œæˆ–è€…åˆ›å»ºä¸€å †åŠ¨æ€çš„å­è¡¨å• ï¼ˆæ¯”å¦‚é€šè¿‡javascriptåˆ›å»ºå¤šä¸ªä»»åŠ¡æ¡†ï¼‰ã€‚è¯·åœ¨æ‰‹å†Œé‡ŒæŸ¥çœ‹ã€‚å¦å¤–ï¼Œè¯·ç»å¸¸å‚è€ƒ <a class="reference internal" href="types.html" tppabs="http://symfony.cn/docs/reference/forms/types.html"><em>field type reference documentation</em></a> ï¼Œ é‡Œé¢åŒ…å«äº†æ¯ç§å­—æ®µç±»å‹çš„å„ç§é€‰é¡¹è§£é‡Šå’Œå„ç§ä¾‹å­ã€‚</p>
</div>
<div class="section" id="learn-more-from-the-cookbook">
<h2>äº†è§£æ›´å¤š<a class="headerlink" href="#learn-more-from-the-cookbook" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="file_uploads.html" tppabs="http://symfony.cn/docs/cookbook/doctrine/file_uploads.html"><em>å¦‚ä½•ä½¿ç”¨Doctrineå¤„ç†æ–‡ä»¶ä¸Šä¼ </em></a></li>
<li><a class="reference internal" href="file-1.html" tppabs="http://symfony.cn/docs/reference/forms/types/file.html"><em>File Field Reference</em></a></li>
<li><a class="reference internal" href="create_custom_field_type.html" tppabs="http://symfony.cn/docs/cookbook/form/create_custom_field_type.html"><em>Creating Custom Field Types</em></a></li>
<li><a class="reference internal" href="form_customization.html" tppabs="http://symfony.cn/docs/cookbook/form/form_customization.html"><em>How to Customize Form Rendering</em></a></li>
<li><a class="reference internal" href="dynamic_form_modification.html" tppabs="http://symfony.cn/docs/cookbook/form/dynamic_form_modification.html"><em>How to Dynamically Modify Forms Using Form Events</em></a></li>
<li><a class="reference internal" href="data_transformers.html" tppabs="http://symfony.cn/docs/cookbook/form/data_transformers.html"><em>How to Use Data Transformers</em></a></li>
<li><a class="reference internal" href="csrf_in_login_form.html" tppabs="http://symfony.cn/docs/cookbook/security/csrf_in_login_form.html"><em>Using CSRF Protection in the Login Form</em></a></li>
<li><a class="reference internal" href="form_csrf_caching.html" tppabs="http://symfony.cn/docs/cookbook/cache/form_csrf_caching.html"><em>ç¼“å­˜å¸¦CSRFè¡¨å•çš„é¡µé¢</em></a></li>
</ul>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="security.html" tppabs="http://symfony.cn/docs/book/security.html" class="btn btn-neutral float-right" title="å®‰å…¨æ€§">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="validation.html" tppabs="http://symfony.cn/docs/book/validation.html" class="btn btn-neutral" title="æ ¡éªŒ"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; ç‰ˆæƒæ‰€æœ‰ Creative Commons Attribution-Share Alike 3.0 Unported.
    </p>
  </div>

  Built with <a href="javascript:if(confirm('http://sphinx-doc.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://sphinx-doc.org/'" tppabs="http://sphinx-doc.org/">Sphinx</a> using a <a href="javascript:if(confirm('https://github.com/snide/sphinx_rtd_theme  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/snide/sphinx_rtd_theme'" tppabs="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="javascript:if(confirm('https://readthedocs.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://readthedocs.org/'" tppabs="https://readthedocs.org/">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="jquery.js" tppabs="http://symfony.cn/docs/_static/jquery.js"></script>
      <script type="text/javascript" src="underscore.js" tppabs="http://symfony.cn/docs/_static/underscore.js"></script>
      <script type="text/javascript" src="doctools.js" tppabs="http://symfony.cn/docs/_static/doctools.js"></script>
      <script type="text/javascript" src="translations.js" tppabs="http://symfony.cn/docs/_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="theme.js" tppabs="http://symfony.cn/docs/_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>